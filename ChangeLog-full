commit 710059bb9fbb96dcb49b1a3fdc43b4644cc238ca
Author: uwe <uwe@NetBSD.org>
Date:   Tue Dec 6 00:59:20 2022 +0000

    editrc(5): Markup fixes

commit 86e4c4a8e39e8dc46a1b03ac82ed39bc88ae4604
Author: christos <christos@NetBSD.org>
Date:   Fri Dec 2 19:23:15 2022 +0000

    PR/57095: Yilei Yang: Change readline's replace_history_entry to not make a copy
    of the string to replace since H_REPLACE already makes a copy (fixes memory leak)

commit 21a4b1ccc371a9c3c2b659642a7b31d0562340ed
Author: christos <christos@NetBSD.org>
Date:   Sun Oct 30 19:11:31 2022 +0000

    improvements in malloc/free handling.

commit 22153c41fd0a714d1f44daa307c48f4efa3e43ca
Author: christos <christos@NetBSD.org>
Date:   Wed Sep 21 01:33:53 2022 +0000

    PR/57016: Ricky Zhou: declare lastidx

commit 8aa8c3f154436ea51d1e3c92285e010e67b6734a
Author: christos <christos@NetBSD.org>
Date:   Tue Sep 20 23:41:14 2022 +0000

    PR/57016: Ricky Zhou: Revert to trimming the last newline instead of the
    first one so that multi-line commands work again.

commit 3b1edbf2d8541f0a52ebaf42cda28f0970019b2a
Author: tnn <tnn@NetBSD.org>
Date:   Mon Apr 11 19:37:20 2022 +0000

    libedit/chartype.h: portability fix for OSF/1

commit 6e7f09099018b37d53ea1b765798bce6d4d7478f
Author: christos <christos@NetBSD.org>
Date:   Fri Apr 8 20:11:31 2022 +0000

    PR/56778: Detlev Casanova: Missing rl_initialize call in rl_copy_text

commit d1647d9c9fcf866fb362e03e82ee7654e9b772a4
Author: christos <christos@NetBSD.org>
Date:   Sat Mar 12 15:29:17 2022 +0000

    Fix filename autocompletion for strings like a\)b
    
    An escaped character should unconditionally be skipped together with the
    character that does the escaping. For example, in "a\)b" only the ")b"
    part was skipped but then the loop stopped at the "\" since it's one of
    the characters listed in word_break. (Piotr P. Stefaniak)

commit a7c17a0996f7ef673f04c0f809774281dfaa144e
Author: christos <christos@NetBSD.org>
Date:   Sat Feb 19 17:45:02 2022 +0000

    PR/56695: Walter Lozano: Correct declaration of hook functions.

commit 657445084f6286f78fd3c3d9fe4aaea92b9cf0e3
Author: rillig <rillig@NetBSD.org>
Date:   Tue Feb 8 21:13:22 2022 +0000

    libedit: fix typos, apply KNF to newly imported code (PR/56693)
    
    No binary change.

commit 001f54a461b7a5fd60ad4e65f0c16b73708849b2
Author: christos <christos@NetBSD.org>
Date:   Tue Feb 8 15:05:10 2022 +0000

    PR/56693: Walter Lozano: Add support for rl_delete_text and rl_set_key

commit ea988183cfa08517a088c835838a3081fef66efa
Author: christos <christos@NetBSD.org>
Date:   Mon Jan 31 14:44:49 2022 +0000

    PR/56622: Walter Lozano: Improve readline compatibility by adding
    rl_readline_state support.

commit af918e051e5e2f24432cd1677159190c8d6932ec
Author: christos <christos@NetBSD.org>
Date:   Sat Jan 29 20:52:45 2022 +0000

    Add more refreshes from Walter Lozano. The readline example in
    http://www.mcld.co.uk/blog/2009/simple-gnu-readline-callback-style-example.html
    still does not work, but it is better.

commit daa505a92ee04ab5b27a294b7dbfe4ed3fc32252
Author: christos <christos@NetBSD.org>
Date:   Fri Jan 14 13:31:05 2022 +0000

    Don't use __printflike, use the explicit attribute so that this works outside
    NetBSD.

commit 27a90dcd8ac830d7858721200021eaadf4c8c9cf
Author: tnn <tnn@NetBSD.org>
Date:   Fri Jan 14 12:48:30 2022 +0000

    libedit: rl_message: annotate __printflike

commit b7e56637d9a71f2e6a757952c4a7460ddbfb08a4
Author: christos <christos@NetBSD.org>
Date:   Tue Jan 11 18:30:15 2022 +0000

    PR/56618: Walter Lozano: Improve libedit compatibility with readline by
    implementing:
    
        rl_copy_text, rl_erase_empty_line, rl_message, rl_on_new_line,
        rl_replace_line, rl_restore_prompt, rl_save_prompt

commit 02a0eff7c2e137de5d60dece62ae475b8fe1b40a
Author: christos <christos@NetBSD.org>
Date:   Sun Sep 26 13:45:54 2021 +0000

    make flag unsigned to match prototype of the function used

commit 5679adf8718f7a07c9d812de3b54ec0e14b4fc30
Author: christos <christos@NetBSD.org>
Date:   Sun Sep 26 13:45:37 2021 +0000

    - Completion should not add a quote at the end of the line to match an
      already quoted quote. (Piotr Stefaniak)
    - fix lint unconst warnings for strchr

commit b52ed195903a29472736858e342cb36706ae37a9
Author: rillig <rillig@NetBSD.org>
Date:   Fri Sep 10 18:51:36 2021 +0000

    libedit: fix indentation
    
    No change to the resulting object files.

commit 4fd19b1be2b9c4654edc8eb22f5b4df2d140d6f3
Author: christos <christos@NetBSD.org>
Date:   Fri Sep 10 13:33:45 2021 +0000

    Add an LLVM fuzzing wrapper for the portable libedit (Christian Holler)

commit 9b290a25b2d859769ad0726cea4bedcc82e282ae
Author: christos <christos@NetBSD.org>
Date:   Fri Sep 10 13:29:06 2021 +0000

    rl_startup_hook should be called each time. From Carlos Henrique Lima Melara

commit d6da975b023acab3d15f0fd7e819aface76dc9ed
Author: christos <christos@NetBSD.org>
Date:   Thu Sep 9 20:25:30 2021 +0000

    fix memory issues found by fuzzing (double frees and buffer overflows)

commit e2b95d2cb4ddada6b0363fa8da857ab2f52dd85b
Author: christos <christos@NetBSD.org>
Date:   Thu Sep 9 20:24:07 2021 +0000

    Add casts to appease conversions between wchar_t and wint_t

commit 472ef8cc3514af89447032e13e81d50a6413fa11
Author: christos <christos@NetBSD.org>
Date:   Fri Sep 3 12:20:38 2021 +0000

    Try to refactor this in order to correct some of the memory issues
    reported by Christian Holler.

commit 6f436dc7ead26e1eaa3d4e3919e2b0de50d3c42a
Author: christos <christos@NetBSD.org>
Date:   Mon Aug 30 09:18:17 2021 +0000

    Add a changes file

commit 152732a38508cfd0d28d272f5d593e4acd39c836
Author: christos <christos@NetBSD.org>
Date:   Sun Aug 29 09:41:59 2021 +0000

    ^W is traditionally bound to ed-delete-prev-word and not kill-region
    ^R is traditionally bound to em-inc-search-next and not redisplay
    This is what mksh, zsh bash, readline do (Baptiste Daroussin)

commit 6cac535e1778c7ad8537c11a918d674465c204ae
Author: christos <christos@NetBSD.org>
Date:   Sat Aug 28 17:17:47 2021 +0000

    Respect $EDITOR when execution one (Baptiste Daroussin)

commit 5b29c678702d6e9e8fde48eb9f638dcb4267c212
Author: christos <christos@NetBSD.org>
Date:   Sat Aug 21 12:38:56 2021 +0000

    PR/56370: mirabilos: libedit change from 2017 kills history in gdb

commit 7f1c6a0baeea409cf68c06980f4dfaec978da251
Author: christos <christos@NetBSD.org>
Date:   Sat Aug 21 12:34:59 2021 +0000

    Add more api to make gdb-11 happy (but not gdbtui as usual)

commit e1288720a993b29d52ebf2eae2a5cc5c1b658a92
Author: rillig <rillig@NetBSD.org>
Date:   Sun Aug 15 22:22:52 2021 +0000

    libedit: simplify calls to macro ADD_STRING
    
    The lint comments CONSTCOND and LINTED were not necessary.  It is
    simpler to just specify what to free.  GCC optimizes free(NULL) to be a
    no-op.
    
    No functional change.

commit b6c462026106e0b83ce30ab72488d07b61bed5e5
Author: rillig <rillig@NetBSD.org>
Date:   Sun Aug 15 22:14:45 2021 +0000

    readline: fix lint warning about effective unconst cast
    
    Calling strchr to avoid the syntactical unconst cast is not necessary
    here.  A simple pointer assignment is enough.
    
    No functional change.

commit 81d6c9b9d7c5b4d3da1e1b7c7914ba159b9edf97
Author: wiz <wiz@NetBSD.org>
Date:   Sun Aug 15 10:12:54 2021 +0000

    Add verb to sentence.

commit da69b70b9f70a6f659b19cf5a487eea5c605155b
Author: christos <christos@NetBSD.org>
Date:   Sun Aug 15 10:08:41 2021 +0000

    Disable attempts to handle EINTR and non-blocking I/O by default. It is
    confusing to other programs and unexpected behavior. Reported by Ingo Schwarze.
    This behavior is now controlled with EL_SAFEREAD.

commit c191adf61de11ce8a709b705906c0f28ea9362a9
Author: christos <christos@NetBSD.org>
Date:   Sun Aug 15 10:06:32 2021 +0000

    Add a LINTED comment... Why doesn't NOTREACHED work?

commit e16cbc3889f501a06e36aee905bd34dcc84c59dc
Author: andvar <andvar@NetBSD.org>
Date:   Sat Jul 31 20:51:32 2021 +0000

    s/dependend/dependent/

commit 5291651b6a06779d42ce3e28d74ea869c23eaf4a
Author: christos <christos@NetBSD.org>
Date:   Wed Jul 14 07:47:23 2021 +0000

    Via Jess Thrysoee, from Adrian Bunk: Fix libedit build on Linux/Alpha
    Alpha is the only Linux architecture that has SIGINFO:
        https://sources.debian.org/src/manpages/5.10-1/man7/signal.7/#L522
    
    But even on Alpha Ctrl-T is not supported, and therefore no VSTATUS:
        https://sources.debian.org/src/manpages/5.10-1/man3/termios.3/#L603-L608
    
    For consistency check both signal existence and character existence

commit 20fa0b90d9be2bfd6d6c00210533b8e344f4c01d
Author: christos <christos@NetBSD.org>
Date:   Wed May 5 14:49:59 2021 +0000

    PR/56147: Miroslav Lichvar: Avoid memory leak if strdup fails.

commit ba06fc1c94c393ebf16eb6383fa925834cdf2878
Author: christos <christos@NetBSD.org>
Date:   Sun Mar 28 13:39:39 2021 +0000

    Only unescape when we are quoting and don't add a space if we are quoting
    (we already did) (Piotr Stefaniak)

commit 1740d9142b0f81ad97cf7953b7ad0b20e31ca9fc
Author: christos <christos@NetBSD.org>
Date:   Sun Mar 28 13:38:10 2021 +0000

    document the flag

commit b94551931c564e5b203a1ca6c4532eda7eb33cfa
Author: christos <christos@NetBSD.org>
Date:   Sun Mar 28 13:33:54 2021 +0000

    Pass the unescaped filename the the append function so it has to do less work
    (for example it can call stat(2) directly (Piotr Stefaniak)

commit 65371df82950e543b8d36a507bdff64ee36d1dcc
Author: christos <christos@NetBSD.org>
Date:   Sat Mar 27 18:55:02 2021 +0000

    Add fn_complete2() that controls the quoting of the returned match.
    Before it was based on the heuristic that we were not supplied an
    attempted_completion_function, which worked well because programs
    that supplied that function were not shells and did not want/understand
    shell quoting. Recently though Piotr Stefaniak wanted to enhance command
    completion for the Bourne Shell and this could benefit quoting the returned
    command. This function adds an extra flags argument that controls that quoting.

commit 6953eca8c768a9583b9dbd0c53ccbcdeaaddc649
Author: christos <christos@NetBSD.org>
Date:   Fri Jul 10 20:34:24 2020 +0000

    Fix numeric variable handling in settc (lyzliyuzhi at 163 dot com)

commit 58b288d88db5b002994605c1f7ec9109b0416fc8
Author: christos <christos@NetBSD.org>
Date:   Sun May 31 23:24:23 2020 +0000

    use strlcpy() instead of strncpy() for gcc happiness

commit 3bf82836bfc1f0809b11de18cc2e44f33bd4b99b
Author: ryo <ryo@NetBSD.org>
Date:   Mon Mar 30 06:56:38 2020 +0000

    patbuf must be updated if the length of patbuf is greater than or equal to 0. (that is always)
    fix of r1.7 was incorrect.

commit 1148c4261d1e928d0f3e6cf63d0c17053a44c46b
Author: ryo <ryo@NetBSD.org>
Date:   Mon Mar 30 06:54:37 2020 +0000

    fix build error with SDEBUG, MAP_DEBUG, DEBUG_REFRESH

commit 2d114b3c146a7151b9f272a16b1bfe4e39978e28
Author: abhinav <abhinav@NetBSD.org>
Date:   Sun Jan 5 07:12:05 2020 +0000

    PR lib/54510 - when user supplied completion function is there,
    don't unescape the string to be completed.

commit 52de8937af22350f545009b9098df9dc9ac334e3
Author: tih <tih@NetBSD.org>
Date:   Sun Jan 5 00:03:27 2020 +0000

    Summary: Remove over-simplified extraneous test
    
    The file name matching code in libedit tries to adjust to the presence
    of explicit " or ' characters in the input line, but tries too hard.
    Remove a conditional that goes overboard, and causes the completion
    code to fail if a quoted string is seen before the filename to be
    expanded, as in
    
              grep 'foo' bar<TAB>
    
    Before this change, the above would not expand any possible
    completions, even if they existed, because it would choose to look for
    files whose names started with " bar".

commit 5e9cbb1173d379b89999b860a02ce825a2f2e10e
Author: christos <christos@NetBSD.org>
Date:   Tue Dec 10 19:42:09 2019 +0000

    When 'attempted_completion_function' non-NULL, with a 'single_match'
    match, the expected space is not being added. Problem observed with
    "chronyc" and "sqlite3" tab completion. That functionality got
    moved to escape_filename() for the !attempted_completion_function
    case, but the non-NULL 'attempted_completion_function' case must
    also be handled. (Lonnie Abelbeck)

commit b9ecc063aa43dee576feb07c573f99857d2ac0b0
Author: christos <christos@NetBSD.org>
Date:   Tue Nov 12 20:59:46 2019 +0000

    PR/54654: Soren Tempel: Make sure el_cursor.v < el_terminal.t_size.v when
    moving around.

commit de11d876419df3570c2418468613aebcebafe6ae
Author: mrg <mrg@NetBSD.org>
Date:   Sun Oct 13 07:28:04 2019 +0000

    introduce some common variables for use in GCC warning disables:
    
    GCC_NO_FORMAT_TRUNCATION    -Wno-format-truncation (GCC 7/8)
    GCC_NO_STRINGOP_TRUNCATION  -Wno-stringop-truncation (GCC 8)
    GCC_NO_STRINGOP_OVERFLOW    -Wno-stringop-overflow (GCC 8)
    GCC_NO_CAST_FUNCTION_TYPE   -Wno-cast-function-type (GCC 8)
    
    use these to turn off warnings for most GCC-8 complaints.  many
    of these are false positives, most of the real bugs are already
    commited, or are yet to come.
    
    
    we plan to introduce versions of (some?) of these that use the
    "-Wno-error=" form, which still displays the warnings but does
    not make it an error, and all of the above will be re-considered
    as either being "fix me" (warning still displayed) or "warning
    is wrong."

commit a47ebb18b3f2dabc22d001e05496d00a44656c2a
Author: christos <christos@NetBSD.org>
Date:   Wed Oct 9 14:31:07 2019 +0000

    add +1 to strlcpy's (Patrick Welche)

commit 3df2b626555bf1ecdf962834c3d20bbff256c71c
Author: christos <christos@NetBSD.org>
Date:   Tue Oct 8 19:21:40 2019 +0000

    remore error(1) comment

commit 991f62167bf451c9b51072fe3774388f257d8e0d
Author: christos <christos@NetBSD.org>
Date:   Tue Oct 8 19:17:57 2019 +0000

    Change strncpy to either memcpy (when we know the len), or strlcpy (when
    we used to NUL terminate explicitly.

commit a5a5a01f84eac420f0ca7cef187161e4f5b8b86f
Author: christos <christos@NetBSD.org>
Date:   Sun Sep 15 21:09:11 2019 +0000

    Fix type and remove cast (Yuichiro NAITO/FreeBSD).

commit c3d00a7d309653c77fafcb230c6ec61124cdf8e2
Author: abhinav <abhinav@NetBSD.org>
Date:   Sun Sep 8 05:50:58 2019 +0000

    PR lib/54510: Fix file completion inside quotes which broke in rev 1.53
    
    While there also fix handling character appending in the file completions when
    inside quotes. For example when inside a quote, if the completion is a directory then
    append a '/' but don't close the quote. On the other hand when inside a quote if the
    completion is a file name and it is the only match then we can close the quote.

commit a909d35bd1ac7c0151300d6be9fe4e2faf933914
Author: christos <christos@NetBSD.org>
Date:   Wed Aug 21 11:11:48 2019 +0000

    Increment offset when adding an element to history to keep it aligned with
    the last element entered (Sandy Li Changqing)

commit 272963ae080a28930e254bdea2035b57bf1bcb54
Author: christos <christos@NetBSD.org>
Date:   Sun Jul 28 09:27:29 2019 +0000

    PR/54415: Ricky Zhou: libedit stats completions for non-file completions
    Use the proper completion function and account for the character appended
    by the function when computing the number of columns.

commit 755b70304b8a049f8e8ae1bddb70e0a372a543f6
Author: christos <christos@NetBSD.org>
Date:   Tue Jul 23 13:10:11 2019 +0000

    remove stray brace

commit 585d8da98418ec1505904d916307644217f10d29
Author: christos <christos@NetBSD.org>
Date:   Tue Jul 23 10:19:35 2019 +0000

    put the NULL check immediately after the allocation

commit 113f06a345d1cde23e22e410536391a58c5a07fc
Author: christos <christos@NetBSD.org>
Date:   Tue Jul 23 10:18:52 2019 +0000

    PR/54399: Sören Tempel: Uninitialized memory access in libedit history.
    Initialize the buffer using calloc. While here change all malloc(a * sizeof(b))
    to calloc(a, sizeof(b)). XXX: should fix realloc similarly.

commit 38ee0c7eda006f36c6e8b0b2907861796e208d2c
Author: christos <christos@NetBSD.org>
Date:   Tue Jul 23 09:47:16 2019 +0000

    PR/54400: Sören Tempel: out-of-bounds read in libedit c_delbefore

commit ac94b724c0f0ada4b4b39d5908e72f26b5ae2cc9
Author: christos <christos@NetBSD.org>
Date:   Sun Jun 30 13:30:15 2019 +0000

    Add a comment explaining why we don't use DO here. Correct the attribution
    on the previous patch: The patch was from Jordan Lewis and the report from
    Raphael Poss.

commit 0d31660187b635d219b48bf89a7691f8cb37e1ac
Author: christos <christos@NetBSD.org>
Date:   Sat Jun 29 21:35:09 2019 +0000

    PR/54329: Raphael Ross: According to https://www.gnu.org/software/termutils/\
    manual/termcap-1.3/html_chapter/termcap_4.html#SEC23 the cursor move multiple
    escapes have undefined results when moving out of the screen. Stop using DO
    to move down multiple lines and use a loop of newlines instead.

commit 037284caf7a50fe03d6760101fe7f8c5d4612dfb
Author: christos <christos@NetBSD.org>
Date:   Fri Jun 7 15:21:48 2019 +0000

    PR/54281: Jonathan Perkins: NUL terminate rl_line_buffer on modification
    to avoid completion leak.

commit 72dd3db6623c12cd9f892c0f54f3494f59f9a8cf
Author: christos <christos@NetBSD.org>
Date:   Fri Jun 7 15:19:29 2019 +0000

    PR/54280: rl_completer_quote_characters should be const for readline compat

commit b8c4664f83f77527f3b5a9c26424df197a0b47f0
Author: christos <christos@NetBSD.org>
Date:   Fri Jun 7 15:18:20 2019 +0000

    PR/54279: Jonathan Perkins: Ignore adjacent start/end prompt ignore.

commit ef72f68d26e3c31b0d669041dc08d8e2d458d0b4
Author: christos <christos@NetBSD.org>
Date:   Fri Apr 26 16:56:57 2019 +0000

    Follow the man page for EL_GETTC and not require a NULL terminated argument
    list: https://reviews.llvm.org/D61191

commit 63147cb59ccc72ffa76bfc42685991b9d3bd558a
Author: abhinav <abhinav@NetBSD.org>
Date:   Sat Apr 20 08:44:10 2019 +0000

    PR lib/54131 - declare the loop variable outside the for loop

commit 2f37aad7a20cf377a3a1cc1ebaef7ecae8a223aa
Author: christos <christos@NetBSD.org>
Date:   Fri Apr 12 17:30:49 2019 +0000

    PR/52359: Benjamin Lorenz: When resizing because of a signal save and restore
    the cursor position, since it does not change.

commit 7512edc245c99ae1e6330576f700237d2e7bd4fb
Author: christos <christos@NetBSD.org>
Date:   Fri Apr 12 15:12:29 2019 +0000

    PR/54117: Paavo Helde: Fix memory overrun: Account for the closing quote
    in memory allocation if quoted.

commit c93cba3ab290b299b804587b4694f60dbd8a38c1
Author: abhinav <abhinav@NetBSD.org>
Date:   Sun Mar 31 03:04:57 2019 +0000

    Perform quoting of filename completions when there are multiple matches as well
    
    Quoting of special characters in filename completion was implemented for single match
    case, this enables it for multiple matches as well. For example:
    
    $ touch 'foo bar'
    $ touch 'foo baz'
    $ ls fo<TAB>
    autocompletes to =>
    $ ls foo\ ba
    hitting <TAB> again shows:
    foo bar foo baz
    
    This required unescaping escape sequences generated during last completion
    in order to find the word to complete.
    
    While there, also update the test to include cases for multiple matches.
    
    Reviewed by christos

commit e09538bda2f805200d0f7ae09fb9b7f2f5ed75f2
Author: abhinav <abhinav@NetBSD.org>
Date:   Sun Mar 24 16:42:49 2019 +0000

    Only quote the completion matches if we are doing filename completion
    
    If the user supplies a value for the attempted_completion_function parameter
    then we cannot be sure if the completion is for filename or something else, in such
    a case don't attempt to quote the completion matches.
    
    Reviewed by christos
    
    This should address PR lib/54067

commit 52b10dfde00572617875558243bbb9bd4c22cc16
Author: christos <christos@NetBSD.org>
Date:   Fri Feb 15 23:20:35 2019 +0000

    PR/53983: Jonathan Perkins: Fix types for readline compatibility

commit ccbb6255be840d37e188f7969ac491269b22bfda
Author: christos <christos@NetBSD.org>
Date:   Thu Feb 14 20:09:12 2019 +0000

    PR/53981: Jonathan Perkins: history_list should null-terminate

commit 11e9eb638e5958a72eb043f4361ecd2f1ca34741
Author: christos <christos@NetBSD.org>
Date:   Thu Jan 10 18:41:56 2019 +0000

    PR/53856: F. Aragon: editline/libedit not prompting colors in readline mode

commit 13b962ac1e293850a2e42262b0e020f0f9e7f183
Author: uwe <uwe@NetBSD.org>
Date:   Fri Jan 4 03:03:44 2019 +0000

    Fix mis-applied change in previous.  Don't increment r_oldcv twice.
    PR lib/53803

commit 85390d73157375f2d0edc53c0f2736deee3034c9
Author: christos <christos@NetBSD.org>
Date:   Sun Dec 2 16:58:13 2018 +0000

    Add a couple more readline compat functions.

commit f04c2e3e347331770365a30cf4fec3f60ffedbd3
Author: christos <christos@NetBSD.org>
Date:   Thu Nov 29 03:10:20 2018 +0000

    Fix off by one <tsahara at iij>

commit e9933f923a16d4efade48f0638106cf3c12a5b7a
Author: christos <christos@NetBSD.org>
Date:   Sun Nov 25 16:21:04 2018 +0000

    From Yuichiro Naito (FreeBSD):
    
    hrs@ says that
    (cbp >= MB_LEN_MAX) condition is necessary for checking invalid
    byte sequences.  If malicious input was given, libedit would read
    byte sequences forever.

commit 2cb4fa4296e2e315f28fb08c4e0d50d3682da395
Author: christos <christos@NetBSD.org>
Date:   Sun Nov 25 16:20:28 2018 +0000

    From Yuichiro Naito (FreeBSD):
    hrs@ says that wctomb(3) has an internal shift state,
    if wctomb(3) is called outside of libedit,
    the internal state can be changed and causes miscalculate multibyte size.
    
    So in this part, wcrtomb(3) should be used.
    wcrtomb(3) requires that shift state is given in the argument.
    We always initialize the shift state in ct_enc_width() to keep independent
    from outside of libedit.

commit e06500e20d425ca8066ce423ee6fe209a2e1d5f0
Author: christos <christos@NetBSD.org>
Date:   Sat Nov 24 12:17:35 2018 +0000

    PR/53682: Jordan Lewis: use newlines instead of padded spaces when restoring
    multi-line histories.

commit e91c30539f226708519af5f6a1b55781cccb5055
Author: christos <christos@NetBSD.org>
Date:   Sun Nov 18 17:15:41 2018 +0000

    fix compilation

commit 18bb6ea433a3041eb729422dcd2c4e8d8f3e4fad
Author: christos <christos@NetBSD.org>
Date:   Sun Nov 18 17:09:39 2018 +0000

    Remove utf-8 requirement (Yuichiro NAITO)

commit b15150dc5e0a935bd603029cf5dac242f7030845
Author: christos <christos@NetBSD.org>
Date:   Tue Oct 23 16:49:13 2018 +0000

    Apply revisions 1.21, 1.22 from OpenBSD:
    
    In re_fastputc(), set lastline to the new line, not the previous
    line so it gets initialized properly.  Fixes a crash in bc with
    MALLOC_OPTIONS=UJ.  OK deraadt@, committing on behalf of yasuoka@
    
    Initialize "old" screen buffer lines before use; otherwise, they would
    never get NUL-terminated and cause read buffer overruns.
    This fixes for example segfaults in sftp(1) that could be triggered
    by typing in an extremely long string (more than one line - the longer,
    the likelier to crash), then hitting backspace once.
    Problem reported and patch OK'ed by sthen@.
    
    XXX: pullup-8

commit b8b0289d66afdab55f4c20125bc3f802735710f9
Author: kre <kre@NetBSD.org>
Date:   Thu Sep 13 09:03:40 2018 +0000

    Fix editing mistake, remove ) from func call that is now gone.

commit 26f83385d3992fffbff4b2c6f0a33ba0017b0940
Author: christos <christos@NetBSD.org>
Date:   Thu Sep 13 01:26:33 2018 +0000

    more efficient to use decode_result :-) Pointed out by kre@

commit 6da79ee0967ab895aa757667055e5fd967f305b4
Author: christos <christos@NetBSD.org>
Date:   Wed Sep 12 22:10:35 2018 +0000

    PR/53597: Yasuhiro Horimoto: Avoid segmentation fault in bad history file.

commit a3c16b554966b44354b8f837e8c8cc68882a4f3d
Author: christos <christos@NetBSD.org>
Date:   Sat Jun 9 17:41:55 2018 +0000

    Provide more compatibility with readline headers; now python-3.6.5 works
    when changing 'readline' -> 'edit' in setup.py.
    Revert previous conditional setting of unbuffered.

commit 01f10711d42321c15727f6714d9d37ff48371c3c
Author: christos <christos@NetBSD.org>
Date:   Fri May 4 20:38:26 2018 +0000

    fix uninitialized

commit 2afc179c8f7485750f9aa57388f44af2b7c1f2b0
Author: abhinav <abhinav@NetBSD.org>
Date:   Fri May 4 16:39:14 2018 +0000

    Handle filename autocompletion when the cursor is at a backslash or quote character
    
    For example, handle following case:
            $ touch 'foo bar'
            $ ls foo\<TAB> --> $ ls foo\ bar
    
    Also add test cases for this.
    
    Thanks to Christos for review

commit b36e4c8fbff9af2ca32e29d401ced177913cf185
Author: abhinav <abhinav@NetBSD.org>
Date:   Wed May 2 08:45:03 2018 +0000

    Add '*' and '[' to the list of characters which need escaping during autocompletion

commit 7767204c9379252102230b3399929b06c0286750
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 26 17:36:14 2018 +0000

    PR/53058: Nikhil Benesch: use correctly typed variables (wchar_t vs wint_t)
    as parameters.

commit ff1a7c8cc801fc17cd435f96129e3e328190be52
Author: christos <christos@NetBSD.org>
Date:   Mon Jan 1 22:32:46 2018 +0000

    Only FLUSH if we are ending libedit; DRAIN if we suspend for readline.
    This allows pasting multiline buffers (Gerry Swislow)

commit ec59efb2b58f02956002c9ced55f30225c78a51d
Author: uwe <uwe@NetBSD.org>
Date:   Sat Dec 23 18:25:03 2017 +0000

    The order in which the arguments to a function are evaluated is
    undefined, so don't use va_arg() twice.
    
    PR lib/52849

commit 47abce8f3f9f61ff72bbe46abb2ec93928ed7dd3
Author: christos <christos@NetBSD.org>
Date:   Fri Dec 8 16:56:23 2017 +0000

    For applications that don't issue their own prompt (like python)
    don't set unbuffered unless they've already printed the prompt.
    This avoids printing the prompt before the application has a chance
    to process the input line.
    From sjg@

commit 3c9fe72fbc3269296d7d17c5ca60ce148e0413c4
Author: abhinav <abhinav@NetBSD.org>
Date:   Fri Oct 27 18:16:09 2017 +0000

    Add NULL check after doing memory allocation at a couple of places
    
    ok christos@

commit 92a9b5c3bac63b911546df02b49a073893e84d1c
Author: abhinav <abhinav@NetBSD.org>
Date:   Sun Oct 15 19:17:30 2017 +0000

    Add copyright and rcs header to the test program.
    Also, remove a test case which was not supposed to be there.
    (While that test case works with the changes I committed, testing that
     test case with the test program is not possible in its current form. I'm
     working on that.)

commit fa61555626223470c8dbfb8c03fc8b698d172998
Author: abhinav <abhinav@NetBSD.org>
Date:   Sun Oct 15 18:59:00 2017 +0000

    Add support for escaping special characters when doing filename completion.
    
    For instance if the file name is "foo bar":
    $ ls foo<TAB>
    should get autocompleted to:
    $ ls foo\ bar
    
    Works for similar other characters too, which need escaping.
    
    Also, add an accompanying test program to ensure the escaping is correct
    in various scenarios (within quotes, without quotes, with other special characeters)
    
    Thanks to Christos for reviews, help and feedback.

commit cf2b6f694ee566673c07cc599436573439a07d6a
Author: abhinav <abhinav@NetBSD.org>
Date:   Wed Oct 11 06:49:03 2017 +0000

    Fix typo in comment

commit 5312bfd48dd8a216f816d2209fcdae118249d240
Author: kre <kre@NetBSD.org>
Date:   Sun Sep 17 08:10:08 2017 +0000

    PR lib/52547 - read_history (readline.c) should now sets history_length.
    
    Patch from Yen Chi Hsuan in the PR, extracted from Apple's version of
    readline.c, then modified by me to be consistent about what the return
    value really is.

commit 7a99333ffa779c25a18aa9d4cbd631aab5be2c9a
Author: abhinav <abhinav@NetBSD.org>
Date:   Sat Sep 16 20:40:34 2017 +0000

    Fix indentation (convert spaces to tab)

commit b2ad969a138f04c20eb7bc286e0efd3dd470620f
Author: christos <christos@NetBSD.org>
Date:   Tue Sep 5 18:07:59 2017 +0000

    For readline emulation, don't reset the tty to "sane" (cooked) mode if we
    did not start this way. Also set and reset the tty on entry and exit from
    readline() since this is what readline does.

commit 3e39477b0af79a637418e6a8f22b880f13313e1a
Author: wiz <wiz@NetBSD.org>
Date:   Sat Sep 2 06:48:10 2017 +0000

    Remove trailing whitespace; convert Xr readline to Nm readline, since
    we won't get a readline man page in base.

commit 27916d7c22e2f3e79cf330f41dd34f060334209b
Author: christos <christos@NetBSD.org>
Date:   Fri Sep 1 10:19:10 2017 +0000

    PR/51517: Jay West: Tty settings not restored on exit
    PR/51518: Jay West: prompt is interleaved with client output
    
    Both these issues are caused by rl_restore_handler not DTRT; fix
    it so that it kills the internal libedit state completely. This is
    inefficient, but it works.
    
    Also fix:
    1. add append_history()/H_NSAVE_FP
    2. call the rl_startup_hook before printing the first prompt as documented.
       callint it from rl_initialize breaks python, because the callback ends
       up being invoked before the readline module is installed, and we end up
       dereferencing a NULL pointer.
    3. add el_resize_terminal.
    
    With those changes, s/lreadline/ledit/g in python works.

commit 01869ca4d24a86379a68731bf9706a9f0820fe4e
Author: wiz <wiz@NetBSD.org>
Date:   Mon Jul 3 21:28:48 2017 +0000

    Remove workaround for ancient HTML generation code.

commit e3112e6cea44376042d3c584ac999c44fd85e6c9
Author: kre <kre@NetBSD.org>
Date:   Fri Jun 30 20:26:52 2017 +0000

    Allow wide characters (properly encoded as byte strings according to LC_CTYPE)
    to be (perhaps part of) the "invisible" characters in a prompt, or the
    required prompt character which follows the literal sequence (this character
    must be one with a printing column width >= 1).  The literal indicator
    character (which is just a marker, and not printed anywhere) (the PSlit
    parameter in sh(1)) can also be a wide char (passed to libedit as a wchar_t,
    encoded as that by sh(1) or other applications that support this.)
    
    Note: this has currently only been tested with everything ascii (C locale).

commit 2977f4314f7f9bb553c0417de35c2c9d3f4066b0
Author: kre <kre@NetBSD.org>
Date:   Thu Jun 29 02:54:40 2017 +0000

    Fix an obvious, but almost invisible typo (avoid some core dumps).

commit f51c99da13fac382d5518d6bab53cc363c7e124b
Author: christos <christos@NetBSD.org>
Date:   Tue Jun 27 23:29:12 2017 +0000

    fix comment

commit 9abf018ddabce38ad1f34d115689cc80aa6fa08b
Author: christos <christos@NetBSD.org>
Date:   Tue Jun 27 23:25:13 2017 +0000

    add literal escape sequence support, patterned after the tcsh ones.

commit bec29a0714c46e375da1c08f19414ee7b4bcab63
Author: christos <christos@NetBSD.org>
Date:   Tue Jun 27 23:24:19 2017 +0000

    remove unused variable

commit 3d09ba7b3fcf890343ab6808809005d27eaee54f
Author: christos <christos@NetBSD.org>
Date:   Tue Jun 27 23:23:48 2017 +0000

    - add literal sequence handling.

commit 06d596a8e9a3a24c31a0733d8296171776dd04e6
Author: christos <christos@NetBSD.org>
Date:   Tue Jun 27 23:23:09 2017 +0000

    - handle literal escape sequence printing.
    - factor out common code in allocation and freeing of the display.

commit 0a321818f6db71e95a54865ab5011027369e68b7
Author: christos <christos@NetBSD.org>
Date:   Tue Jun 27 23:22:20 2017 +0000

    mention the limitation of the literal sequence delimiter.

commit 00f36e26a65b2e57671a599ec8d6e8f9429aa7f1
Author: kre <kre@NetBSD.org>
Date:   Tue Jun 27 01:22:58 2017 +0000

    Include EDITRC in doc.

commit 4fa1b5993a39798c0e135abb941acc6f6158d54b
Author: kre <kre@NetBSD.org>
Date:   Tue Jun 27 00:47:37 2017 +0000

    Make the default editrc file be $EDITRC (from env) if set, falling back
    to $HOME/.editrc otherwise.    Better support for this in sh coming.

commit c74ab69c28cbe19f79a0f643c1131675d046720c
Author: christos <christos@NetBSD.org>
Date:   Mon May 22 19:16:25 2017 +0000

    Add DragonFly.

commit 3a89c5769a22ae33f7b1c202941a6e88acc24578
Author: abhinav <abhinav@NetBSD.org>
Date:   Fri Apr 21 05:38:03 2017 +0000

    When doing filename autocompletion, append a trailing slash at the end of directory
    names. We already do this when there is only one completion option but
    in case of of multiple completion options, it wasn't being done.
    
    ok christos@

commit c626d04131f7161ca19c60928c3a9a58cf2733e6
Author: abhinav <abhinav@NetBSD.org>
Date:   Mon Apr 10 15:02:40 2017 +0000

    Add missing argument for H_SET.
    
    ok christos@

commit 3bea32ca4f3fabcc4bcdbe68bc1fde0bbb159b15
Author: christos <christos@NetBSD.org>
Date:   Sun Mar 5 19:23:58 2017 +0000

    one extra char for NUL.

commit bd242e1e3e9eda276a6864d9f32ab642cf1ea249
Author: christos <christos@NetBSD.org>
Date:   Sun Mar 5 17:30:38 2017 +0000

    Grow the buffer for event search if there was not enough space.
    From Gerry Swislow

commit 1ec9eafabcea93d383d1fe2a369d04edeb2f0326
Author: christos <christos@NetBSD.org>
Date:   Mon Jan 9 03:09:05 2017 +0000

    Make sure we take into account history_base when computing negative history
    offsets. (Gerry Swinslow)

commit 4937de3b478007317d0c841684c66e58fec34eff
Author: christos <christos@NetBSD.org>
Date:   Mon Jan 9 02:54:18 2017 +0000

    Make sure that argv is NULL terminated since functions like tty_stty rely
    on it to be so (Gerry Swinslow)

commit 3d8a0ad9b363752dcb7aa64b863df215bcd840d9
Author: christos <christos@NetBSD.org>
Date:   Sun Dec 11 15:47:06 2016 +0000

    PR/51706: Amir Plivatsky: Fix memory leak

commit f09a36d8a1c94f801ff97bc9a8ecdaf64a78747d
Author: christos <christos@NetBSD.org>
Date:   Mon Nov 7 15:30:18 2016 +0000

    Change the way the built-in history works; some programs enter history
    with the trailing newline, others don't so don't make any assumptions
    about it when printing. Also print the correct event number (generated),
    separate the event number from the event with a tab, and visually encode
    the string (don't encode tabs and spaces though).

commit 0551ffcf66eea7ab58565c5f4e011a3a5f55a5bc
Author: abhinav <abhinav@NetBSD.org>
Date:   Mon Oct 31 17:46:32 2016 +0000

    Fix file name auto completion in one specific case.
    
    For example if you do
    $mkdir -p /tmp/dir1/dir2
    
    Then:
    $ls /tmp/di <TAB> auto completes to
    $ls /tmp/dir1/
    
    Hitting <TAB> again auto completes to
    $ls /tmp/dir1/dir2
    
    Whereas it should auto complete to
    $ls /tmp/dir1/dir2/
    
    
    Essentially, in cases like above where you have to hit <TAB> twice to get
    to the match and there is only one match (because only one file/sub-directory) then
    auto complete doesn't work correctly. It doesn't append a trailing slash (in case
    of directory) or a space (in case of a file) to the match name.
    
    I have tested file name completion in sh(1) and symbol completion in gdb after
    this change.

commit 931e76f255e2d7d1b44ad516ea81d69f29b9892f
Author: christos <christos@NetBSD.org>
Date:   Fri Oct 28 18:32:35 2016 +0000

    export rl_done

commit 1a4590725baa1b7a56cd54e1fcb70f249d1be715
Author: christos <christos@NetBSD.org>
Date:   Fri Oct 28 18:32:26 2016 +0000

    pass the stream to the getc function

commit fc37f15ca1d3e1ca9f426a5d5fb4fdda41c4e6b8
Author: mbalmer <mbalmer@NetBSD.org>
Date:   Thu Sep 1 13:23:44 2016 +0000

    fix typo

commit 78abb1b97ea9d2abf703852075d862018d723dfb
Author: christos <christos@NetBSD.org>
Date:   Wed Aug 24 13:10:59 2016 +0000

    more compatible with readline history functions.

commit d764cbd394d6055605b19b33c7586ccdc0838c67
Author: christos <christos@NetBSD.org>
Date:   Thu Jun 2 21:40:51 2016 +0000

    Fix previous to better match readline behavior (Ingo Schwarze)

commit 956883ecd72dbbdb821eef239b3c23bff4e9e38e
Author: christos <christos@NetBSD.org>
Date:   Thu Jun 2 15:11:18 2016 +0000

    From Ingo Schwarze:
    
    In libedit, the only way how H_ENTER can fail is memory exhaustion,
    too, and of course it is handled gracefully, returning -1 from
    history().  So of course, we will continue to handle it gracefully
    in add_history() as well, but we are free to decide what to do with
    the library state in this case because GNU just dies...
    
    I think the most reasonable course of action is to simply not change
    the library state in any way when add_history() fails due to memory
    exhaustion, but just return.
    
    If H_ENTER does not fail, we know that the history now contains at
    least one entry, so there is no need any longer to check the H_GETSIZE
    return value.  And we can of course always set current_history_valid.
    
    While testing these changes, i noticed three problems so closely
    related that i'd like to fix them in the same diff.
    
     1. libedit has the wrong prototype for add_history().
        GNU readline-6.3 defines it as void add_history(const char *).
        Of course, that is very stupid - no way to report problems to
        the caller!  But the whole point of a compatibility mode is
        being compatible, so we should ultimately change this.
        Of course, changing the prototype of a public symbol requires
        a libedit major bump.  I don't want to do that casually.
        Rather, i will take a note and change the prototype the next
        time we need a libedit major bump for more important reasons.
        For now, let's just always return 0.
    
     2. While *implicitely* pushing an old entry off the history
        increments history_base in GNU readline, testing reveals that
        *explicitly* deleting one does not.  Again, this is not
        documented, but it applies to both remove_history() and
        stifle_history().  So delete history_base manipulation
        from stifle_history(), which also allows to simplify the
        code and delete two automatic variables.
    
     3. GNU readline add_history(NULL) crashes with a segfault.
        There is nothing wrong with having a public interface
        behave that way.  Many standard interfaces do, including
        strlen(3).  Such crashes can even be useful to catch
        buggy application programs.
        In libedit/readline.c rev. 1.104, Christos made add_history()
        silently ignore this coding error, according to the commit
        message to hide a bug in nslookup(1).  That change was never
        merged to OpenBSD.  I strongly disagree with this change.
        If nslookup(1) is still broken, that program needs to be
        fixed instead.  In any case, delete the bogus check; hiding
        bugs is dangerous.

commit 94b4dd721ed84b3935eff4e6881422775cc7c554
Author: christos <christos@NetBSD.org>
Date:   Tue May 31 19:25:17 2016 +0000

    remove the right history entry (Ingo Schwarze)

commit d8509bf6e25336cff19c8cbee841db85a4ab7569
Author: christos <christos@NetBSD.org>
Date:   Wed May 25 13:01:11 2016 +0000

    abstract read code to a single function (Ingo Schwarze)

commit fa7ab2f97a78f62361066cdc130f33df4dd988b9
Author: christos <christos@NetBSD.org>
Date:   Tue May 24 19:31:27 2016 +0000

    el_map.alt can't be NULL here (Ingo Schwarze)

commit 6eacc2dbd26cc507db3817f46f4d96645ad42e5b
Author: christos <christos@NetBSD.org>
Date:   Tue May 24 17:42:54 2016 +0000

    remove debug read (Ingo Schwarze)

commit 0a374fd7e57febef123a4854065ea6853bb0ae9a
Author: christos <christos@NetBSD.org>
Date:   Tue May 24 15:00:45 2016 +0000

    From Ingo Schwarze:
    
    Reduce obfuscation of errno handling. There is only one purpose
    non-local errno handling is needed for:  Inside el_wgets(), several
    functions call down indirectly to el_wgetc(), many of them via the
    dispatch table.  When el_wgetc() fails, it does properly report
    failure, but then various cleanup is done which may clobber errno.
    But when returning due to failure, el_wgets() wants to have errno
    set to the reason of the original read failure, not to the reason
    of some subsequent failure of some cleanup operation.  So el_wgetc()
    needs to save errno, and if it's non-zero, el_wgets() needs to
    restore it on failure.
    
    This core logic is currently obscured by the fact that el_errno
    is set and inspected at some additional places where it isn't needed.
    Besides, since el_wgetc() and and el_wgets() are both in read.c,
    el_errno does not need to be in struct editline, it can and should
    be local to read.c in struct el_read_t.
    
    Let's look at what can be simplified.
    
     1. keymacro_get() abuses el_errno instead of having a proper
        error return code.  Adding that error return code is easy
        because node_trav() already detects the condition and an
        adequate code is already defined.  Returning it, testing
        for it in read_getcmd(), and returning with error from there
        removes the need to inspect el_errno from el_wgets() after
        calling read_getcmd().
        Note that resetting lastchar and cursor and clearing buffer[0]
        is irrelevant.  The code returns from el_wgets() right afterwards.
        Outside el_wgets(), these variables are no longer relevant.
        When el_wgets() is called the next time, it will call ch_reset()
        anyway, resetting the two pointers.  And as long as lastchar
        points to the beginning of the buffer, the contents of the
        buffer won't be used for anything.
    
     2. read_getcmd() doesn't need to set el_errno again after el_wgetc()
        failure since el_wgetc() already did so.  While here, remove
        the silly "if EOF or error" comments from the el_wgetc()
        return value tests.  It's a public interface documented in a
        manual, so people working on the implementation can obviously
        be expected to know how it works.  It's a case of
    
          count++;  /* Increment count. */
    
     3. In the two code paths of el_wgets() that lead up to "goto noedit",
        there is no need to save the errno because nothing that might
        change it happens before returning.
    
    For clarity, since el_wgets() is the function restoring the errno,
    also move initializing it to the same function.
    
    Finally, note that restoring errno when the saved value is zero is
    wrong.  No library code is ever allowed to clear a previously set
    value of errno.  Only application programs are allowed to do that,
    and even they usually don't need to do so, except when using certain
    ill-designed interfaces like strtol(3).
    
    I tested that the behaviour remains sane in the following cases,
    all during execution of el_wgets(3) and with a signal handler
    for USR1 installed without SA_RESTART.
    
     * Enter some text and maybe move around a bit.
       Then send a USR1 signal.
       The signal gets processed, then read_char() resumes reading.
       Send another USR1 signal.
       Now el_wgets() sets errno=EINTR and returns -1.
    
     * Press Ctrl-V to activate ed-quoted-insert.
       Then send a USR1 signal.
       The signal gets processed, then read_char() resumes reading.
       Send another USR1 signal.
       ed_quoted_insert() returns ed_end_of_file(), i.e. CC_EOF,
       and el_wgets() returns 0.
    
     * Press a key starting a keyboard macro.
       Then send a USR1 signal.
       The signal gets processed, then read_char() resumes reading.
       Send another USR1 signal.
       Now el_wgets() sets errno=EINTR and returns -1.
    
     * Press : to enter builtin command mode.
       Start typing a command.
       Then send a USR1 signal.
       The signal gets processed, then read_char() resumes reading.
       Send another USR1 signal.
       Now c_gets() returns -1, ed_command() beeps and returns CC_REFRESH,
       and el_wgets() resumes operation as it should.
    
    I also tested with "el_set(el, EL_EDITMODE, 0)", and it returns
    the right value and sets errno correctly.

commit 16467be6f9d7fb8f13b6a921da3e2da20ed81744
Author: christos <christos@NetBSD.org>
Date:   Sun May 22 23:54:20 2016 +0000

    documentation improvements (Ingo Schwarze)

commit bb64d9f1ced66a660699c8c7493fa13eff478293
Author: christos <christos@NetBSD.org>
Date:   Sun May 22 19:44:26 2016 +0000

    Stop the read module from poking the el_chared.c_macro data structure
    currently belonging to the chared module.  The read module does so
    from three of its functions, while no other module uses the macro
    data, not even the chared module itself.  That's quite logical
    because macros are a feature of input handling, all of which is
    done by the read module, and none by the chared module.  So move
    the data into the read modules's own opaque data structure, struct
    el_read_t.
    
    That simplifies internal interfaces in several respects: The
    semi-public chared.h has one fewer struct, one fewer #define, and
    one fewer member in struct el_chared_t; all three move to one single
    C file, read.c, and are now module-local.  And the internal interface
    function ch_reset() needs one fewer argument, making the code of many
    functions in various modules more readable.
    
    The price is one additional internal interface function, read_end(),
    10 lines long including comments, called publicly from exactly one
    place: el_end() in el.c.  That's hardly an increase in complexity
    since most other modules already have their *_end() function, read.c
    was the odd one out not having one.
    
    From Ingo Schwarze

commit e9c2e28b8ae8eff4602a4702874f4090ed48d0d0
Author: christos <christos@NetBSD.org>
Date:   Sat May 21 17:06:44 2016 +0000

    Fix the prototype used by EL_GETCFN, mention the associated typedef
    name, document the return values, expand the list of affected
    functions, warn against using EL_GETCFN, and clarify some wording
    and notation. (Ingo Schwarze)

commit 4b3392da819628a0b138709c7c45121af662e5b5
Author: christos <christos@NetBSD.org>
Date:   Fri May 13 15:55:59 2016 +0000

    From Bastian Maerkisch, via Igno Schwarze:
    
    Even though section "2.3.3 Information About the History List"
    of the history(3) info(1) manual only says
    
      -- Function: int where_history (void)
         Returns the offset of the current history element.
    
    which maybe isn't completely clear, a plausible implementation
    is that the offset returned is the same offset that can be used
    for history_set_pos(), i.e. that it is 0 for the oldest entry
    and increases with time, and that's how the GNU implementation
    behaves indeed.
    
    The libedit implementation, on the other hand, returns 1 for the
    newest entry and increases going back in time.

commit a2d6b270ec11be297c154da1d16ab6218f048c27
Author: christos <christos@NetBSD.org>
Date:   Mon May 9 21:46:56 2016 +0000

    s/protected/libedit_private/g

commit 137ae6aea45402062a59a1bcc1c08ac387e95e08
Author: christos <christos@NetBSD.org>
Date:   Mon May 9 21:38:27 2016 +0000

    Instead of compiling all the source files together in one big file, use
    protected visibility to achieve the same effect.

commit ecb8efd1728b06533f86e56f82eb615c1c7defd6
Author: christos <christos@NetBSD.org>
Date:   Mon May 9 21:37:34 2016 +0000

    Elide gcc warning about intermediate const casts caused by visibility change.

commit f9ed317e876448e7ecee5ed723af48806f79fcf5
Author: christos <christos@NetBSD.org>
Date:   Mon May 9 21:27:55 2016 +0000

    GNU readline(3) regards history chronologically, that is, from the
    perspective of the dawn of time, so "next" means "newer" and "previous"
    means "older".  Libedit, by contrast, uses reverse chronology and
    regards history from the perspective of the present, such that "next"
    means "longer ago" and "previous" means "not so long ago".
    
    The following patch fixes previous_history() and next_history()
    as proposed by Bastian Maerkisch.
    
    But there is a related problem demonstrated by Bastian's regression
    tests that his patch did not fix:  next_history() can advance not
    only to the newest entry, but beyond it, which core libedit cannot
    do.  So that feature must be implemented locally in readline.c.
    
    With that, the last of Bastians tests is fixed, test_movement_direction().
    
    This patch also improves libedit documentation to more clearly state
    what "previous" and "next" mean.  GNU readline documentation is
    just as unclear, but we can't easily fix that since libedit doesn't
    include its own readline.3 manual.
    
    (Ingo Schwarze)

commit 05b61ce72aa6d9a3bc2f086c57613492f6dcc015
Author: christos <christos@NetBSD.org>
Date:   Mon May 9 21:25:11 2016 +0000

    The libedit implementation of history_get() also differs from the GNU
    implementation:  libedit goes to the entry with the given number
    stored in the HistEvent structure, while GNU subtracts history_base,
    then advances that many entries from the oldest one.  If entries were
    removed in between, GNU advances further than libedit.
    
    The call sequence H_CURR, H_DELDATA, H_CURR, H_NEXT_EVDATA looks
    weird, as if part of that must somehow be redundant.  But actually,
    the user interface is so counter-intuitive that every single step
    is really required.
    
     - The first H_CURR is needed to be able to go back after an error.
     - The H_DELDATA is needed to move the cursor.  Even though it takes
       a pointer to ev, that structure is not filled in when the call
       succeeds.  H_DELDATA only moves the cursor, it doesn't tell us
       the new event number.
     - Consequently, the second H_CURR is required to get ev.num filled
       in.  But it doesn't return the data because ev has no field for
       that.
     - So even though the cursor is already positioned correctly,
       H_NEXT_EVDATA is needed as the final step merely to get the data.
    
    (Ingo Schwarze)

commit c3337d4460b67e802e0556b7c5e5de2b6a6ae98a
Author: christos <christos@NetBSD.org>
Date:   Sun May 8 20:15:00 2016 +0000

    In stiffle_history(), trim excessive entries from the history and advance
    history_base like the GNU implementation does. (from Bastian Maerkisch)

commit 7033ecf0e8eba4feb0ec2bd16ba4e08f950e5ccf
Author: christos <christos@NetBSD.org>
Date:   Fri May 6 21:01:19 2016 +0000

    fix logic (Ingo Schwarze)

commit 300e2ca4732f2946de5ddce73b7d3e7ac7516613
Author: christos <christos@NetBSD.org>
Date:   Mon May 2 16:48:34 2016 +0000

    eliminate static buffer with custom resizing code.

commit 9ff2bfe4913c8e17b3c970c4a674036dcb05fb4b
Author: christos <christos@NetBSD.org>
Date:   Mon May 2 16:35:17 2016 +0000

    fix typos from Pedro Giffuni @FreeBSD

commit 7c1df7604566251aea8afc04a56fa1a6d3b38685
Author: wiz <wiz@NetBSD.org>
Date:   Mon May 2 14:12:09 2016 +0000

    Add missing backslash that broke build.

commit 2f3aa6bd068ae672c6a4891361cdf8f9b8b223a4
Author: christos <christos@NetBSD.org>
Date:   Mon May 2 13:01:34 2016 +0000

    Add more MLINKS, sort

commit 986567e424973d91e9651a4e43e1af2b983c0bda
Author: wiz <wiz@NetBSD.org>
Date:   Mon May 2 12:51:25 2016 +0000

    Fix Dd argument.

commit ac44c4d1a4e7293bb8785bd3e8a5e603dfc048c2
Author: christos <christos@NetBSD.org>
Date:   Mon May 2 12:43:35 2016 +0000

    Add more explicit xrefs

commit 0ad20f8cb7486fb8a32a8ba8dad5974fd1ea6fea
Author: wiz <wiz@NetBSD.org>
Date:   Mon May 2 09:39:24 2016 +0000

    Fix Dd argument.

commit 067b3315ea6a3e7cdededad10dab815952802732
Author: christos <christos@NetBSD.org>
Date:   Thu Apr 28 15:50:33 2016 +0000

    new man page from Ingo Schwarze.

commit f432b935f6244c8c3eafed9c35dc8a5b667d7695
Author: christos <christos@NetBSD.org>
Date:   Thu Apr 28 12:27:45 2016 +0000

    Initialize patbuf (Ingo Schwarze)

commit 1364b6032a2486f9f43f59afdfc633fac6a9dc0a
Author: christos <christos@NetBSD.org>
Date:   Tue Apr 19 19:50:53 2016 +0000

    From Ingo Schwarze:
     - Put the data type el_rfunc_t into the public header <histedit.h>.
     - Make el_read in struct editline an opaque pointer rather
       than an embedded struct.
     - Do not include "read.h" everywhere, but only in the two files
       needing access to el_read, read.c and el.c.
     - To functions that don't need more, pass the struct el_read_t *
       rather than the full EditLine *.
     - Of course, that means that read_init() can now fail from
       memory exhaustion, but it's easy to clean up after that.

commit 4fc1f47d56d59bcfe23251959db564f820f3648f
Author: christos <christos@NetBSD.org>
Date:   Mon Apr 18 17:01:19 2016 +0000

    From Ingo Schwarze:
     * Replace fcns.c by a shorter and simpler func.h
       and include it only in the one file needing it, map.c.
     * Combine help.h and help.c into a simplified help.h
       and include it only in the one file needing it, map.c.
     * Check the very simple, static files editline.c, historyn.c, and
       tokenizern.c into CVS rather than needlessly generating them.
     * So we no longer autogenerate any C files.  :-)
     * Shorten and simplify makelist by deleting the options -n, -e, -bc,
       and -m; the latter was unused and useless in the first place.
     * Move the declaration of el_func_t from fcns.h to the header
       actually needing it, map.h.  Since that header is already
       included by el.h for unrelated reasons, that makes el_func_t
       just as globally available as before.
     * No longer include the simplified fcns.h into el.h,
       include it directly into the *.c files needing it.

commit a2eaeedb128154341a19f5ff4a645c14bc6e9ee7
Author: christos <christos@NetBSD.org>
Date:   Sun Apr 17 18:39:14 2016 +0000

    Remove empty callbacks (Ingo Schwartze)

commit 20d5bea3663e4eaab9ddbee21e4eb35e2714985b
Author: christos <christos@NetBSD.org>
Date:   Tue Apr 12 11:15:46 2016 +0000

    FIONREAD takes int as an argument (Ingo Schwarze)

commit 985c823c19c7493cc14f3ea21bd74268dc5b04ed
Author: christos <christos@NetBSD.org>
Date:   Tue Apr 12 00:16:06 2016 +0000

    From Ingo Schwarze:
    
     * Delete the stubs of the XK_EXE mechanism that was never implemented.
       From a security, stability, and simplicity perspective, i would
       consider implementing it a truly terrible idea, so let's better
       get rid of it.
    
     * Do not use the local variable "num" in el_wgets() alternately for
       two completely different purposes.  Only use it for the number
       of characters read, as stated in the comment (or -1 as long as
       that number is still unknown), not for the (more or less boolean)
       return value of read_getcmd().  Actually, there is no need at
       all to save the latter return value after testing it once.
    
     * The function read_getcmd() has very unusual return values:
       It returns -1 for success and 0 for EOF/error.  Switch that around
       to 0 for success and -1 for EOF/error to be less confusing, and
       get rid of the OKCMD preprocessor macro.
    
     * Get rid of one #ifdef section in el_wgets() by using
       el->el_chared.c_macro directly at the only place
       where it is used.
    
     * Delete the unused MIN() macro.

commit 39e1d6f1edf8ca8b55df737a13c95ff313edd72a
Author: christos <christos@NetBSD.org>
Date:   Mon Apr 11 22:30:14 2016 +0000

    Fix indentation, Ingo Schwarze

commit 469d44f8e72a1504f196b08da26124a46510950f
Author: christos <christos@NetBSD.org>
Date:   Mon Apr 11 18:56:31 2016 +0000

    Get rid of private/public; keep protected (Ingo Schwarze)

commit a75ea7b9c4557734869232c1cbba38f1e9ede5cf
Author: christos <christos@NetBSD.org>
Date:   Mon Apr 11 16:06:52 2016 +0000

    chartype cleanups from Ingo Schwarze:
    
     - The file tokenizer.c no longer uses chartype.h,
       so don't include the header.
    
     - The dummy definitions of ct_{de,en}code_string() for the
       NARROWCHAR case are only used in history.c, so move them there.
    
     - Now the whole content of chartype.h is for the wide character
       case only.  So remove the NARROWCHAR ifdef and include the
       header only in the wide character case.
    
     - In chartype.h, move ct_encode_char() below the comment explaining it.
    
     - No more need for underscores before ct_{de,en}code_string().
    
     - Make the conversion buffer resize functions private.
       They are only called from the decoding and encoding functions
       inside chartype.c, and no need can possibly arise to call them
       from anywhere else.

commit 0594af8028ef1080289fa7b7c1fc2f07fbc4c4e0
Author: christos <christos@NetBSD.org>
Date:   Mon Apr 11 00:50:13 2016 +0000

    Char -> wchar_t from Ingo Schwarze.

commit 0aefc7f9ad381fa602f7f327cc7dec467ee60ac5
Author: christos <christos@NetBSD.org>
Date:   Mon Apr 11 00:22:48 2016 +0000

    more macro WIDECHAR undoing from Ingo Schwarze.

commit 2dd09931ab4abab6474d3ba4d2e4ac17e82a1ce3
Author: christos <christos@NetBSD.org>
Date:   Sat Apr 9 18:47:05 2016 +0000

    Change some 0's to NULL's from Pedro Giffuni

commit fcf85103b49949548cd915541434e21558fc20e6
Author: christos <christos@NetBSD.org>
Date:   Sat Apr 9 18:43:17 2016 +0000

    More WIDECHAR elimination (Ingo Schwarze)

commit 4e541d85cab4a96d4a128ff3172c93b6e33157fe
Author: christos <christos@NetBSD.org>
Date:   Wed Mar 23 22:27:48 2016 +0000

    Start removing the WIDECHAR ifdefs; building without it has stopped working
    anyway. (Ingo Schwarze)

commit 62666ab4cc0c0e92b99f6cb365e1df3d3f69f109
Author: christos <christos@NetBSD.org>
Date:   Tue Mar 22 01:38:17 2016 +0000

    put back NUL check (Ingo Schwarze)

commit 6b5dea1b27ddbcafdc198f6352a4c2181c325642
Author: christos <christos@NetBSD.org>
Date:   Tue Mar 22 01:34:32 2016 +0000

    Fix reversed condition in tty_end() (Ingo Schwarze)
    Also don't succeed if calling setup twice.

commit 72614d1ec0944ed8bb618cce18e78e65559d02c6
Author: christos <christos@NetBSD.org>
Date:   Mon Mar 7 00:05:20 2016 +0000

    Remove advertising clause.

commit d784c57539fb0800a1766728686463bce5eb199d
Author: christos <christos@NetBSD.org>
Date:   Wed Mar 2 19:24:20 2016 +0000

    PR/50880: David Binderman: Remove redundant code.
    While here, fix all debugging formats.

commit e7df8a22279419eece65f98d76baf45f6828efff
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 29 00:54:19 2016 +0000

    convert to 2 clause

commit fc5e336abc1e4813e780f4bb701f713f17884896
Author: christos <christos@NetBSD.org>
Date:   Sun Feb 28 23:02:24 2016 +0000

    remove 4 clause licenses.

commit a1f44db78741fdc3cc05a28e412b7e80b5fea1e2
Author: christos <christos@NetBSD.org>
Date:   Sat Feb 27 18:13:21 2016 +0000

    PR/50863: John Hein: libedit el_end() messes up term settings if piped
    Keep track if we initialized the tty, and only reset it if we did.

commit e1ae5a11b8861d35b297a27d67c98be68a2c572e
Author: wiz <wiz@NetBSD.org>
Date:   Thu Feb 25 14:59:22 2016 +0000

    Use \- for minus sign, use Ev, use Er.

commit 1674f8e3086193342dfeadca04740e7ea8264e13
Author: christos <christos@NetBSD.org>
Date:   Wed Feb 24 19:45:48 2016 +0000

    Fix el_{w,}getc documentation (Ingo Schwarze)

commit 7fc140d15b41534a7ee0af91c9dcadfa3a787d2c
Author: christos <christos@NetBSD.org>
Date:   Wed Feb 24 18:28:54 2016 +0000

    Fixes from OpenBSD via Ingo Schwarze:
    1) Missing comma after tok_str in NAME.
       OpenBSD rev. 1.38 Sep 10, 2015 (schwarze)
    2) Style: void in argument list.
       OpenBSD rev. 1.39 Sep 14, 2015 (schwarze)
    3) English punctuation: stray comma.
       OpenBSD rev. 1.37 Mar 13, 2015 (jmc)

commit fe2cf455d06af97ed10001322e21cf4572855ba1
Author: christos <christos@NetBSD.org>
Date:   Wed Feb 24 17:20:01 2016 +0000

    Tuck in mbstate_t to the wide char version only to avoid exposing the zeroing
    hack and doing it in the narrow case.

commit 94623721e878bc239b438743444e3e0ffa04aeae
Author: christos <christos@NetBSD.org>
Date:   Wed Feb 24 17:13:22 2016 +0000

    Make the read_char function always take a wchar_t * argument (Ingo Schwarze)

commit 5f47d9bd7254dc164689b49953b6284090f9ce87
Author: christos <christos@NetBSD.org>
Date:   Wed Feb 24 14:29:21 2016 +0000

    A very simple, non-intrusive patch to fix a segfault (and a
    functional error) in c_gets(), file chared.c.
    
    Run any program using libedit in the default way.  At the el_[w]gets()
    prompt, invoke ed-command (for example, in emacs mode, press the
    escape key, then type the letter 'x').  You should see a ": " prompt.
    Type the letter 'x' again.  Now press the backspace key a few times,
    looking at the screen after each key press:
    
     - The 1st BS deletes the 'x'.
     - The 2nd BS deletes the blank after the prompt.
     - The 3rd BS deletes the colon of the prompt.
     - The 4th BS moves the cursor up one line.
     - The 5th BS gives me "Segmentation fault (core dumped)".
    
    Depending on your platform, it might take a few more or a few less
    backspaces for the buffer underrun to trigger the segfault, but
    you should be able to hit it sooner or later no matter what.
    
    Run the same program again, connect again and invoke ed-command again.
    Now type: 'b', backspace, 'i', backspace, 'n', backspace, 'd', enter.
    The "bind" command gets executed, even though you deleted what you
    typed before hitting enter.
    
    From Ingo Schwatze.

commit 7ba8c71b0dc47998ce05debf7b03ff2049732d22
Author: christos <christos@NetBSD.org>
Date:   Wed Feb 24 14:25:38 2016 +0000

    Get split el_getc and el_wgetc completely and call el_wgetc internally.
    Change some character constants to they wide versions. (Ingo Schwarze)

commit 22383670cc39c25757416d042203072dd673ab00
Author: christos <christos@NetBSD.org>
Date:   Wed Feb 17 19:47:49 2016 +0000

    whitespace and header sorting changes (Ingo Schwarze). No functional changes.

commit e84df91e329c612f2c9ce617d30a181994d93d29
Author: christos <christos@NetBSD.org>
Date:   Tue Feb 16 22:53:14 2016 +0000

    More header cleanups from Ingo Schwarze.

commit bc4f01ce827fd882ac249b8e856ae6c6fc7bb500
Author: christos <christos@NetBSD.org>
Date:   Tue Feb 16 19:29:51 2016 +0000

    - don't set _GNU_SOURCE. We are not supposed to make decisions for others.
    - don't special-case wcsdup()
    From Ingo Schwarze.

commit 23f3e7075de137d9c5cc565e2d2c1b7507b8482f
Author: christos <christos@NetBSD.org>
Date:   Tue Feb 16 19:11:25 2016 +0000

    get rid of bool_t (Ingo Schwarze)

commit 747f681109a685c2bf5dadb748a21a801719c727
Author: christos <christos@NetBSD.org>
Date:   Tue Feb 16 19:08:41 2016 +0000

    more include file cleanup (Ingo Schwarze)

commit a539b892c33019eb360cafb915bf9d4c03190045
Author: christos <christos@NetBSD.org>
Date:   Tue Feb 16 15:54:15 2016 +0000

    include errno.h

commit aefc1e4460579373ce0056f2ecc82e9f9fbf2e5c
Author: christos <christos@NetBSD.org>
Date:   Tue Feb 16 15:53:48 2016 +0000

    From Ingo Scharze:
    Let "el.h" include everything needed for struct editline,
    and don't include that stuff multiple times.  That also improves
    consistency, also avoids circular inclusions, and also makes it
    easier to follow what is going on, even though not quite as nice.
    But it seems like the best we can do...

commit f09cb8c626641fb1b676df3139a39de4324876d9
Author: christos <christos@NetBSD.org>
Date:   Tue Feb 16 14:08:25 2016 +0000

    cleanup chartype.h includes (Ingo Schwarze)

commit c807fdff98e71f8b3f261fa4970d29e2ab6b453a
Author: christos <christos@NetBSD.org>
Date:   Tue Feb 16 14:07:47 2016 +0000

    one more

commit 40850369f8b66097f4a267e8845605c1d7b179ad
Author: christos <christos@NetBSD.org>
Date:   Tue Feb 16 14:06:05 2016 +0000

    cleanup inclusion of histedit.h (Ingo Schwarze)

commit 89cffc15320da224abe4b72ae4eb6b2c62efa919
Author: christos <christos@NetBSD.org>
Date:   Tue Feb 16 14:04:58 2016 +0000

    include explicitly errno.h since we use it.

commit 67bb8235269eb8e9e31a4516febf30fb7c370a70
Author: christos <christos@NetBSD.org>
Date:   Tue Feb 16 14:04:24 2016 +0000

    No need to include "sys.h" from here; it is included from config.h

commit d8252c8b233f59002fdfb2f96b257f939db640bf
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 15 23:36:30 2016 +0000

    attribute unused

commit 67b10d3e9e278d46400106e329fe282a22f39560
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 15 22:53:38 2016 +0000

    OpenBSD term.c rev. 1.7 2002/11/29 20:13:39 deraadt
    spelling

commit f91f480498d2a389b9b8852f6d701f884479eb53
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 15 22:48:59 2016 +0000

    OpenBSD readline.c rev. 1.14 2015/02/06 23:21:58 millert
    use SIZE_MAX

commit 92b1772005cccd3d757dc1b230113a201eb12612
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 15 21:58:37 2016 +0000

    OpenBSD readline.c rev. 1.13 2015/01/13 08:33:12 reyk
    rl_set_keyboard_input_timeout() for readline 4.2 compat

commit f8ee3c552846fa71bbebcaf77f32de34611006a0
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 15 21:56:35 2016 +0000

    OpenBSD eln.c rev. 1.3 2011/11/27 21:46:44 pascal
    kill a C++-style comment

commit 42e2a4d875a07bc562e1adf9f1dc7c769e7f2279
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 15 21:38:07 2016 +0000

    Compile with WIDECHAR the same way the main Makefile does (Ingo Schwarze)

commit 1e12a8d1ca0644d4e21a0bb93a2311a33fec0d7c
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 15 21:35:52 2016 +0000

    Don't free getline memory (Ingo Schwarze).

commit e8d0e8c012c466aac7d8304c082a42a1f24ca30a
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 15 17:35:39 2016 +0000

    forgot one fgetln define

commit 5390c8faa546540597d758319695352cf8c31bd3
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 15 16:14:39 2016 +0000

    change tests for fgetln.

commit a7ab79fbe526eb83874b07411f65aa497640b1a7
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 15 15:53:45 2016 +0000

    Use getline for better portability.

commit c0d16449e0a502a48f71fea908e6f2e183d4ed01
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 15 15:37:20 2016 +0000

    OpenBSD tokenizer.c rev. 1.8 2003/08/11 18:21:40 deraadt
    don't increase amax on realloc failure

commit efeef4e58710f742a55b5cf3a15924d2b7011a73
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 15 15:35:03 2016 +0000

    OpenBSD term.c rev. 1.13 2009/12/11 18:58:59 jacekm
    fix two memory leaks

commit c825536317c3a4283e07f38522bc5148e8aef2df
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 15 15:30:50 2016 +0000

    Change the test for the size of encoded buffer to include the NULL, from
    OpenBSD; no functional change.

commit 5367da5f9e8890d3114bfd3eeff86168cd6e5182
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 15 15:29:25 2016 +0000

    OpenBSD sig.c rev. 1.6 2001/12/06 04:26:00 deraadt
    save and restore errno in signal handler

commit 87240809e9cc1ea978ece9a778be40e6daa9db75
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 15 15:26:48 2016 +0000

    Use fparseln to avoid newline hacks.

commit 70a36d136ab50db46f75ff2035c2350a35b45959
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 15 15:18:01 2016 +0000

    use fparseln() to avoid needing to deal with missing \n in the last line
    and also to handle comments automatically.

commit 2884af9fee35def9bc4f1616f60128d07bead7e2
Author: christos <christos@NetBSD.org>
Date:   Sun Feb 14 17:06:24 2016 +0000

    From Ingo Schwarze:
    
    el_getc() for the WIDECHAR case, that is, the version in eln.c.
    For a UTF-8 locale, it is broken in four ways:
    
     1. If the character read is outside the ASCII range, the function
        does an undefined cast from wchar_t to char.  Even if wchar_t
        is internally represented as UCS-4, that is wrong and dangerous
        because characters beyond codepoint U+0255 get their high bits
        truncated, meaning that perfectly valid printable Unicode
        characters get mapped to arbitrary bytes, even the ASCII escape
        character for some Unicode characters.  But wchar_t need not
        be implemented in terms of UCS-4, so the outcome of this function
        is undefined for any and all input.
    
     2. If insufficient space is available for the result, the function
        fails to detect failure and returns garbage rather than -1 as
        specified in the documentation.
    
     3. The documentation says that errno will be set on failure, but
        that doesn't happen either in the above case.
    
     4. Even for ASCII characters, the results may be wrong if wchar_t
        is not using UCS-4.

commit f54e4f97f9c4bdbf8fe6909aff6a7fe1a3e4707b
Author: christos <christos@NetBSD.org>
Date:   Sun Feb 14 14:49:34 2016 +0000

    From Ingo Schwarze:
    
    As we have seen before, "histedit.h" can never get rid of including
    the <wchar.h> header because using the data types defined there is
    deeply ingrained in the public interfaces of libedit.
    
    Now POSIX unconditionally requires that <wchar.h> defines the type
    wint_t.  Consequently, it can be used unconditionally, no matter
    whether WIDECHAR is active or not.  Consequently, the #define Int
    is pointless.
    
    Note that removing it is not gratuitious churn.  Auditing for
    integer signedness problems is already hard when only fundamental
    types like "int" and "unsigned" are involved.  It gets very hard
    when types come into the picture that have platform-dependent
    signedness, like "char" and "wint_t".  Adding yet another layer
    on top, changing both the signedness and the width in a platform-
    dependent way, makes auditing yet harder, which IMHO is really
    dangerous.  Note that while removing the #define, i already found
    one bug caused by this excessive complication - in the function
    re_putc() in refresh.c.  If WIDECHAR was defined, it printed an
    Int = wint_t value with %c.  Fortunately, that bug only affects
    debugging, not production.  The fix is contained in the patch.
    
    With WIDECHAR, this doesn't change anything.  For the case without
    WIDECHAR, i checked that none of the places wants to store values
    that might not fit in wint_t.
    
    This only changes internal interfaces; public ones remain unchanged.

commit 61ee30487d887d8b489c39a19e37ebec4d2c93cf
Author: christos <christos@NetBSD.org>
Date:   Sun Feb 14 14:47:48 2016 +0000

    From Ingo Schwartze:
    
    Next step:  Remove #ifdef'ing in read_char(), in the same style
    as we did for setlocale(3) in el.c.
    
    A few remarks are required to explain the choices made.
    
     * On first sight, handling mbrtowc(3) seems a bit less trivial
       than handling setlocale(3) because its prototype uses the data
       type mbstate_t from <wchar.h>.  However, it turns out that
       "histedit.h" already includes <wchar.h> unconditionally (i don't
       like headers including other headers, but that ship has sailed,
       people are by now certainly used to the fact that including
       "histedit.h" doesn't require including <wchar.h> before), and
       "histedit.h" is of course included all over the place.  So from
       that perspective, there is no problem with using mbrtowc(3)
       unconditionally ever for !WIDECHAR.
    
     * However, <wchar.h> also defines the mbrtowc(3) prototype,
       so we cannot just #define mbrtowc away, or including the header
       will break.  It would also be a bad idea to porovide a local
       implementation of mbrtowc() and hope that it overrides the one
       in libc.  Besides, the required prototype is subtly different:
       While mbrtowc(3) takes "wchar_t *" as its first argument, we
       need a function that takes "Char *".  So unfortunately, we have
       to keep a ct_mbrtowc #define, at least until we can maybe get
       rid of "Char *" in the more remote future.
    
     * After getting rid of the #else clause in read_char(), we can
       pull "return 1;" into the default: clause.  After that, we can
       get rid of the ugly "goto again_lastbyte;" and just "break;".
       As a bonus, that also gets rid of the ugly CONSTCOND.
    
     * While here, delete the unused ct_mbtowc() from chartype.h.

commit cc7f005f248c935b02d0a8704eeb4836a2a2087c
Author: christos <christos@NetBSD.org>
Date:   Fri Feb 12 17:23:21 2016 +0000

    Avoid c99 for now.

commit 57c556fd794908a439d2f6c8b58215b43cf28761
Author: christos <christos@NetBSD.org>
Date:   Fri Feb 12 15:36:08 2016 +0000

    GC IGNORE_EXTCHARS and simplify code (Ingo Schwarze)

commit 0e1288d7c8c2c3bcf4459308cc6094bbb0f2b953
Author: christos <christos@NetBSD.org>
Date:   Fri Feb 12 15:11:09 2016 +0000

    From Ingo Schwarze:
    
    If CHARSET_IS_UTF8 is not set, read_char() is broken in a large
    number of ways:
    
     1. The isascii(3) check can yield false positives.  If a string in
        an arbitrary encoding contains a byte in the range 0..127,
        that does not at all imply that it forms a character all by
        itself, and even less that it represents the same character
        as in ASCII.  Consequently, read_char() may return characters
        the user never typed.
        Even if the encoding is not state dependent, the assumption that
        bytes in the range 0..127 represent ASCII characters is broken.
        Consider UTF-16, for example.
    
     2. The reverse problem can also occur.  In an arbitrary encoding,
        there is no guarantee that a character that can be represented
        by ASCII is represented by a seven-bit byte, and even less by
        the same byte as in ASCII.
        Even for single-byte encodings, these assumptions are broken.
        Consider the ISO 646 national variants, for example.
        Consequently, the current code is insufficient to keep ASCII
        characters working even for single-byte encodings.
    
     3. The condition "++cbp != 1" can never trigger (because initially,
        cbp is 0, and the code can only go back up via the final goto,
        which has another cbp = 0 right before it) and it has no effect
        (because cbp isn't used afterwards).
    
     4. bytes = ct_mbtowc(cp, cbuf, cbp) is broken.  If this returns -1,
        the code assumes that is can just call mbtowc(3) again for later
        input bytes.  In some implementations, that may even be broken
        for state-independent encodings, but trying again after mbtowc(3)
        failure certainly produces completely erratic and meaningless
        results in state-dependent encodings.
    
     5. The assignment "*cp = (Char)(unsigned char)cbuf[0]" is
        completely bogus.  Even if the byte cbuf[0] represents a
        character all by itself, which it usually will not, whether
        or not the cast produces the desired result depends on the
        internal representation of wchar_t in the C library, which
        the application program can know nothing about.  Even for ASCII
        in the C/POSIX locale, an ASCII character other than '\0' ==
        L'\0' == 0 need not have the same numeric value as a char and
        as a wchar_t.
    
    To summarize, this code only works if all of the following
    conditions hold:
    
     - The encoding is a single-byte encoding.
     - ASCII is a subset of the encoding.
     - The implementation of mbtowc(3) in the C library does not
       require re-initialization after encoding errors.
     - The implementation of wchar_t in the C library uses the
       same numerical values as ASCII.
    
    Otherwise, it silently produces wrong results.
    
    The simplest way to fix this is to just use the same code as for
    UTF-8 (right above).  Of course, that causes functional changes
    but that shouldn't matter since current behaviour is undefined.
    
    The patch below provides the following improvements:
    
     - It works for all stateless single-byte encodings, no matter
       whether they are somehow related to ASCII, no matter how
       mb[r]towc(3) are internally implemented, and no matter how
       wchar_t is internally represented.
     - Instead of producing unpredictable and definitely wrong
       results for non-UTF-8 multibyte characters, it behaves in
       a well-defined way: It aborts input processing, sets errno,
       and returns failure.
       Note that short of providing full support for arbitrary locales,
       it is impossible to do better.  We cannot know whether a given
       unsupported locale is state-dependent, and for a state-dependent
       locale, it makes no sense to retry parsing after an encoding
       error, so the best we can do is abort processing for *any*
       unsupported multi-byte character.
     - Note that single-byte characters in arbitrary state-independent
       locales still work, even in locales that may potentially also
       contain multibyte characters, as long as those don't occur in
       input.  I'm not sure whether any such locales exist in practice...
    
    Tested with UTF-8 and C/POSIX on OpenBSD.  Also tested that in the
    C/POSIX locale, non-ASCII bytes get through unmangled.  You may
    wish to test with ISO-LATIN on NetBSD if NetBSD supports that.
    
    ----
    Also use a constant for meta to avoid warnings.

commit 6af8d6733f40672ca954fbb4d2e9ca937b1f29fd
Author: christos <christos@NetBSD.org>
Date:   Thu Feb 11 19:21:04 2016 +0000

    - Add some more Char casts
    - reduce ifdefs by providing empty defs for nls functions (Ingo Schwarze)

commit 28c0290948201e8fa5cb090c7b8e52d97e3c9043
Author: christos <christos@NetBSD.org>
Date:   Thu Feb 11 19:10:18 2016 +0000

    remove unused wrapper (Ingo Schwarze)

commit 3ae44d103348d5904330453a57007604b2b3d626
Author: christos <christos@NetBSD.org>
Date:   Thu Feb 11 16:08:47 2016 +0000

    Remove utf8_islead() mbrtowc() handles this just fine (Ingo Schwarze)

commit 6b42622b31f90d06d6d0dd7038e0204c6fb1e9ad
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 8 17:18:43 2016 +0000

    UTF-8 fixes from Ingo Schwarze:
    
     1. Assume that errno is non-zero when entering read_char()
        and that read(2) returns 0 (indicating end of file).
        Then, the code will clear errno before returning.
        (Obviously, the statement "errno = 0" is almost always
         a bug unless there is save_errno = errno right before it
         and the previous value is properly restored later,
         in all reachable code paths.)
    
     2. When encountering an invalid byte sequence, the code discards
        all following bytes until MB_LEN_MAX overflows; consider, for
        example, 0xc2 immediately followed by a few valid ASCII bytes.
        Three of those ASCII bytes will be discarded.
    
     3. On a POSIX system, EILSEQ will always be set after reading a
        valid (yes, valid, not invalid!) UTF-8 character.  The reason
        is that mbtowc(3) will first be called with a length limit
        (third argument) of 1, which will fail, return -1, and - on
        a POSIX system - set errno to EILSEQ.
        This third bug is mitigated a bit because i couldn't find any
        system that actually conforms to POSIX in this respect:  None
        of OpenBSD, NetBSD, FreeBSD, Solaris 11, and glibc set errno
        when an incomplete character is passed to mbtowc(3), even though
        that is required by POSIX.
        Anyway, that mbtowc(3) bug will be fixed at least in OpenBSD
        after release unlock, so it would be good to fix this bug in
        libedit before fixing the bug in mbtowc(3).
    
    How can these three bugs be fixed?
    
     1. As far as i understand it, the intention of the bogus errno = 0
        is to undo the effects of failing system calls in el_wset(),
        sig_set(), and read__fixio() if the subsequent read(2) indicates
        end of file.  So, restoring errno has to be moved right after
        read__fixio().  Of course, neither 0 nor e is the right value
        to restore: 0 is wrong if errno happened to be set on entry, e
        would be wrong because if one read(2) fails but a second attempt
        succeeds after read__fixio(), errno should not be touched.  So,
        the errno to be restored in this case has to be saved before
        calling read(2) for the first time.
    
     2. Solving the second issue requires distinguishing invalid and
        incomplete characters, but that is impossible with the function
        mbtowc(3) because it returns -1 in both cases and sets errno
        to EILSEQ in both cases (once properly implemented).
    
        It is vital that each input character is processed right away.
        It is not acceptable to wait for the next input character before
        processing the previous one because this is an interactive
        library, not a batch system.  Consequently, the only situation
        where it is acceptable to wait for the next byte without first
        processing the previous one(s) is when the previous one(s) form
        an incomplete sequence that can be continued to form a valid
        character.
    
        Consequently, short of reimplementing a full UTF-8 state machine
        by hand, the only correct way forward is to use mbrtowc(3).
        Even then, care is needed to always have the state object
        properly initialized before using it, and to not discard a valid
        ASCII or UTF-8 lead byte if it happens to follow an invalid
        sequence.
    
     3. Fortunately, solution 2. also solves issue 3. as a side effect,
        by no longer using mbtowc(3) in the first place.

commit ef555cf8bbcab1df2e9dddfc0803649a69868761
Author: christos <christos@NetBSD.org>
Date:   Sat Jan 30 15:05:27 2016 +0000

    Whitespace fix (Ingo Schwarze)

commit 7ce9f672f2c57161ff6b042f557681d5477b62da
Author: christos <christos@NetBSD.org>
Date:   Sat Jan 30 04:02:51 2016 +0000

    Fix misplaced parentheses (Ingo Schwarze)

commit 65691b0e16b5c72ea892673260bd58fc124b18d4
Author: christos <christos@NetBSD.org>
Date:   Fri Jan 29 19:59:11 2016 +0000

    One macro is enough (Ingo Schwarze)

commit 07d2388506543f7e6d73aa05d48d76f4569fb564
Author: gson <gson@NetBSD.org>
Date:   Tue Dec 8 16:53:27 2015 +0000

    unbreak the build

commit 8d14d38c26e5d9586b42d5a71c9e569126d4bd9a
Author: christos <christos@NetBSD.org>
Date:   Tue Dec 8 12:57:16 2015 +0000

    If we did not setup the tty, don't reset it.

commit a2993d741e347ccd17f0c80927f8fac9482b4f59
Author: christos <christos@NetBSD.org>
Date:   Tue Dec 8 12:56:55 2015 +0000

    Only reset the terminal if we have a tty (Boris Ranto)

commit 8ec268554ef4fd0197ad988b261f2858f9b3c996
Author: christos <christos@NetBSD.org>
Date:   Tue Nov 3 21:36:59 2015 +0000

    Fix descriptions of el_set functions.
    Americanise initialise :-)

commit 0fe5419e98367fba9abc9e10ab49242b7ddf871a
Author: christos <christos@NetBSD.org>
Date:   Wed Oct 21 21:45:30 2015 +0000

    Use the full buffer for the conversion; ideally we should be dynamically
    allocating this. From Jilles Tjoelker

commit 234792da04114454185da99a6ac55cd4a0880797
Author: christos <christos@NetBSD.org>
Date:   Mon Oct 19 00:36:27 2015 +0000

    make sure we have space for NUL and NUL terminate buffer array (Jilles Tjoelker)

commit 14ccb7c1cca73ee8a9045daf0339bdae21ee33ee
Author: christos <christos@NetBSD.org>
Date:   Tue Jun 2 15:36:45 2015 +0000

    remove duplicate declaration

commit 0804279dff077a9f5204865cdd9b8ba2a3c01d46
Author: christos <christos@NetBSD.org>
Date:   Tue Jun 2 15:35:31 2015 +0000

    Adjust API to a more modern readline (Ryo Onodera)

commit 0b61093115682900514cc8a797da0aa34bb123b7
Author: christos <christos@NetBSD.org>
Date:   Tue May 26 19:59:21 2015 +0000

    - fix types of rl_completion_entry_function and rl_add_defun
    - call update pos before completion to refresh the screen
    From Thomas Eriksson

commit bdf16bca92ed06321f74ae061fe78ebb89891231
Author: christos <christos@NetBSD.org>
Date:   Mon May 18 15:07:04 2015 +0000

    make el_gets() return the number of characters read in wide mode (not the
    number of wide characters) From khorben@ by FreeBSD:
    https://svnweb.freebsd.org/ports/head/devel/libedit/files/patch-src_eln.c?\
    revision=382458&view=markup
    XXX: Pullup-7

commit 5113710e5ba0bbaddf8d7bb94ac47c203d381c87
Author: christos <christos@NetBSD.org>
Date:   Sun May 17 13:14:41 2015 +0000

    add FreeBSD

commit d2ed0c780aeabc09a28e3bad55c589c16eddf4fb
Author: christos <christos@NetBSD.org>
Date:   Thu May 14 10:44:15 2015 +0000

    fix warnings on ubuntu 32 bit (Miki Rozloznik)

commit 2a7851d30cae5160838b9f0da17dbd50634136ee
Author: christos <christos@NetBSD.org>
Date:   Wed Apr 1 15:23:15 2015 +0000

    Fix overlapping strcpy (Gerry Swislow)

commit b52bce6ba8801f61991362606309a7f0e6b85c2e
Author: christos <christos@NetBSD.org>
Date:   Tue Mar 24 21:29:52 2015 +0000

    set some readline compatibility default key settings.
    https://bugzilla.redhat.com/attachment.cgi?id=1001895

commit 9a8795cdcd27e29abe1f1da361243ac2799ced2c
Author: christos <christos@NetBSD.org>
Date:   Tue Mar 24 21:26:50 2015 +0000

    save and restore IGNORE_EXTCHARS like we do in the getc case. From:
    https://bugzilla.redhat.com/attachment.cgi?id=1001894

commit 21ea10bd7a31be6a4f5a4d0fd29a5bc55c1eff02
Author: christos <christos@NetBSD.org>
Date:   Sun Feb 22 02:16:19 2015 +0000

    split the allocation functions, their mixed usage was too confusing.

commit aecf67a26267215eb36f371df62933b7ab5d0e96
Author: christos <christos@NetBSD.org>
Date:   Sun Feb 22 00:46:58 2015 +0000

    PR/49683: Amir Plivatsky: Off-by-one comparison in ct_decode_string() leading
    to out of bounds referrence.
    XXX: pullup-7

commit 71cf54e71e1d6521891ac28697a28acf10202c8d
Author: christos <christos@NetBSD.org>
Date:   Tue Feb 17 22:49:26 2015 +0000

    OpenBSD is like us.

commit d5e00695c3e83ebef6ebe1d87a5d2f68479d581f
Author: joerg <joerg@NetBSD.org>
Date:   Thu Jan 29 20:30:02 2015 +0000

    Disable -Wcast-qual for clang for now.

commit 724c4ed0299af64f2eee9eff581001b683cc7bc8
Author: wiz <wiz@NetBSD.org>
Date:   Thu Dec 25 13:39:41 2014 +0000

    Bump date for previous.

commit eb157f70b10ff087026efb5e9398e9c5f7bd1909
Author: wiz <wiz@NetBSD.org>
Date:   Thu Dec 25 13:39:05 2014 +0000

    From Ingo Schwarze, based on changes from Kaspars Bankovskis:
     * Document error handling of el_init(), el_set(), el_source(),
       and history_init().
     * Fix a typo an improve punctuation below H_SETUNIQUE.
     * The ellipsis already implies "optional", no need for [].
     * Sort options in editrc(5).
     * Prevent e.g. rom being misconstrued as the end of a sentence.
     * Drop a useless duplicate .Ar macro.
     * Put telltc in its proper place in the alphabetical order.
     * A few typos in vi editor command names.
     * Some missing vi editor command names.
     * Some missing author macros.

commit 41482d774589d308a85e0909c263a9ad1dbb0af4
Author: riz <riz@NetBSD.org>
Date:   Sat Oct 18 15:07:02 2014 +0000

    callers's -> caller's

commit f0a7346d2148aa56c118f3e51cfffc26cebb09ce
Author: snj <snj@NetBSD.org>
Date:   Sat Oct 18 08:33:23 2014 +0000

    src is too big these days to tolerate superfluous apostrophes.  It's
    "its", people!

commit 3ea928643bacbf7a491a54de080e2cea45e5ec84
Author: christos <christos@NetBSD.org>
Date:   Fri Aug 15 13:32:53 2014 +0000

    Fix typo in comment (Tobias Stoeckmann)

commit 80e781ab8534d16dc3d20f53870e7429f812178a
Author: christos <christos@NetBSD.org>
Date:   Sun Jul 6 18:15:34 2014 +0000

    Bounds search for reallocated index, from OpenBSD via Andreas Fett

commit 0fb55ca6696fe3ff58c88b8a6aecc62148edb453
Author: christos <christos@NetBSD.org>
Date:   Sun Jul 6 18:09:04 2014 +0000

    PR/48957: Federico G. Schwindt: Restore commented out code that broke
    rl_callback_handler.

commit 20efb692ab81ff6eb037d3292faa51429c6a9b1c
Author: christos <christos@NetBSD.org>
Date:   Wed Jun 18 20:12:15 2014 +0000

    cast gotsig because it is long on some systems.

commit cc52c7c3a4d83d4aed8c2d8ea22071e4a4bd28cd
Author: christos <christos@NetBSD.org>
Date:   Wed Jun 18 18:52:49 2014 +0000

    Add stdlib.h for abort() (Jess Thrysoee)

commit e06822a79d0da795fcbf829bc1641dca0f54cf20
Author: christos <christos@NetBSD.org>
Date:   Wed Jun 18 18:12:28 2014 +0000

    Don't depend on weak aliases to define the vi "alias" expansion function,
    provide an API instead to set it.

commit 0bd5e60967b44122821caff15b9655fe4963cf42
Author: christos <christos@NetBSD.org>
Date:   Wed Jun 18 13:03:08 2014 +0000

    accomodate FreeBSD's flavor of weak references.

commit ac641cb90663920dd1cefa7018ad9ceb26be0e43
Author: mrg <mrg@NetBSD.org>
Date:   Sat Jun 14 20:49:36 2014 +0000

    remove remaining makefile support for GCC < 45 that i found.

commit 78dc8159daa57447207a53a3c95ee73af5ee0804
Author: christos <christos@NetBSD.org>
Date:   Thu Jun 5 22:07:42 2014 +0000

    PR/48876: Dmitriy Grigoryev: Core dump in readline lib on attempted expansion
    Make sure we have 2 matches before calling strcmp().

commit 368fe5a982a9d417182b2f15c088a5240082f2a5
Author: christos <christos@NetBSD.org>
Date:   Tue May 20 15:05:08 2014 +0000

    Always NULL terminate the argv[] array. From OpenBSD.

commit 72aae1aa7291c222ee748b10bdb989f3416a58d1
Author: christos <christos@NetBSD.org>
Date:   Mon May 19 21:01:48 2014 +0000

    PR/48821: If called from tty_stty(), recalculate flags.

commit 75ef7650b2fe21b432470a3cd9114f7b6569afc2
Author: christos <christos@NetBSD.org>
Date:   Mon May 19 19:54:12 2014 +0000

    more tty modes refactoring, no functional change intended.

commit ed36ef985865491e5117bb42e51160f1169f9818
Author: christos <christos@NetBSD.org>
Date:   Mon May 19 17:14:41 2014 +0000

    Factor out some common code (more to be done) from PR/48821

commit 8c54f70a117551d5aea6490a05d5f502d5f15775
Author: wiz <wiz@NetBSD.org>
Date:   Sun May 11 09:01:42 2014 +0000

    Add An to authors. Wording.

commit 58ced3d761c1915c02523478f269d0ad37567529
Author: christos <christos@NetBSD.org>
Date:   Sun May 11 01:05:17 2014 +0000

    Add a history function that takes a FILE pointer; needed for Capsicum.
    From Eitan Adler

commit 0680d7215e6e1af4a919918e95355d9a35488cbe
Author: christos <christos@NetBSD.org>
Date:   Wed Feb 26 13:50:29 2014 +0000

    Add missing EL_REFRESH

commit 7683f26e31590ddd74a97a8c745609a81c7855a3
Author: christos <christos@NetBSD.org>
Date:   Tue Jan 21 13:51:44 2014 +0000

    ... if called prior to using_history().  This needed to be worked around
    in PHP: http://git.php.net/?p=php-src.git;a=commitdiff;h=31d67bd3
    
    Bug: https://bugzilla.redhat.com/show_bug.cgi?id=1055409

commit efab425d4c4e7db9d0b9cf464a869da8f5a1c911
Author: christos <christos@NetBSD.org>
Date:   Wed Aug 28 08:05:21 2013 +0000

    get rid of PATH_MAX.

commit 53fbf029084fe9e2de4547e44f2baf640ce0e0f8
Author: christos <christos@NetBSD.org>
Date:   Fri Jul 12 22:39:50 2013 +0000

    cast to avoid warning.

commit 255f657e8d56cab4b7a3a21c55ced2b0fc1405c4
Author: christos <christos@NetBSD.org>
Date:   Fri Jul 12 17:48:29 2013 +0000

    Add a function to move the cursor.

commit 45fd2d25ac33d19d146c4ed3860a3671d57603ca
Author: christos <christos@NetBSD.org>
Date:   Tue May 28 00:10:34 2013 +0000

    expose rl_catch_signals and explain what we are doing.

commit 3cf221a53b3fbaa57aa94ea1ed4bfd32b8325b91
Author: christos <christos@NetBSD.org>
Date:   Mon May 27 23:55:55 2013 +0000

    Test early for EOF to avoid infinite loop in the wide char case. From
    Linas Vepstas: linasvepstas at gmail dot com

commit 40b42dfe79359909c170c7f6eef6acb8f1baa3d7
Author: christos <christos@NetBSD.org>
Date:   Tue Jan 22 20:23:21 2013 +0000

    provide an el_init_fd function.

commit e861b2b0792f3d6dbe2764ba0adc7241ca361d5f
Author: christos <christos@NetBSD.org>
Date:   Sun Jan 13 15:46:57 2013 +0000

    explicitly pass (void *)0 instead of NULL.

commit ec73a081d274be0a60df915bf4ea2230a122967c
Author: wiz <wiz@NetBSD.org>
Date:   Thu Jan 10 16:03:42 2013 +0000

    Add FILES section.
    From jmc@OpenBSD.

commit 56a5e44fef289f9259d7a0d1361ceb8773a94bd6
Author: wiz <wiz@NetBSD.org>
Date:   Thu Jan 10 16:03:06 2013 +0000

    In 2000, .editrc reading from $PWD was removed. Update the man page.
    From LEVAI Daniel via jmc@OpenBSD.

commit 07ea4685bd8da896b61710eb454a32353ba80381
Author: christos <christos@NetBSD.org>
Date:   Tue Jan 1 15:34:02 2013 +0000

    remove dead assignment (Christoph Mallon)

commit 1da7b962824917a52b2e38bd72666edfe04da551
Author: christos <christos@NetBSD.org>
Date:   Tue Jan 1 15:33:06 2013 +0000

    Fix pasto that affected bind -k (Christoph Mallon)

commit 7417d4b4687f7e3e4299fea73f03d11b1db0a9e7
Author: christos <christos@NetBSD.org>
Date:   Fri Oct 12 23:35:02 2012 +0000

    Add trailing NULL's to the varargs functions as required. (John Spencer)

commit d3a9c484a4a51258ddaf995f18db254af93394cc
Author: christos <christos@NetBSD.org>
Date:   Tue Sep 11 20:29:58 2012 +0000

    PR/46945: Steffen Nurpmeso; el_getc() doesn't document it's setting errno

commit 27afcf74cba72092ceabff3b88b8c35c3221a6be
Author: christos <christos@NetBSD.org>
Date:   Tue Sep 11 12:31:08 2012 +0000

    return !OKCMD on error.

commit 82f197ec94cad23a175b42009c3b11d6e7eca87a
Author: christos <christos@NetBSD.org>
Date:   Tue Sep 11 11:58:53 2012 +0000

    PR/46942: Steffen Nurpmeso: editline(3): el_get(): fix UNBUFFERED return

commit 2e9d696349cc7121fa9fc4129781439fac979dbb
Author: christos <christos@NetBSD.org>
Date:   Tue Sep 11 11:57:18 2012 +0000

    PR/46941: Steffen Nurpmeso: document EL_BUFFERED

commit 85bde018fb531ebce65f82f579d07d3af3ac4be1
Author: christos <christos@NetBSD.org>
Date:   Mon Sep 10 20:53:18 2012 +0000

    PR/46935: Steffen Nurpmeso: editline(3) (libedit): faulty errno handling,
    faulty reuse of val in wrong context

commit e16a720f89729f0177d879c0da8eda3f6e997b6b
Author: joerg <joerg@NetBSD.org>
Date:   Fri Aug 10 12:20:10 2012 +0000

    Don't depend on HAVE_GCC being always defined.

commit 1f432e4501b3d6e81d279367f693a01b8bcd7d06
Author: christos <christos@NetBSD.org>
Date:   Wed Jul 18 17:12:39 2012 +0000

    From Kamil Dudka: fix crash of el_insertstr() on incomplete multi-byte

commit c046613e5bdea7910bc8915c6842f0093f7c4844
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 12 18:46:20 2012 +0000

    PR/46678: Ian Wienand: Add stub implementation for rl_free_line_state()

commit f2d8e54f167e1969564f818ff25ad6b38fed0789
Author: christos <christos@NetBSD.org>
Date:   Tue Jun 5 00:30:22 2012 +0000

    don't crash if add_history is called from an empty line. Called from
    nslookup in new bind.
    XXX: pullup to 6

commit fd5f5a6e6714082c3d0e16a66894a03c006bb61b
Author: njoly <njoly@NetBSD.org>
Date:   Sat Jun 2 14:19:20 2012 +0000

    Switch from Op to Oo/Oc for nested block.

commit a6b4b4578e6b0eedbda5e606de4e20eb80e9d10e
Author: christos <christos@NetBSD.org>
Date:   Thu May 31 13:16:39 2012 +0000

    remove stdint.h; it is not used.

commit d22248f82de4489668a9308683f1dbf184d09cc9
Author: christos <christos@NetBSD.org>
Date:   Wed May 30 18:21:14 2012 +0000

    don't include both term.h and termcap.h

commit 186f51e0f1201c4c882e07d9d26ed6b8ee571d52
Author: christos <christos@NetBSD.org>
Date:   Tue May 15 19:07:25 2012 +0000

    define the new variable

commit f5b586b16d3abf26b030e296d61f3c3a40140098
Author: christos <christos@NetBSD.org>
Date:   Tue May 15 17:30:04 2012 +0000

    Add rl_completion_word_break_hook from:
    http://gitweb.dragonflybsd.org/dragonfly.git/commitdiff/\
    5ec6a45fa762b8cbd0305ca06acb8780335a486a

commit 83bcb341244b0222745b262f60132ec7759d2235
Author: christos <christos@NetBSD.org>
Date:   Tue May 15 15:59:01 2012 +0000

    save and restore the tty settings on entry and exit respectively.
    cleanup debugging printfs.

commit fac360ff28d3728417fbf73fd7e92b301fe7553d
Author: christos <christos@NetBSD.org>
Date:   Sat Mar 24 20:09:30 2012 +0000

    From: Jilles Tjoelker: Add a mapping for the cursor delete key

commit d067817eead7f1405ed4dae860d76b235d3b9073
Author: christos <christos@NetBSD.org>
Date:   Sat Mar 24 20:08:43 2012 +0000

    From Jilles Tjoelker:
    Do not move the cursor for ed-delete-next-char in emacs mode.
    This makes ed-delete-next-char suitable for mapping to the <Delete> key.
    Behaviour in vi mode is unchanged (for 'x').

commit fa835e8c8b0010777bd91803f15ae5587f224dd7
Author: matt <matt@NetBSD.org>
Date:   Wed Mar 21 05:37:42 2012 +0000

    These directories default to WARNS?=5

commit 6fb2a3179ffa3e47f1966a45d28877fc058f8317
Author: matt <matt@NetBSD.org>
Date:   Wed Mar 21 05:34:54 2012 +0000

    Use C89 functions definitions.

commit f9113d007ba01ebfad343fed2f314e337ea8c8ce
Author: matt <matt@NetBSD.org>
Date:   Wed Mar 21 05:33:26 2012 +0000

    Use C89 functions definitions.
    Remove use of __P

commit 9b25b03245e7839a0569880a6c8449069fcf7f39
Author: christos <christos@NetBSD.org>
Date:   Sun Mar 11 21:15:25 2012 +0000

    include the NULL in the argv conversion

commit 75b1bb5aad62bd326b1bb2cad1549270754c844e
Author: christos <christos@NetBSD.org>
Date:   Sun Mar 11 21:14:56 2012 +0000

    use arraycount

commit 3c15bad9a75893ec7273429051109a66a6baa9f1
Author: christos <christos@NetBSD.org>
Date:   Mon Jan 16 14:57:45 2012 +0000

    PR/45843: Henning Petersen: Fix resource leak on error.

commit ae5295ee5dcb61c0aed44f929b5f16b73c2c4c37
Author: christos <christos@NetBSD.org>
Date:   Fri Nov 18 20:39:18 2011 +0000

    Add coverity annotations about unreachable code (Kamil Dudka)

commit e83c752c924554fa452f3c52aefde66fb1d3414c
Author: christos <christos@NetBSD.org>
Date:   Fri Nov 18 20:38:42 2011 +0000

    Add missing *

commit 36e7768bff21d9bac03d5e06d3e341b819f5f7a7
Author: christos <christos@NetBSD.org>
Date:   Fri Nov 18 20:32:00 2011 +0000

    Initialize termbuf (Kamil Dudka)

commit cfca73c1f8a86dec40635b1439b7f37b1cbfdfe8
Author: christos <christos@NetBSD.org>
Date:   Fri Nov 18 20:30:01 2011 +0000

    Initialize res (Kamil Dudka)

commit d24c721eac480aa95e49e49dc925367d95438b9d
Author: christos <christos@NetBSD.org>
Date:   Fri Nov 18 20:25:48 2011 +0000

    check for negative return of ct_visual_char (Kamil Dudka)

commit e09907eccdd7aadac7945f7433f12eb328a32e7e
Author: christos <christos@NetBSD.org>
Date:   Fri Nov 18 20:24:21 2011 +0000

    Off by one in allocation could cause buffer overflow (Kamil Dudka)

commit 9bee9dd87041cc1764df97c0dea72bfea4087341
Author: christos <christos@NetBSD.org>
Date:   Fri Nov 18 20:22:03 2011 +0000

    remove unrecheable code (Kamil Dudka)

commit 872b7bf4a35bf9607c1d061003d0aaea9073e602
Author: christos <christos@NetBSD.org>
Date:   Wed Nov 16 01:45:10 2011 +0000

    easier with an int for now.

commit 749960097cd48269fe86d10a3fb7a05de4abd940
Author: christos <christos@NetBSD.org>
Date:   Tue Nov 15 23:54:14 2011 +0000

    Since Width() is used only for display purposes we don't want to pass -1 for
    unprintable characters.

commit 6a96f344c719301f348fce699a393415ce81f92c
Author: christos <christos@NetBSD.org>
Date:   Sun Oct 23 17:37:55 2011 +0000

    Fixed misplaced parenthesis (Nirbhay Choubey)

commit b6f308812db5649df0115264cc3d3541c37352af
Author: christos <christos@NetBSD.org>
Date:   Tue Oct 4 15:27:04 2011 +0000

    fixed warnings where wint_t is unsigned.

commit 8c9fc8838c1158866f377ba4bff7e404b3ca8dcb
Author: christos <christos@NetBSD.org>
Date:   Mon Oct 3 14:09:38 2011 +0000

    fix broken change (parenthesis in the wrong place). From Nirbhay Choubey

commit f02b4909804c1eb65ebb17af7f5a523fc90d1eab
Author: christos <christos@NetBSD.org>
Date:   Wed Sep 28 14:08:04 2011 +0000

    include <wchar.h> if we don't have wcsdup()

commit 2b8aaed8cd498f784adff8b449eee3eb8e00c2a3
Author: plunky <plunky@NetBSD.org>
Date:   Fri Sep 16 16:13:16 2011 +0000

    NULL does not need a cast, here

commit 3d802cf59d82e6124b2431b0fc501822e40ee75d
Author: christos <christos@NetBSD.org>
Date:   Tue Aug 16 16:25:15 2011 +0000

    re-enable -Wconversion

commit 436299cdac120a3a469a1d0c7751f8928087cc6b
Author: christos <christos@NetBSD.org>
Date:   Thu Aug 4 14:33:05 2011 +0000

    need err.h now

commit 98ea74e04873111ee7e85aa6baa9d43ee67e3808
Author: joerg <joerg@NetBSD.org>
Date:   Tue Aug 2 17:22:02 2011 +0000

    Only use -Wconversion if GCC is actually the active compiler.

commit 67fb97348746e20a326eaab427bd91d6d6023613
Author: tron <tron@NetBSD.org>
Date:   Sat Jul 30 10:07:27 2011 +0000

    Don't use "-Wconversion" with GCC 4.5 which will complain about all the
    expressions where signed variables are converted to unsigned in an
    expression e.g. "size_t foo = sizeof(something) * int_var;".

commit c11bd863f5d6bc66a06eba0d7c7d1b495de1e9ca
Author: christos <christos@NetBSD.org>
Date:   Fri Jul 29 23:44:44 2011 +0000

    pass -Wconversion

commit 1237974a30670094d060594847e958623f3bcfe1
Author: christos <christos@NetBSD.org>
Date:   Fri Jul 29 20:58:07 2011 +0000

    - fix unused params
    - unconditionalize vis.h

commit f46176b9a9e44f41c008f6f4b038069fe0498e7c
Author: christos <christos@NetBSD.org>
Date:   Fri Jul 29 20:57:34 2011 +0000

    better autoconf results

commit f4bf097e853f59762619278d1c832392e1d08f98
Author: christos <christos@NetBSD.org>
Date:   Fri Jul 29 20:56:58 2011 +0000

    add -Wunused-parameter
    Is that the right way? Perhaps WARNS=5?

commit 7ecb1ef25eb617b8f2f3a6d29b14078d8cff04ca
Author: christos <christos@NetBSD.org>
Date:   Fri Jul 29 15:20:39 2011 +0000

    kill ifdef notdef

commit b71bed95b33792d0ca0efc098013d8aa23ea3f18
Author: christos <christos@NetBSD.org>
Date:   Fri Jul 29 15:16:33 2011 +0000

    KNF return (\1); -> return \1;

commit a13cd75612a4db47ab774e3b6efef3c81f7d28ec
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 20:50:55 2011 +0000

    kill ptr_t and ioctl_t, add  * sizeof(*foo) to all allocations.

commit 56eac9ea53b629dc31b2521016a0f374711c61b1
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 17:33:55 2011 +0000

    fix unused variable warnings on systems without _r functions

commit df86a66a1c2bc10b9bf0e48049e0833e653ff980
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 17:33:39 2011 +0000

    handle systems without getpwent_r

commit 4104b0e782af947d6ad12de8265107b36bea34a2
Author: joerg <joerg@NetBSD.org>
Date:   Thu Jul 28 05:18:43 2011 +0000

    Sync compat defines to unbreak build.
    
    XXX Do a proper config.h update from configure

commit 7da8639ecc7fc860b70e9ae17da017d6cd35d4b6
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 03:52:19 2011 +0000

    whitespace

commit 02479cacb5b6e4bd79205292b7d0a4da99f63971
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 03:48:46 2011 +0000

    whitespace

commit 47b4c27f8c11d6d82712b8ab117338e19953cdf7
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 03:44:36 2011 +0000

    whitespace and comments

commit d47f958456f8db0343f890d8c3ab8f19a442e7d7
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 01:56:26 2011 +0000

    Rename key to keymacro to avoid conflicts with term.h. The renaming of term
    to terminal was again to avoid conflicts with term.h. term.h is a moving
    namespace violation.

commit 8cf227343c21df62bc9b4038597e174da248c48d
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 01:08:58 2011 +0000

    - check and don't cast malloc return
    - more wide function use

commit 98c7cbebbcaeb371b1414601cdbc2018ccd2c349
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 01:05:20 2011 +0000

    term -> terminal
    XXX: need to rename key_ too.

commit 78cb86e0640bc470e0dc8be96d93e07aae935fb0
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 01:05:00 2011 +0000

    regen

commit fd46b57ee4d25bcf949c39ead08738c7f4d80f7b
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 01:04:41 2011 +0000

    avoid shadowed variable

commit 5fc21e973615bdc8f8c95400b9a26147e6332030
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 00:54:26 2011 +0000

    use vis.h from .

commit b2105969442ec75fbec91eba0a771f72c1f7339e
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 00:50:23 2011 +0000

    eliminate alloca for portability
    portable getpw{nam,uid}

commit 82edb784c6d473fc4f2230d688e161330b5c2d36
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 00:49:18 2011 +0000

    term -> terminal
    eliminate MAXPATHLEN

commit 0c0f23399cb2b72239d577af0152b2d070b6cca5
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 00:48:21 2011 +0000

    - fix memory allocation botch in wide strings
    - check mbstowcs return code

commit e63c844a17cb0c939494a65518fcd3dbc5940f73
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 00:45:50 2011 +0000

    term -> terminal

commit 885062da0bd906b3dca70237143defa84f798702
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 00:45:30 2011 +0000

    more portability defines

commit c2c011fc825f09349c21024612610f0f22cb47a6
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 00:45:14 2011 +0000

    term -> terminal

commit adb2121e551ae3f430c99df484028bd67a0013aa
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 00:44:35 2011 +0000

    term -> terminal
    fix wide function confusion

commit f375da6e14c08b4e55b8f0583a63ad18b906b06d
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 00:43:53 2011 +0000

    include config.h for all c files.

commit b723d6a65caf8abcf42e64366f722c577332b4b8
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 00:43:33 2011 +0000

    include vis.h from dot.

commit df2309ca73f9bfb37ad24eaf06dd818eaec559a1
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 28 00:43:12 2011 +0000

    fix confusion with wide functions.

commit 5bf2e3dbdaba86222e12604343ef435d1d185693
Author: christos <christos@NetBSD.org>
Date:   Wed Jul 27 13:18:20 2011 +0000

    fix narrow compilation

commit 32d7653d7459a7729c21eb5449f2caf64b93c100
Author: christos <christos@NetBSD.org>
Date:   Wed Jul 27 02:23:29 2011 +0000

    - don't leave cursor dangling on memory failure or after clearing the list
    - compute the string length to be strvis'ed after the string is encoded

commit c76d71fc1aeaa21f58b917c26d1991ffb550fda5
Author: christos <christos@NetBSD.org>
Date:   Wed Jul 27 02:18:30 2011 +0000

    fix buffer growing code.

commit 0da54e076efde45b1c209da2209599481a155a9e
Author: christos <christos@NetBSD.org>
Date:   Wed Jul 27 02:18:00 2011 +0000

    add history testing code.

commit 3021376b9c8b2c5d40d14c6137be73f408fb5c6b
Author: christos <christos@NetBSD.org>
Date:   Tue Jul 26 21:03:17 2011 +0000

    don't stop reading after empty lines from: Nirbhay Choubey

commit 047570cb9a5d657c77f65ee490c93cbb21b62fb3
Author: christos <christos@NetBSD.org>
Date:   Sat Jul 9 23:54:39 2011 +0000

    make obvious what we are trying to do...

commit f5c0fd2c7b0461ab9ec671af26b13c2ee95549e8
Author: tron <tron@NetBSD.org>
Date:   Sat Jul 9 16:04:34 2011 +0000

    Try to fix build of port where "char" is unsigned.

commit c6c51b75ebb2e74176cf26eca51ffd71cb297aea
Author: christos <christos@NetBSD.org>
Date:   Fri Jul 8 15:54:56 2011 +0000

    Support other non-latin1 single byte character sets.
    From: Alexander Barkov and Nirbhay Choubey at oracle dot com

commit 0a0dd75b65989e03d8268ca7adb27369c89dce49
Author: mrg <mrg@NetBSD.org>
Date:   Tue Jun 21 02:32:55 2011 +0000

    add some XXX'd -Wno-foo if HAVE_GCC >= 45.
    
    XXX: someone should look at these.

commit 493d34104827f85a7b74c37bea6c812f61643de7
Author: mrg <mrg@NetBSD.org>
Date:   Mon Jun 20 09:11:16 2011 +0000

    various build fixes for gcc 4.5.  from chuq.  XXX i'm not sure all of
    these work properly wtf pointer aliasing, but there are no casts at
    least...
    
    the lib/libpuffs/puffs_priv.h is definately a real bug fix.
    
    from chuq.

commit d489035474f82e46bc0daa1934bbdcec250e8d56
Author: wiz <wiz@NetBSD.org>
Date:   Mon Apr 25 22:47:27 2011 +0000

    Markup consistency, from YOMURA Masanori. Add serial comma.

commit 6d537d731360880203618aeedbdd4d3a8cb40092
Author: bouyer <bouyer@NetBSD.org>
Date:   Sun Mar 20 12:36:14 2011 +0000

    Fix use-after-free. Discovered by running tests with MALLOC_OPTIONS=J
    (should this be the default for tests ?), pointed out by njoly@

commit c0ee15527107b1e3536e0eea32652a1eac918344
Author: christos <christos@NetBSD.org>
Date:   Sun Feb 27 01:51:37 2011 +0000

    Fix argument for EL_EDITOR from Jess Thrysoee

commit 9674b81ed919245c6e325e26eb1c2397bd3de117
Author: joerg <joerg@NetBSD.org>
Date:   Tue Feb 22 05:45:05 2011 +0000

    Introduce __weakref_visible to handle the different required visibility
    for weak references. GCC 4.2+ and Clang require static, older GCC wants
    extern. Change __weak_reference to include sym. This requires changes
    the existing users to not reuse the name of the symbol, but avoids
    further differences between GCC 4.1 and GCC 4.2+/clang.

commit 01d6c84859ee652da0d7b24fb15e4ad467d1d0c3
Author: christos <christos@NetBSD.org>
Date:   Fri Feb 18 20:53:05 2011 +0000

    PR/44599: Steven Vernon: libedit acts as if no data read if editmode is turned
    off because nread is uninitialized in the edit disabled case.

commit 6f7bc0c1edc604bbe77e541de0ac4d9ae647ec25
Author: joerg <joerg@NetBSD.org>
Date:   Thu Feb 17 16:44:48 2011 +0000

    Deal with changes in the weak_reference semantic in GCC 4.2 and later.

commit 28ef40ccbd83ca3e35eeef0536f8b8f4ca2fe408
Author: christos <christos@NetBSD.org>
Date:   Fri Jan 28 03:41:52 2011 +0000

    fix pasto

commit b2ce31d086532912671f5aa66860e1ded2da9765
Author: christos <christos@NetBSD.org>
Date:   Thu Jan 27 23:11:40 2011 +0000

    don't turn on editing if stdout is not a tty.

commit 7350622ee8503d14e04d8478dba5dfd2d8aff5f7
Author: christos <christos@NetBSD.org>
Date:   Sun Jan 16 03:05:51 2011 +0000

    off by one in fetching history data. From: Gerry Swislow

commit 3d3c5d42cb3aa0851ce2ca1303fdf134c850987c
Author: wiz <wiz@NetBSD.org>
Date:   Thu Dec 16 17:42:25 2010 +0000

    Observe the following spelling:
    - wide character (noun)
    - wide-character (adjective)
    
    Inspired by jmc@OpenBSD.

commit eb1ab8ee50791ec295b4034f5a5a72aa9f6ab34c
Author: dholland <dholland@NetBSD.org>
Date:   Mon Dec 6 00:05:38 2010 +0000

    Improve previous to avoid changing the interface of an externally
    exposed function. (But note that this function is neither documented
    nor declared in any installed header file, and it probably should not
    be externally exposed.) Related to PR 44183, closes PR 44186.

commit 574c2fc5a2b997d2a0251cfc693c9c326017f823
Author: dholland <dholland@NetBSD.org>
Date:   Thu Dec 2 04:42:46 2010 +0000

    add const, from PR 44183.

commit 92417c82c1b8ad2827a5a2e452e6cba96208894c
Author: dholland <dholland@NetBSD.org>
Date:   Thu Dec 2 04:35:17 2010 +0000

    Fix up bodgy code for printing completion matches; it used to sometimes
    skip entries, print (null), run off the end of the array, or occasionally
    receive SIGSEGV, and now will, hopefully at least, do none of that.
    
    Based in part on the patch in PR 44183 from Sergio Acereda; I also
    did some tidyup and fixed it to print top-to-bottom first like ls(1).

commit a85c37d8d9a29e6f09731cd8c2e5a61e09c754fa
Author: christos <christos@NetBSD.org>
Date:   Mon Nov 15 21:24:31 2010 +0000

    don't increment i twice in the loop. From Michael Byrnes

commit 9bc86f7706a95cd33efb711b6148b8d905225d8d
Author: christos <christos@NetBSD.org>
Date:   Thu Nov 4 13:53:12 2010 +0000

    PR/43998, PR/44021: In narrow history emulation, don't treat UTF-8 character
    sets specially as far as history goes since we always need to do the conversion
    from narrow [history] to wide [editline].

commit f70a466a92204e446011e46069fd9177e0561f73
Author: christos <christos@NetBSD.org>
Date:   Sat Oct 23 23:27:40 2010 +0000

    fix fd leak found by Igor Zinovik

commit b3543150333a5931f9756946b8e23f58008f4db0
Author: christos <christos@NetBSD.org>
Date:   Thu Sep 16 20:08:51 2010 +0000

    unbreak readline history.

commit 7741aae9410236ca88a604f1f817ea69e1d9407c
Author: christos <christos@NetBSD.org>
Date:   Sat Aug 28 15:44:59 2010 +0000

    setup a callback to be invoked on resize buffers so that readline can
    reset rl_line_buffer which unfortunately some applications use it directly.

commit 6e1c968db342f4599a40b0bd90c4fe28bea0870a
Author: christos <christos@NetBSD.org>
Date:   Wed Aug 4 20:29:18 2010 +0000

    provide rl_on_newline

commit 0ccb4e68f899441a88f3bd62afd50978e87eed73
Author: christos <christos@NetBSD.org>
Date:   Wed Jul 21 18:18:52 2010 +0000

    refresh only on SIGCONT not SIGWINCH from Edward Sheldrake

commit c157529bebe74b4ff9ff194483efb3dbdec4c343
Author: christos <christos@NetBSD.org>
Date:   Mon Jul 19 17:18:13 2010 +0000

    retry the read after sigwinch too, from Edward Sheldrake

commit cbd798c94ba7e6b45beb7735d552f4a482d65636
Author: christos <christos@NetBSD.org>
Date:   Tue Jun 1 18:20:26 2010 +0000

    tidy up memory allocation and don't unnecessarily print "./" before names.

commit ca8b6091c1ea802eb135fc6c737290cc71617742
Author: christos <christos@NetBSD.org>
Date:   Tue Apr 20 02:01:13 2010 +0000

    Use the same hack for Solaris and MacOS/X. This is not right, we only really
    support UTF-8, but it will get us going until this is fixed properly.
    From Jess Thrysoee

commit 72c00e4a7aadae05f2eb9c3a81ce5987456a5ce6
Author: christos <christos@NetBSD.org>
Date:   Sun Apr 18 21:17:47 2010 +0000

    \033 is more portable than \e still.

commit df810c5405100a8f7348277e439140c74f1a5a11
Author: christos <christos@NetBSD.org>
Date:   Sun Apr 18 21:17:22 2010 +0000

    ffs needs strings.h

commit d29e2500740da6ebf83746e0037d73be680b79be
Author: christos <christos@NetBSD.org>
Date:   Sun Apr 18 21:17:05 2010 +0000

    shame on solaris that is the last OS not supporting $()

commit 839bac947e652c79141a6ebac723e52784020894
Author: christos <christos@NetBSD.org>
Date:   Thu Apr 15 00:57:33 2010 +0000

    From Jess Thrysoee
        - Fix wint_t to Int confusion

commit 5443e9b772e898ef857756bdddeada2388cf6bfb
Author: christos <christos@NetBSD.org>
Date:   Thu Apr 15 00:56:40 2010 +0000

    From Jess Thrysoee
       - use nl_langinfo to test for UTF-8, because some locales are UTF-8 without
         reflecting it in their names.

commit a5b37ffc65a0d3b67088040a362ec76cc620ae7b
Author: christos <christos@NetBSD.org>
Date:   Thu Apr 15 00:55:57 2010 +0000

    From Jess Thrysoee
            expose ct_enc_width()

commit 939651fa2bebb906fdb534b36add4c7cb48261a9
Author: christos <christos@NetBSD.org>
Date:   Thu Apr 15 00:52:48 2010 +0000

    From Jess Thrysoee
    - NARROW_HISTORY and IGNORE_EXTCHARS should not take effect if locale is UTF-8
    - account for multi byte char length in

commit b77d4fa5c59d950c53b16eb257792a2cb3018b2c
Author: christos <christos@NetBSD.org>
Date:   Thu Apr 15 00:50:46 2010 +0000

    From Jess Thrysoee: call setlocale so we can test UTF-8

commit a9dd944f6bd98341fca70d0b17ef9f6e2aa703d3
Author: christos <christos@NetBSD.org>
Date:   Thu Apr 15 00:50:03 2010 +0000

    From Jess Thrysoee: add ifndef around def of _GNU_SOURCE

commit f57614707345159ff3a74d9731563e9171de7d55
Author: christos <christos@NetBSD.org>
Date:   Mon Mar 22 22:59:06 2010 +0000

    https://bugzilla.redhat.com/show_bug.cgi?id=575383
    Handle EINTR properly.

commit 98eb889579a5572baa8ffa4149f58180870bc0ce
Author: roy <roy@NetBSD.org>
Date:   Wed Feb 3 15:34:37 2010 +0000

    Userland now builds and uses terminfo instead of termcap.
    
    OK: core@, jdc@

commit 6fbbcd94ce43e80bd3bf1405127196a28d89d8fa
Author: christos <christos@NetBSD.org>
Date:   Wed Jan 20 01:15:52 2010 +0000

    PR/42646: Joachim Kuebart: Shell crashes in libedit when window size changes
    (SIGWINCH). Return NULL if el_gets() gets interrupted.

commit 654f9c04e7a8f8b0eaffb6b60a0dbe75f61874bc
Author: christos <christos@NetBSD.org>
Date:   Tue Jan 19 22:38:08 2010 +0000

    Fix wrapper for EL_EDITOR, from Michael L. Hitch

commit 081c24c7028e07ca2d7db8acd6bef8374b55b013
Author: christos <christos@NetBSD.org>
Date:   Mon Jan 18 19:17:42 2010 +0000

    PR/42637: Joachim Kuebart: Shell tab completion crashes due to libedit stack
    smashing

commit 139d3d5a3b907428faa44e47951a4c420e429d06
Author: christos <christos@NetBSD.org>
Date:   Tue Jan 12 19:40:50 2010 +0000

    - call the mapping function directly instead of el_wset().
    - save the strings passed to the mapping function so that they don't get
      re-used. This leaks. To fix it properly we could either pass a flag to
      free particular entries before re-using, or allocate all of them.
      Allocating all of them wastes memory, allocating some of them makes
      the code more complex.
    This fixes compatibility binding (shell tab completion for example)

commit c9043bbf6e152da014eaf690847ae29922875268
Author: christos <christos@NetBSD.org>
Date:   Tue Jan 12 19:37:18 2010 +0000

    - in the argv conversion, handle NULL as NULL
    - when printing tab/nl print them, don't handle them specially.

commit 0d3270a1695088c036d594ea9c26a89215ff61d7
Author: wiz <wiz@NetBSD.org>
Date:   Sun Jan 3 19:05:26 2010 +0000

    Bump date for historyw -> history_w.

commit 73eda9fe273ed009ce37d5b879efb739d08962e7
Author: christos <christos@NetBSD.org>
Date:   Sun Jan 3 18:27:10 2010 +0000

    rename historyw -> history_w for consistency.
    add wide tst code and make it the default.

commit 4168f34493f98a66dcc17f0ed396dd75b3247550
Author: christos <christos@NetBSD.org>
Date:   Thu Dec 31 18:32:37 2009 +0000

    expose the encode and decode string functions for the benefit of history
    and readline.

commit dc8498bec837de4f00fc34a15b52694eb8d83946
Author: christos <christos@NetBSD.org>
Date:   Thu Dec 31 15:58:26 2009 +0000

    - Document and enable wide character support.
    - Fix read function compatibility.

commit 0b9ae3fdf09ab1cbe5785cc2f556baeedbb11719
Author: christos <christos@NetBSD.org>
Date:   Wed Dec 30 23:54:52 2009 +0000

    Fix wide build, test it, but don't turn it on yet.

commit 34e53048e6f83f8e7e8303aec85dae23817d82a4
Author: christos <christos@NetBSD.org>
Date:   Wed Dec 30 22:37:40 2009 +0000

    Wide character support (UTF-8) from Johny Mattsson; currently disabled.

commit 8106943a021e62b38d69432994492da87c598d4d
Author: christos <christos@NetBSD.org>
Date:   Mon Dec 28 22:15:36 2009 +0000

    reduce diff with tcsh

commit b90e7198e7218171bb866d1aadfa79c77d179ef8
Author: christos <christos@NetBSD.org>
Date:   Mon Dec 28 21:55:38 2009 +0000

    improve on the listing display by printing only one character after the
    filename not two, and no trailing blanks. I will revisit this when I write
    the ls-F code.

commit c8b67cd8d5690a79cdfef16d23a2cb473d6d6bf5
Author: christos <christos@NetBSD.org>
Date:   Mon Dec 28 21:54:21 2009 +0000

    Reduce diff with tcsh's editor. No functional change intended.

commit 969676ec742a8de3606a1056599a92002bad0f00
Author: christos <christos@NetBSD.org>
Date:   Mon Dec 28 21:52:43 2009 +0000

    Fix bug where tab completion on the second or > line that caused listing
    ended up corrupting the display by an extra space in the beginning. Reported
    by Mac Chan.

commit ea3813ed2f852b37bba3ec28518474d56fdd50b6
Author: christos <christos@NetBSD.org>
Date:   Mon Sep 7 21:24:33 2009 +0000

    apply apple patches from:
    http://opensource.apple.com/source/libedit/libedit-11/patches/

commit 461d0372fdc7dd15b4b9c8cf30e997fd82029e3d
Author: christos <christos@NetBSD.org>
Date:   Mon Aug 31 00:05:43 2009 +0000

    delete defined(sun), it could be invaded in the user namespace. Suggested
    by mrg@

commit 5aa87ec494e00b140111e827bd17caef51e5913a
Author: christos <christos@NetBSD.org>
Date:   Sun Aug 30 15:41:05 2009 +0000

    use __sun || sun instead of _SunOS, from Jess Thrysoee

commit 085c78fd1f7b207bdb841b15b97e31ba888da90f
Author: christos <christos@NetBSD.org>
Date:   Sat Jul 25 21:19:23 2009 +0000

    Ignore comment lines in .editrc from Jess Thrysoee

commit bafe66c2cc1b50d8b268bd4eafb989c123df7961
Author: christos <christos@NetBSD.org>
Date:   Wed Jul 22 18:25:26 2009 +0000

    Only need path if we have issetugid... From Anon Ymous

commit e304eddfd2f18a886ad536ed7bf65c76d3d9b6b6
Author: christos <christos@NetBSD.org>
Date:   Wed Jul 22 15:58:09 2009 +0000

    Don't depend on side effects inside an assert
    From Michael Cook mcook at bbn dot com

commit cfa16c63695e87c91a8475f6ba7cc80a351b21f2
Author: christos <christos@NetBSD.org>
Date:   Wed Jul 22 15:57:40 2009 +0000

    Fix memory leaks in error paths.
    From Michael Cook mcook at bbn dot com

commit 83965485c1563222a7ef7825016dbae97338feed
Author: christos <christos@NetBSD.org>
Date:   Wed Jul 22 15:57:00 2009 +0000

    Always initialize nread since it is an out param.
    From Michael Cook mcook at bbn dot com

commit 17a17e3aeb9528767aade4d85e230ea5b96f4d00
Author: christos <christos@NetBSD.org>
Date:   Wed Jul 22 15:56:29 2009 +0000

    Move filename to the scope it is being used.
    From Michael Cook mcook at bbn dot com

commit cfb4e5f91797d28eb2a5c8d6419d53aa8710d803
Author: christos <christos@NetBSD.org>
Date:   Fri Jul 17 12:28:27 2009 +0000

    Simplify the code. No functional change.

commit e2d0108bb831bf2ab2805be364d89ba9313b8aa7
Author: christos <christos@NetBSD.org>
Date:   Fri Jul 17 12:27:57 2009 +0000

    - off by one in the term.h case.
    - make code more similar to tcsh (if we want to handle wide chars, this is
      needed; for now it is a no-op)

commit 59a88754a7b09f26f82dde5074869f759812d253
Author: christos <christos@NetBSD.org>
Date:   Fri Jul 17 12:26:26 2009 +0000

    handle prompt_esc properly.

commit 537657ed4588612c12a733573797cb8dfc715a94
Author: christos <christos@NetBSD.org>
Date:   Fri Jul 17 12:25:52 2009 +0000

    Use the proper prompt printing function.

commit 8e714f4b6eae73e3ccc1388e7125e51bed092c89
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 9 19:02:04 2009 +0000

    add stdio.h since we are using FILE. From Grant Erickson

commit eb247ff73970b405cc22055a7dcca667bd812df5
Author: perry <perry@NetBSD.org>
Date:   Sun Jul 5 21:55:24 2009 +0000

    note that the return value of el_gets doesn't remain valid across
    calls.

commit 287bd180494aeeae88a510935498336c8da73383
Author: christos <christos@NetBSD.org>
Date:   Tue Jun 9 13:04:33 2009 +0000

    decrement the number of levels after the loop (Julien Torres)

commit e55354196b32505cddb98fbd64b11accd8a92e1e
Author: christos <christos@NetBSD.org>
Date:   Mon Jun 8 15:10:53 2009 +0000

    from Julien Torres, flip the order we pop in the macro array.

commit 189ce7898b5014ff3c1ec96bacbd7b3774ffb80f
Author: christos <christos@NetBSD.org>
Date:   Tue May 19 21:45:14 2009 +0000

    always scroll when we advance past bottom. From Caleb Welton
    cwelton at greenplum dot com

commit 35cf287cb8a6b4f951f9f865dfd445bf036f42a3
Author: wiz <wiz@NetBSD.org>
Date:   Tue May 12 08:14:07 2009 +0000

    Punctuation nit.

commit b627b61f7fcf2e1efb9df23f3acabc2278013a5d
Author: christos <christos@NetBSD.org>
Date:   Mon May 11 18:33:30 2009 +0000

    restore binary compatibility by providing new prompt functions that take
    an extra literal character.

commit b203bfe74fbf24259a8fd51c79cea9047bef6961
Author: christos <christos@NetBSD.org>
Date:   Thu Apr 16 19:39:37 2009 +0000

    PR/41230: -current: sh(1) endlessly looping in interactive
    Fix proposed from Matthew Mondor

commit 55a1b57943bbffbe585f0d05a9857acba01e63dc
Author: wiz <wiz@NetBSD.org>
Date:   Sat Apr 11 22:17:52 2009 +0000

    Drop trailing whitespace.

commit dab0ac3098dce8486dc13f154acbbc21f3162458
Author: joerg <joerg@NetBSD.org>
Date:   Sat Apr 11 20:53:15 2009 +0000

    Don't use .Xo/.Xc to work around ancient macro argument limit in groff.

commit 22ce33e2aad624da2b3abca80777d7ac65d83739
Author: joerg <joerg@NetBSD.org>
Date:   Sat Apr 11 20:48:26 2009 +0000

    Don't use .Xo/.Xc to avoid ancient macro argument limit.

commit 46db7d011d7a801f695a317db00a17480c9aed54
Author: christos <christos@NetBSD.org>
Date:   Wed Apr 8 21:31:31 2009 +0000

    Fix off by one error reported by:  Caleb Welton cwelton at greenplum dot com

commit 3a9e7e68ee24473284cf99e447b0fd050ee0c3d2
Author: wiz <wiz@NetBSD.org>
Date:   Wed Apr 1 08:58:47 2009 +0000

    Readability improvement. Whitespace nits.

commit 097860c04e4952ba1806ea13d883d88bd3c2f97e
Author: christos <christos@NetBSD.org>
Date:   Tue Mar 31 21:33:17 2009 +0000

    cast to size_t to avoid sign / unsigned comparison warning.

commit e6ec3d065cc04727ae7c9511ceecab2f9754ebc6
Author: christos <christos@NetBSD.org>
Date:   Tue Mar 31 17:53:03 2009 +0000

    implement RL_PROMPT_{START,END}_IGNORE

commit c8754a5b44108dcc32d67b214f3ddaeec4f75149
Author: christos <christos@NetBSD.org>
Date:   Tue Mar 31 17:38:27 2009 +0000

    Implement literal prompt sequences. Now someone can implement
    RL_PROMPT_START_LITERAL/RL_PROMPT_END_LITERAL :-)

commit 097d2fd1a60ee64f800d64fafa7eb897ae8137fb
Author: wiz <wiz@NetBSD.org>
Date:   Tue Mar 10 22:55:14 2009 +0000

    -1 is not a defined value, it is just a value.
    On the other hand, minuses need backslashes, otherwise they become hyphens.

commit ae87843e53bef49f66cbff25ca1ab8b28be7ec5d
Author: christos <christos@NetBSD.org>
Date:   Tue Mar 10 20:46:15 2009 +0000

    make el_gets set the count to -1 on error to distinguish between EOF and
    error.

commit 997634fe1470bb1edef8e5d52fc996f52c9c958f
Author: joerg <joerg@NetBSD.org>
Date:   Mon Mar 9 19:24:26 2009 +0000

    Fix preamble to match order set out by mdoc(7). Discussed with wiz.

commit 150e7551ecee73fe55c5371fd5dfb79444a35453
Author: msaitoh <msaitoh@NetBSD.org>
Date:   Fri Feb 27 04:18:45 2009 +0000

    fix mis-evaluating whether a char is digit or not.

commit 07e886c39cfa522a1984bfa8efc240b819afe0fd
Author: christos <christos@NetBSD.org>
Date:   Sat Feb 21 23:35:10 2009 +0000

    remove VEOF test. the tty is in cooked mode when we are not editing and
    the tty driver does the check for us.

commit 954af9bb678db8f3606a051f0f73d263f0522efa
Author: christos <christos@NetBSD.org>
Date:   Sat Feb 21 23:31:56 2009 +0000

    more size_t stuff.

commit 41907725b681efa00f27b75c4722e7fd1c5e919a
Author: christos <christos@NetBSD.org>
Date:   Sat Feb 21 23:31:29 2009 +0000

    use the VEOF character from the terminal, instead of hard-coding 4.

commit 6c890a79832a62fb71e010156e46babfcc0764dd
Author: wiz <wiz@NetBSD.org>
Date:   Sat Feb 21 07:58:58 2009 +0000

    Restore markup changes (probably accidentally) reverted in previous.

commit c51877c3f4d9ec58015e5f2146779578690ab82d
Author: christos <christos@NetBSD.org>
Date:   Sat Feb 21 00:05:23 2009 +0000

    back out all prompt changes. they are not needed.

commit 0931c75c7a8e9a5cf53dca87be45ead79825bcc8
Author: cube <cube@NetBSD.org>
Date:   Thu Feb 19 20:27:11 2009 +0000

    Order of evaluation of arguments is undefined, so call va_arg() in an
    explicit order.  Fixes a segfault with bc reported by Patrick Welche on
    current-users.

commit e8bbf84cd0cc306b5c6a06f089e83946ced63a7f
Author: christos <christos@NetBSD.org>
Date:   Thu Feb 19 15:20:22 2009 +0000

    reset and redraw on sigcont. From Anon Ymous.

commit dfe59495b17eed706c5f5a136585357bfb1dcb38
Author: wiz <wiz@NetBSD.org>
Date:   Thu Feb 19 09:48:08 2009 +0000

    Fix wordo, use more markup.

commit f072c3f1a4402554b5674e55ee53f7a7222edaa2
Author: christos <christos@NetBSD.org>
Date:   Thu Feb 19 01:18:24 2009 +0000

    bump version for prompt arg.

commit 963ecab70cbc385cab6e9364c0968668d7c5987e
Author: christos <christos@NetBSD.org>
Date:   Thu Feb 19 01:18:02 2009 +0000

    document extra argument.

commit ec70918ed3b5ec4707a3b964b16b3e95ad29b68f
Author: christos <christos@NetBSD.org>
Date:   Wed Feb 18 15:04:40 2009 +0000

    SA_RESTART for all signals but SIGINT. From Anon Ymous.

commit 62dbbc55bc7793439cdc7067072d821a8db2f57e
Author: christos <christos@NetBSD.org>
Date:   Tue Feb 17 21:34:26 2009 +0000

    allow for a prompt argument.

commit 7939d24e16e882be35f1abe6c0d2d404efa97e39
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 16 00:15:45 2009 +0000

    fix sign compare issues.

commit 5c894153a3d55adb49f987707dd52098dc8b7fd1
Author: christos <christos@NetBSD.org>
Date:   Sun Feb 15 21:55:23 2009 +0000

    pass lint on _LP64.

commit d25b6758edae917430e9d55104443abefd3b9bae
Author: christos <christos@NetBSD.org>
Date:   Sun Feb 15 21:25:01 2009 +0000

    in order for read() to return EINTR we need to use sigaction, not signal,
    otherwise SA_RESTART is set.

commit 6ed9cd5e693fe9353e2cb8e9673d01c2dd1d051d
Author: christos <christos@NetBSD.org>
Date:   Sun Feb 15 21:24:13 2009 +0000

    don't restart on EINTR, instead return NULL immediately. From Anon Ymous

commit fc16547f5e147a4ebbb9591a3c5af855acdf1c11
Author: sketch <sketch@NetBSD.org>
Date:   Thu Feb 12 13:39:49 2009 +0000

    More fixes for existing portability stuff.

commit 2157800b5b074c0da3ba4e53746582f97147493a
Author: sketch <sketch@NetBSD.org>
Date:   Fri Feb 6 20:08:13 2009 +0000

    SUNOS is spelt __SunOS.  Add missing prototypes.

commit 957effbd58788718bd016a6fdd0a621cd29d1584
Author: sketch <sketch@NetBSD.org>
Date:   Fri Feb 6 19:53:23 2009 +0000

    Needs errno.h

commit fe96b18c3f0b4d47fb9807c4580658c4849a6599
Author: sketch <sketch@NetBSD.org>
Date:   Fri Feb 6 14:40:32 2009 +0000

    Plug memory leak, from MySQL.

commit 5e72d51013584f2a5cc0385918892e169b763fb6
Author: sketch <sketch@NetBSD.org>
Date:   Fri Feb 6 13:14:37 2009 +0000

    Portability fix.

commit fe3391bda51c83bdd8afb626ae9488b7752332a4
Author: sketch <sketch@NetBSD.org>
Date:   Fri Feb 6 12:45:25 2009 +0000

    de-__P()

commit 1dc5f9b89b0c2147f7e4360e58b2566a429ff4e8
Author: christos <christos@NetBSD.org>
Date:   Thu Feb 5 19:15:44 2009 +0000

    match documentation in el_push

commit d052ee7b7f8dafce40d1e170319607cb04ee4963
Author: christos <christos@NetBSD.org>
Date:   Thu Feb 5 19:15:26 2009 +0000

    add rl_set_prompt

commit 69a442fa500d0ae0083571a547a896a8620dc0bb
Author: apb <apb@NetBSD.org>
Date:   Mon Jan 26 17:32:41 2009 +0000

    Define HAVE_STRUCT_DIRENT_D_NAMLEN in config,h, and test it when
    deciding whether to use entry->d_namlen or strlen(entry->d_name).
    Addresses PR 40477 by Robert Millan.

commit c17aaf60c9561167c23a38b98e180fbfab62538d
Author: lukem <lukem@NetBSD.org>
Date:   Sun Jan 18 12:17:49 2009 +0000

    WARNS=4

commit a06595c27ba4f4ed85d2b4202f741dd344ceee2c
Author: lukem <lukem@NetBSD.org>
Date:   Sun Jan 18 12:14:16 2009 +0000

    fix -Wsign-compare issues

commit 2d18fd40a77d5b4b55eec1b1c4995df43370ced5
Author: christos <christos@NetBSD.org>
Date:   Sun Jan 11 15:00:23 2009 +0000

    - insert a space after the recognized string if it was an exact match
    - initialize properly the string used for completion.
    From Alex Bligh alex at alex dot org dot uk
    - Make char constants consistent

commit 46edb91e9fa9e3bc872d80bfcb8d2f823aff61a7
Author: christos <christos@NetBSD.org>
Date:   Sun Jan 11 03:07:47 2009 +0000

    bump shared libraries.

commit e56ab6501a9057fc7f7fbda545e7afce4b0b55b1
Author: aymeric <aymeric@NetBSD.org>
Date:   Tue Sep 30 08:37:42 2008 +0000

    have '$' include the last character in the line when embedded in a command.
    This fixes c$, d$, y$, and so on in vi mode.

commit 872a7369cce7c4b5eba5f46d4e8f98373dab0f55
Author: christos <christos@NetBSD.org>
Date:   Wed Sep 10 15:45:37 2008 +0000

    Allow a single process to control multiple ttys (for pthreads using _REENTRANT)
    using multiple EditLine objects. Mostly from Preston A. Elder.

commit 365dab42f3e6fec077cfec76e28648a8201e756b
Author: christos <christos@NetBSD.org>
Date:   Wed Jul 30 13:00:46 2008 +0000

    handle EINTR in the termios operations, reported by the GHC folks

commit df0a282e5222735791db78492c56514c02b41674
Author: christos <christos@NetBSD.org>
Date:   Sat Jul 12 15:27:14 2008 +0000

    Don't bother with SIGSTOP it cannot be caught or ignored. From Jess Thrysoee

commit 11a6dbe72840351315e0652b2fc6663628c84cad
Author: martin <martin@NetBSD.org>
Date:   Wed Apr 30 13:10:46 2008 +0000

    Convert TNF licenses to new 2 clause variant

commit 3028e483e4ef836741029ab781da4462ae95176b
Author: martin <martin@NetBSD.org>
Date:   Tue Apr 29 06:53:00 2008 +0000

    Convert to new 2 clause license

commit 4652e1fb8f760d09ebc7b830da0c1c0e9bdbfdf5
Author: christos <christos@NetBSD.org>
Date:   Sat Apr 5 23:53:26 2008 +0000

    bump minor.

commit 0cb4d42e166dcb592adf4426c078bbbdf8641c7f
Author: christos <christos@NetBSD.org>
Date:   Sat Apr 5 15:53:28 2008 +0000

    add EL_REFRESH for the benefit of readline

commit 3bbc95f39d18b15b17c91921f76686835e0c5651
Author: christos <christos@NetBSD.org>
Date:   Fri Apr 4 21:18:34 2008 +0000

    Add rl_forced_update_display() from Gerry Swislow

commit 5f3802ca6e075c41a8b1c3832a3b6471ef294064
Author: christos <christos@NetBSD.org>
Date:   Sun Aug 12 07:41:51 2007 +0000

    patches from Axel Thimm

commit 07186f02e288c9225f93c88797cbe9509cb09334
Author: christos <christos@NetBSD.org>
Date:   Sun Jun 10 20:20:28 2007 +0000

    Fix tab/space confusion; from Stefan Farfeleder

commit 4147a3c54a369fdf2775e8a91ce4916614e21d3b
Author: tls <tls@NetBSD.org>
Date:   Mon May 28 12:06:17 2007 +0000

    Add new Makefile knob, USE_FORT, which extends USE_SSP by turning on the
    FORTIFY_SOURCE feature of libssp, thus checking the size of arguments to
    various string and memory copy and set functions (as well as a few system
    calls and other miscellany) where known at function entry.  RedHat has
    evidently built all "core system packages" with this option for some time.
    
    This option should be used at the top of Makefiles (or Makefile.inc where
    this is used for subdirectories) but after any setting of LIB.
    
    This is only useful for userland code, and cannot be used in libc or in
    any code which includes the libc internals, because it overrides certain
    libc functions with macros.  Some effort has been made to make USE_FORT=yes
    work correctly for a full-system build by having the bsd.sys.mk logic
    disable the feature where it should not be used (libc, libssp iteself,
    the kernel) but no attempt has been made to build the entire system with
    USE_FORT and doing so will doubtless expose numerous bugs and misfeatures.
    
    Adjust the system build so that all programs and libraries that are setuid,
    directly handle network data (including serial comm data), perform
    authentication, or appear likely to have (or have a history of having)
    data-driven bugs (e.g. file(1)) are built with USE_FORT=yes by default,
    with the exception of libc, which cannot use USE_FORT and thus uses
    only USE_SSP by default.  Tested on i386 with no ill results; USE_FORT=no
    per-directory or in a system build will disable if desired.

commit 2d9dad6f00f5357c54f91189fd2eea48037b87d0
Author: christos <christos@NetBSD.org>
Date:   Sun May 27 19:45:37 2007 +0000

    Add rl_completion_matches, fix remove_history

commit bd6c2075f11aad347e2b64f5f21ce72d03160196
Author: christos <christos@NetBSD.org>
Date:   Thu Mar 1 21:41:45 2007 +0000

    Fix bug with multiple pending el_pushes. Reported by Julien Torres.

commit 754eed8af31230d92e3b727a7e07fba88b2391aa
Author: christos <christos@NetBSD.org>
Date:   Fri Jan 12 16:31:13 2007 +0000

    PR/35411: Matthew Wala: inconsistency in editline(3): rename "num" to the
    appropriate parameter names.

commit 77171fb3a03b648dc7dbc5eef0d9d96e3139afea
Author: wiz <wiz@NetBSD.org>
Date:   Mon Dec 18 00:03:43 2006 +0000

    Fix xref section. Whitespace cleanups..

commit 3a1928de28c9226c4295b1fab9868141b5e65d48
Author: christos <christos@NetBSD.org>
Date:   Fri Dec 15 22:13:33 2006 +0000

    add EL_GETFP, and EL_SETFP.

commit 37b5672028285e1b6c78ba803ecb30fcab8935e7
Author: freza <freza@NetBSD.org>
Date:   Sat Nov 25 17:54:38 2006 +0000

    s/el->errfile/el->el_errfile/g in debug code, fixes MKDEBUGLIB build.

commit 3bf701820fb6425a976d8f4072c89a4c245aa638
Author: christos <christos@NetBSD.org>
Date:   Fri Nov 24 00:03:06 2006 +0000

    bump minor.

commit 6b8a7930806c51556e0b495926925ab2624866f5
Author: christos <christos@NetBSD.org>
Date:   Fri Nov 24 00:01:17 2006 +0000

    - Add more readline functions, enough for gdb-6.5
    - Make el_get varyadic, and implement EL_GETTC.
    - XXX: the EL_SETTC api will change in the future.

commit 72301cb079c85bbb54363bac2a0d79a2a968225d
Author: christos <christos@NetBSD.org>
Date:   Thu Nov 9 16:58:38 2006 +0000

    don't use alloca with ssp.

commit d257e1e9bdc305def93ee9bf40399b9160901771
Author: mrg <mrg@NetBSD.org>
Date:   Sun Oct 22 07:48:13 2006 +0000

    __weakref__ attribute can not be applied to anything when inside function
    scope, so, move the extern of get_alias_text outside vi_alias().
    
    fixes build problems with GCC 4.1-20061021.

commit d9590bcae97ac26a738802812a359c709a37867b
Author: christos <christos@NetBSD.org>
Date:   Thu Sep 28 13:52:51 2006 +0000

    Fix memory leak found by valgrind (Julien Torres)

commit 1399def21677146ed9fd0e6fdeb0dc7b64fcf423
Author: rpaulo <rpaulo@NetBSD.org>
Date:   Thu Aug 31 20:20:38 2006 +0000

    Rename TEST/test.c to avoid problems when doing a cleandir on case-insensitive
    file systems.
    ok'ed christos.

commit f1fff5b02efcc389f710ceb294da4dd11944b92c
Author: christos <christos@NetBSD.org>
Date:   Mon Aug 21 12:45:30 2006 +0000

    Change to a 3 clause copyright after permission of the holders.

commit 213f1e24760b2b0e4fa3e5cda959471853b621b8
Author: christos <christos@NetBSD.org>
Date:   Sun Jul 23 20:21:45 2006 +0000

    PR/34062: Tanaka Akira: rl_deprep_term_function is NULL in libedit.
    Default to rl_deprep_terminal as suggested; do the same for
    rl_prep_term_function

commit 96473fa808a5f74f351e11f4f8a27ebdc78db5e1
Author: christos <christos@NetBSD.org>
Date:   Thu May 18 17:54:19 2006 +0000

    change __weak_extern to __weak_reference so that gcc4 works.

commit 5bba7270fac384fcfea5321c6fcae67e2ea69ac9
Author: christos <christos@NetBSD.org>
Date:   Sun Apr 9 01:36:51 2006 +0000

    fix debugging printf format.

commit 596eb336c9ea3f3e62ea6f2218565b5c48003813
Author: rtr <rtr@NetBSD.org>
Date:   Sat Mar 25 13:00:11 2006 +0000

    remove if/free block checking known condition
    
    coverity 2762 / run 11

commit 9363fb8b44cabe5a298fef7e1456d509325b138b
Author: christos <christos@NetBSD.org>
Date:   Thu Mar 23 20:22:51 2006 +0000

    move declaration to header file.

commit 4baec303492ba21d89d5b3f54440f4bab790d9da
Author: christos <christos@NetBSD.org>
Date:   Tue Mar 21 17:52:50 2006 +0000

    Coverity CID 2743: Not really a memory leak, but make it obvious that we
    always free tmp.

commit ec39c1a649b14ce91ecb21b9503eebc31c4ebd02
Author: christos <christos@NetBSD.org>
Date:   Sat Mar 18 19:23:14 2006 +0000

    Fix compilation.

commit 5900226fad7831b35a6a0973b3082ff23df943d3
Author: christos <christos@NetBSD.org>
Date:   Sat Mar 18 19:22:59 2006 +0000

    Lint comment.

commit a46f31170d6f1cd6fe53b4373539b21e6eb78370
Author: christos <christos@NetBSD.org>
Date:   Sat Mar 18 09:31:36 2006 +0000

    Coverity CID 1668: Plug memory leak.

commit c66ab9a1d02aeeb42c5607177cc1ed201975b679
Author: christos <christos@NetBSD.org>
Date:   Sat Mar 18 09:28:23 2006 +0000

    Coverity CID 1666: Plug memory leak.

commit c5f39d86c2e92eb1f03389456c75718003c0dbc7
Author: christos <christos@NetBSD.org>
Date:   Sat Mar 18 09:19:02 2006 +0000

    Coverity CID 1667: Plug memory leak

commit 53c1263c3737f20f57934fa20e517216f5f64483
Author: christos <christos@NetBSD.org>
Date:   Sat Mar 18 09:15:57 2006 +0000

    Coverity CID 1662: Memory leak.

commit 87113ce74bcc0aa1c8f263f70a3094a4bc7ac5e0
Author: christos <christos@NetBSD.org>
Date:   Sat Mar 18 09:09:41 2006 +0000

    Coverity CID 597: remove dead code.

commit 78f7dbe212cc9837cf09241333e5c382dcac2a96
Author: christos <christos@NetBSD.org>
Date:   Sat Mar 18 09:07:05 2006 +0000

    Coverity CID 1216: Prevent negative index use.

commit 62bb88223c40a60f3619f6700fa3f12564cec9f7
Author: christos <christos@NetBSD.org>
Date:   Sat Mar 18 09:02:08 2006 +0000

    Coverity CID 806: Prevent NULL deref

commit 230c3d4ed6efa25978379f7d6dc62b8d55d5ae93
Author: christos <christos@NetBSD.org>
Date:   Mon Mar 6 21:11:56 2006 +0000

    Print the actual eofc, instead of ^D\b\b.
    Change internal character decoding to prevent buffer oveflows.

commit 0fd1bd6295b56af992a1935f96d09e8dd424387e
Author: christos <christos@NetBSD.org>
Date:   Mon Mar 6 21:11:03 2006 +0000

    use the tty chars for reprint and eof instead of hard-coded ^R and ^D

commit 10f8fe2052a799950f75a422e646bcdade37e363
Author: christos <christos@NetBSD.org>
Date:   Mon Feb 13 14:12:04 2006 +0000

    PR/32817: Magnus Svensson: write_history and read_history returncode is not
    readline compatible.

commit fd2c82a86eb542acef707ece3d938db824357742
Author: christos <christos@NetBSD.org>
Date:   Sun Feb 12 16:15:07 2006 +0000

    Partial rl_getc_function support from Jess Thrysoee.

commit fff4889f5c4fcd6c0a4e3e85a92bc4947fac5a5e
Author: christos <christos@NetBSD.org>
Date:   Wed Nov 9 22:11:10 2005 +0000

    Refresh bug reported by Julien Torres:
    
    going from:
        activate -verbose
    to:
        reset -activation
    results in:
        reset -activationverbose"
    instead of:
        reset -activation
    
    This is because we choose to insert "reset -" before the current line,
    and the delete "e -" and insert "ion" in the appropriate place. The
    cleareol code did not handle this case properly; we now cleareol to
    the maximum number of characters of the first difference, the second
    difference and the difference in line length.

commit 41a71d99296d8b59160a1ab52a58d91d55a55806
Author: christos <christos@NetBSD.org>
Date:   Sat Oct 22 16:45:03 2005 +0000

    change tr '[a-z]' '[A-Z]' to tr '[:lower:]' '[:upper:]' so that POSIX systems
    work properly regardless of environment variable settings.

commit 59a1fe13ebacca2f1b70e147765510ad4da06d15
Author: wiz <wiz@NetBSD.org>
Date:   Wed Oct 12 09:29:43 2005 +0000

    Add el_get to SYNOPSIS. From jmc@openbsd.

commit 416b7d49ec20a914324c68c341448f72dc5e8ac4
Author: wiz <wiz@NetBSD.org>
Date:   Fri Sep 9 22:32:56 2005 +0000

    Fix double if (from Alexey E. Suslikov via jmc@openbsd).
    While here, re-word both H_[GS]ETUNIQUE descriptions so they make
    more sense. Bump date.

commit af079a30972f5942b5684561ece0a19a43ba25e6
Author: christos <christos@NetBSD.org>
Date:   Fri Aug 19 04:21:47 2005 +0000

    PR/31012: Barry Naujok: libedit el_get with EL_EDITOR op does not work
    Fixed as suggested.

commit 55ca57f0a249c2b291640e3f6058d577faacdd70
Author: christos <christos@NetBSD.org>
Date:   Wed Aug 10 12:46:24 2005 +0000

    Don't save the el->el_line.cursor over a cv_insert call and use it later
    because it might change. From Stefan Farfedeler.

commit fda9b4f722452dffbdbddd560d287137ca2e8790
Author: christos <christos@NetBSD.org>
Date:   Tue Aug 9 16:40:12 2005 +0000

    Don't delete the current line in vi mode when typing 'yy'.
    From Stefan Farfeleder.

commit b779ac8673970d4dbe47805706943d7fc0da7f84
Author: christos <christos@NetBSD.org>
Date:   Tue Aug 9 13:58:44 2005 +0000

    Fix two more help iterators. Thanks Stefan Farfeleder!

commit 2ecb0fb73d15e19386204f48e2e79ff0fe934748
Author: christos <christos@NetBSD.org>
Date:   Mon Aug 8 14:05:37 2005 +0000

    Spelling mistakes and comment errors (from FreeBSD via Stefan Farfeleder; many
    thanks)

commit d8f117745d118da9952cb688b0e8149d9ef85ca9
Author: christos <christos@NetBSD.org>
Date:   Mon Aug 8 14:04:49 2005 +0000

    Don't add an extra { NULL, 0, NULL } element to the help array. Instead keep
    it always the same size as the function array for consistency. Reported in
    FreeBSD PR 82381, but fixed differently.

commit 76b5907b5f32f202d094cac68853441faac375f5
Author: christos <christos@NetBSD.org>
Date:   Mon Aug 8 01:41:30 2005 +0000

    The previous commit removed too much and forgot to reset the history event
    number. From Kouichirou Hiratsuka, many thanks!

commit 262f96a2f6d7338d31bd34855f633cfae3536ac4
Author: christos <christos@NetBSD.org>
Date:   Wed Aug 3 13:41:38 2005 +0000

    Fix reversed test; from Gerry Swislow

commit 68d7e34555cd26577968a67b72a55cc9d1884b5d
Author: christos <christos@NetBSD.org>
Date:   Tue Aug 2 12:11:14 2005 +0000

    On a fatal error, we want to stop processing the macro buffers.

commit 4e722909307aa8bde72233bda9f32102490ac43c
Author: tron <tron@NetBSD.org>
Date:   Tue Aug 2 10:20:33 2005 +0000

    Add missing second argument to another call of ch_reset().

commit 0895008a17318e8069694091aa45073689b2f37e
Author: christos <christos@NetBSD.org>
Date:   Mon Aug 1 23:00:15 2005 +0000

    Don't reset the macro strings each time we enter el_gets(), otherwise
    el_push() is unusable programmatically.

commit ee399edc73bd62e7202abe11660af6243b172d31
Author: christos <christos@NetBSD.org>
Date:   Mon Aug 1 14:34:06 2005 +0000

    Don't forget to initialize h_del; from  Julien Torres.

commit 6220c813a6074a347e9502c6ff57bb4f29edd005
Author: wiz <wiz@NetBSD.org>
Date:   Thu Jul 14 15:02:37 2005 +0000

    Drop trailing whitespace.

commit 45542456a545b849e5d6837004f1590628e9c1c1
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 14 15:00:58 2005 +0000

    PR/30747: David N. Williams: libedit is missing remove_history()
    Added, please test.

commit 32bff6afc23b58f67db66d6cdd7d99cc60bfd89c
Author: christos <christos@NetBSD.org>
Date:   Wed Jul 6 21:13:02 2005 +0000

    Fix memory leaks found by valgrind. From Julien Torres

commit 54e7bf907a2927880b77b831d39cad1c4ed148af
Author: christos <christos@NetBSD.org>
Date:   Sun Jun 12 06:58:21 2005 +0000

    make this useable from c++.

commit 19c38590ee069f3b21ff6c20ac99f42c97996cd6
Author: christos <christos@NetBSD.org>
Date:   Sat Jun 11 18:18:59 2005 +0000

    PR/30500: Paul Shupak: Inconsistent definition of tilde_expand().
    Provide a layer of indirection between the readline compatibility functions
    and our internal implementation, so that we have the freedom to change the
    function signature.

commit 3cfbfdb2ef5bed78a6b640182ed7eb94143f4442
Author: christos <christos@NetBSD.org>
Date:   Fri Jun 10 20:21:00 2005 +0000

    Bug reported from Martin Dietze:
    
        The place to change the completion_append_character is
        usually somewhere in the `rl_completion_entry_function'
        callback which is where one usually can distinguish between
        file- or dir-like entries to append a slash for dirs etc.
    
        This does no longer work since `fn_complete()' takes the
        `append_character' as argument before the callback is executed,
        so that changes to the variable `rl_completion_append_character'
        have in fact no effect for the current completion.
    
    Fix by adding a function that returns the rl_completion_append_character,
    when it gets passed in a filename in readline emulation.

commit 0320b64715fd762c0e217490825457857231f5fc
Author: christos <christos@NetBSD.org>
Date:   Fri Jun 10 20:18:11 2005 +0000

    tilde expand should take a const argument.

commit ac636bd17afa0c0de2302e84c74e90aab9730848
Author: lukem <lukem@NetBSD.org>
Date:   Wed Jun 1 11:37:52 2005 +0000

    Don't use non-standard uint or u_int.

commit 48753fbc850a9d9906725e533675decb1e1c14bb
Author: lukem <lukem@NetBSD.org>
Date:   Sun May 29 04:58:15 2005 +0000

    Update for recent parse__escape() prototype change

commit 917b5f36b17d216f9d8fa0df1e297b4c5e1fc743
Author: christos <christos@NetBSD.org>
Date:   Sun May 29 03:55:37 2005 +0000

    PR/25694: Luke Mewburn: Don't abuse unconstify'ing a string and writing to
    it, because you'll core dump. Also remove extra const that gives pain to
    the irix compiler.

commit beb8208a11a788079a69880cb62175f74c9cca86
Author: lukem <lukem@NetBSD.org>
Date:   Sat May 28 12:03:22 2005 +0000

    fix for WARNS=3

commit 8e4107254f88b5b57c4e56f91145a731328cc6b2
Author: lukem <lukem@NetBSD.org>
Date:   Sat May 28 12:02:53 2005 +0000

    clean up build of "test"

commit d0117e10435b794ed44d7e1fc409258f68b72c85
Author: lukem <lukem@NetBSD.org>
Date:   Sat May 28 11:55:30 2005 +0000

    MAKEVERBOSE support

commit 305f1702380c42abe1b1a0c1649b94d6f2450f0d
Author: agc <agc@NetBSD.org>
Date:   Fri May 27 14:01:46 2005 +0000

    Use the correct type for the stored callback function

commit 26abf58dee2539afe3d3d89b6671c244dd9f36b4
Author: agc <agc@NetBSD.org>
Date:   Fri May 27 11:35:07 2005 +0000

    Sync the alternative readline interface with reality:
    
    + the rl_callback_handler_install takes a pointer to a void function
      which has one char * argument (it's called that way in the readline
      emulation source, otherwise there's no way to pass the line buffer
      to the function which processes the line when EOL is encountered)
    
    + provide a prototype for that function signature and use it
    
    Makes the callback readline interface work now.

commit eda876c9d5091594ca9cbe36a63f9bbe434b5024
Author: christos <christos@NetBSD.org>
Date:   Wed May 18 22:36:20 2005 +0000

    Libedit depends on libterm. From Patrick Welche

commit 33b05629088ac2619944796b980e5a41d4742106
Author: christos <christos@NetBSD.org>
Date:   Wed May 18 22:34:41 2005 +0000

    Make completion_matches non-static since readline wants it.

commit 308097fac3d387b5a21f8339459248c557cc0535
Author: christos <christos@NetBSD.org>
Date:   Wed May 18 00:50:24 2005 +0000

    Make signal handler safe. From  Michael Knudsen, many thanks.

commit 78745cde09dd16be41074ce982894d674ba0bc5b
Author: lukem <lukem@NetBSD.org>
Date:   Mon May 16 13:14:43 2005 +0000

    Remove clause 3 from the UCB license.

commit 182beb15f21078a48ca89256c06e37e4796e0635
Author: christos <christos@NetBSD.org>
Date:   Thu May 12 15:48:40 2005 +0000

    PR/30215: Kouichirou Hiratsuka: /bin/sh dumps core with tabcomplete
    Don't core-dump when trying to complete an empty line; instead assume ./

commit 2e685ade801d34b176357527bf1bd4bfdc54bea7
Author: dsl <dsl@NetBSD.org>
Date:   Mon May 9 20:10:33 2005 +0000

    Use getpwuid_r(getuid(), ...) to expand ~/....
    Don't replace ~xyz with /home/xyz when expanding ~

commit 6ddc453ece85cf6a2a1c250118d642e55ede2457
Author: dsl <dsl@NetBSD.org>
Date:   Sat May 7 16:28:32 2005 +0000

    gdb directly calls filename_completion_function()

commit 76a1f02b41af6b4b7a422daa8564eeb3ce7e5697
Author: dsl <dsl@NetBSD.org>
Date:   Sat May 7 16:22:59 2005 +0000

    Make everything that uses makelist depend on Makefile - that way the
    created files pick up new entries.

commit 41a59814ed9af08cd2fa62e3729867c8187e7751
Author: dsl <dsl@NetBSD.org>
Date:   Sat May 7 16:01:25 2005 +0000

    Separate out the filename completion functions from the readline() code.
    Pass in loads of parameters instead of relying on shed-loads of global
    variables to modify the behaviour.
    The filename completion code can now be enabled by code that uses el_gets().
    (eg /bin/sh)

commit 35f4d7fe234fc263415e3927d063fff737b595dd
Author: matt <matt@NetBSD.org>
Date:   Mon Apr 25 01:06:03 2005 +0000

    Terminate the arglist with a NULL instead of 0.  (Shuts up gcc4.x)

commit b9b92f846c1ae74cc341fbdbff37c1bba94bf5ff
Author: christos <christos@NetBSD.org>
Date:   Tue Apr 19 03:29:18 2005 +0000

    check for pwd != NULL, fix a missed getpwnam.

commit a76abbed5861ed16d2683ae3866953bf7ed653c8
Author: christos <christos@NetBSD.org>
Date:   Tue Apr 12 22:01:40 2005 +0000

    PR/29958: Peter Bex: add rl_variable_bind and rl_attempted_completion_over

commit bf7832efc618e88abf01f1db55ba5a1d92a3579e
Author: christos <christos@NetBSD.org>
Date:   Sat Apr 2 06:28:10 2005 +0000

    use getpwent_r

commit 35d638917d9cd9e3535aacea248e11236d7b27d3
Author: christos <christos@NetBSD.org>
Date:   Sat Mar 19 17:36:02 2005 +0000

    PR/29738: Rui Paulo: Incorrect tok_line and tok_str declarations.

commit 476e9301727cc7fcffc47dbd86f90975100bf181
Author: christos <christos@NetBSD.org>
Date:   Tue Mar 15 00:10:40 2005 +0000

    Add missing define, needed for debugging (from Rob Rodgers)

commit af62817ea3462ff7dcc1332f075120b4ab9fd16b
Author: christos <christos@NetBSD.org>
Date:   Thu Mar 10 19:34:46 2005 +0000

    Always update the position variables before the map function is called.
    From Rob Rodgers, thanks!

commit f96c72ee2428a5b571f1791f537792a2be26f350
Author: christos <christos@NetBSD.org>
Date:   Wed Mar 9 23:55:35 2005 +0000

    set UNBUFFERED again after you do the line callback so that the new line
    gets refreshed.

commit 04a4f22437dee0768d3a1b19e2648f07add7951f
Author: christos <christos@NetBSD.org>
Date:   Wed Mar 9 23:55:02 2005 +0000

    Make sure we flush after we prepare when we are unbuffered otherwise the
    prompt will not appear immediately.

commit 3bca82ec3396483b11d5fa5b6e8072c274d2cf04
Author: christos <christos@NetBSD.org>
Date:   Sat Nov 27 18:31:45 2004 +0000

    PR/26785: Jess Thrysoee: libedit - H_NEXT and H_PREV shifts cursor on failure

commit defca69e1a4edaca3482fc8063012e93f12db219
Author: christos <christos@NetBSD.org>
Date:   Thu Nov 4 01:16:03 2004 +0000

    Make EM_DELETE_PREV_CHAR behave like ED_DELETE_PREV_CHAR in incremental
    search. From Gerry Swislow.

commit 1793b7dd6985ad85d54c5aec3a0a439d9ef9e9f4
Author: dsl <dsl@NetBSD.org>
Date:   Thu Oct 28 21:14:52 2004 +0000

    Use (unsigned char) cast to sanitise arguments to ctype functions.

commit d349cd67495ded744f77c936032e944d8e37c465
Author: dsl <dsl@NetBSD.org>
Date:   Wed Oct 27 19:59:24 2004 +0000

    Fix a load of international alphabet problems with isxxx() and toupper()
    Change isspace(*char_ptr) to isspace(*char_ptr & 0xff) so that the correct
    piece of memory is looked at for the bit mask.
    gcc optimises out the '& 0xff' (on i386 at least).
    Fixes problems found by gcc when the splurious (int) cast is removed
    from the #defines in ctype.h

commit 0d0ad08914761263fc819ab39f5a578a8ba1db04
Author: christos <christos@NetBSD.org>
Date:   Wed Sep 8 18:15:57 2004 +0000

    cut out the middle-man and use el_insertstr() directly.

commit 742c0a6b61988568ed44ee4419a5621674a63308
Author: christos <christos@NetBSD.org>
Date:   Wed Sep 8 18:15:37 2004 +0000

    make rl_inhibit_completion visible.

commit 9b6268f92e3c8d5c7cf3bb96e2071b19e1a0c92e
Author: christos <christos@NetBSD.org>
Date:   Tue Aug 24 12:41:06 2004 +0000

    make sure that we round up to 1K.

commit 848a98512e674866ae8f60366ee6beaff12d33fa
Author: christos <christos@NetBSD.org>
Date:   Fri Aug 20 12:54:05 2004 +0000

    PR/26725: Sergey S. Kostyliov: Typo in libedit, possible buffer overflow in src/lib/libedit/history.c:history_save()

commit 6360c4b0f88606e7ab06609fbae2a65a6f0fcb0d
Author: mycroft <mycroft@NetBSD.org>
Date:   Fri Aug 13 12:10:38 2004 +0000

    Delete-previous-char and delete-next-char without an argument are not supposed
    to modify the yank buffer in Emacs.  Make it so.

commit 18c8edba4d67e1e8a01748bd3523df26b61ad6c4
Author: christos <christos@NetBSD.org>
Date:   Thu Jul 8 00:51:36 2004 +0000

    PR/23486: Andreas Gustafsson: gdb no longer works with emacs
    - make sure that we keep previous contents of the buffer in unbuffered mode.
    - when turning editing on and off keep tty consistent.

commit b6b34b8065ee3c54834b66371cab43d485dc204b
Author: christos <christos@NetBSD.org>
Date:   Sat May 22 23:21:28 2004 +0000

    fix memory leak; thanks to Logan Gabriel

commit 962fdd9cb4785ea56e8a077aa02a1c167a4a69a7
Author: wiz <wiz@NetBSD.org>
Date:   Thu Apr 15 08:13:29 2004 +0000

    Remove duplicate word, from jfb@openbsd via jmc@openbsd.

commit ac4e17d0c700f1fe5826a7625b15061237f3a5f8
Author: christos <christos@NetBSD.org>
Date:   Fri Feb 27 14:52:18 2004 +0000

    Better fix for rl_prep_terminal() from Gerry Swislow.

commit 9f2ccd793891b19a2b002bf9b6798b81eae7aeb4
Author: christos <christos@NetBSD.org>
Date:   Sat Feb 21 16:42:30 2004 +0000

    Separate tty separation from the prompt printing function. From Gerry Swislow.

commit c8d67a7da2dc146c959bfa34f055f80b5c39044e
Author: christos <christos@NetBSD.org>
Date:   Sat Jan 17 17:57:40 2004 +0000

    portability fixes.

commit cbb69f701375aec8246f163986f2b2d6991b3ea9
Author: lukem <lukem@NetBSD.org>
Date:   Mon Dec 8 12:03:01 2003 +0000

    update for function name change

commit 312a9703d575bb0007c3a8a41ee2069783649c15
Author: wiz <wiz@NetBSD.org>
Date:   Fri Dec 5 13:46:39 2003 +0000

    Use Aq instead of <>, quote a minus, drop trailing space.

commit a9beb0e4439ae031de723787f27a4eb4e6d7a4d7
Author: lukem <lukem@NetBSD.org>
Date:   Fri Dec 5 13:37:48 2003 +0000

    Tokenization function enhancements:
    * Make tok_init(), tok_end(), tok_reset(), tok_line() and tok_str()
      publically available in <histedit.h>
    * Documented the public functions in editline(3)
    * Renamed tok_line() -> tok_str()
    * Added new tok_line() which takes a "const LineInfo *" instead of
      "const char *" (the former has "cursor" information), and optionally
      return the argv index ("int *cursorc") and offset within that index
      ("int *cursorv").  This means that completion routines can use the
      tokenization code to crack the line and easily find which word the
      cursor is at.  (mmm, context sensitive completion :)
    * Fixed TEST/test.c when using "continuation" lines (unmatched quote
      or \ at EOL), and added some more DEBUG messages including highlighting
      where the cursor is (with a `_').

commit 30278e9a5735dc0c595529df14e86e4f1321e2b7
Author: christos <christos@NetBSD.org>
Date:   Tue Nov 4 13:22:19 2003 +0000

    s/wth/with/

commit 1b8a2beb0c173fe7b44c09168ab89aafa89e0623
Author: christos <christos@NetBSD.org>
Date:   Mon Nov 3 03:22:55 2003 +0000

    Fix uninitialized variable.

commit 62a5c8a6027d008bc0431b2ad3db4b662c24711b
Author: christos <christos@NetBSD.org>
Date:   Sun Nov 2 20:08:41 2003 +0000

    Always use el->el_buffer, because newbuffer could have moved. From
    Gerry Swislow gerry at certif dot com

commit 72dc1c2ac96a0930d4db03ae625556ef15104f74
Author: christos <christos@NetBSD.org>
Date:   Sun Nov 2 20:07:58 2003 +0000

    If the kill buffer is empty return normal. From Gerry Swislow gerry at certif
    dot com

commit d67d488ee21740f2acaaa276f1496bbd5d52744f
Author: christos <christos@NetBSD.org>
Date:   Sun Nov 2 20:06:57 2003 +0000

    Handle M- as escape. XXX: should probably select the meta-map instead.
    From Gerry Swislow  gerry at certif com

commit 8467a8427379b73b22fe0f808b152ad712bd04b6
Author: christos <christos@NetBSD.org>
Date:   Sun Nov 2 01:45:14 2003 +0000

    From: Gerry Swislow gerry at certif dot com
    
    1) File name completion should list the files in the current directory
    if no text is entered.  The previous version wouldn't list anything if
    the text to complete was empty.
    
    2) When listing directories, the entries "." and ".." shouldn't be
    shown.
    
    3) The filename completion should be used if the user's
    rl_attempted_completion_function doesn't return any matches.  The
    previous version didn't do that.

commit 391b46bc7fcb75f5ecbd0438ba3ae9af4edb150d
Author: christos <christos@NetBSD.org>
Date:   Sat Nov 1 23:39:22 2003 +0000

    initialize ptr.

commit bd39b6042407ea74911aee2773eb2c86dab761bc
Author: christos <christos@NetBSD.org>
Date:   Sat Nov 1 23:37:30 2003 +0000

    Explain H_ADD better. from Otto Moerbeek otto at drijf dot net

commit 487a7c2a6c281048a0cc830ce695998d284cfcc2
Author: christos <christos@NetBSD.org>
Date:   Sat Nov 1 23:36:39 2003 +0000

    Fixes from Otto Moerbeek otto at drijf dot net

commit 4c93d52c095a41895b5b4f54dae5aa09ea4ea274
Author: christos <christos@NetBSD.org>
Date:   Sat Nov 1 23:35:33 2003 +0000

    Document history builtin commands.

commit 8b40dcaecfe82fefb970c74e08a39138aa996bd4
Author: christos <christos@NetBSD.org>
Date:   Mon Oct 27 22:26:35 2003 +0000

    Make readline csh-like history work.
    From Gerry Swislow <gerry at certif dot com>.

commit 9ee15c697a22fa7540d85cb9c9297e893303c887
Author: christos <christos@NetBSD.org>
Date:   Sat Oct 25 06:42:41 2003 +0000

    Another fix for incremental search prev.

commit 52215a07e75fe9f31205c56d6cf89780cbf4393e
Author: christos <christos@NetBSD.org>
Date:   Sun Oct 19 06:28:35 2003 +0000

    add rl_catch_signals

commit 2af5f10bccaebc76062b0655d7cc2af2dc64f20c
Author: wiz <wiz@NetBSD.org>
Date:   Sun Oct 19 01:26:11 2003 +0000

    Bump date for previous.

commit 6e782349a39061953cbd34dc770e4d9055fd0c5a
Author: christos <christos@NetBSD.org>
Date:   Sat Oct 18 23:48:42 2003 +0000

    change allocation policy in el_push to allocate the string itself.
    fix issues with strdup.

commit acc8915b4488f88dc3c57315f370760a637c9d72
Author: christos <christos@NetBSD.org>
Date:   Sat Oct 18 23:27:36 2003 +0000

    make forward incremental search work better.

commit e7c6d717ff9160b1b6725f8f31773e5f68ac4f3d
Author: christos <christos@NetBSD.org>
Date:   Sat Oct 18 22:37:24 2003 +0000

    remove debugging printf.

commit 730f23e5514556d96a4bb8e01b8e7090d8a52a65
Author: christos <christos@NetBSD.org>
Date:   Sat Oct 18 22:24:34 2003 +0000

    Allow setty to set chars using char=value

commit 7bd301151fda59ba8e8e85ce5b8ae59325ef4080
Author: christos <christos@NetBSD.org>
Date:   Fri Oct 17 18:49:11 2003 +0000

    When searching backwards don't include the characters after the cursor in
    the search.

commit 432d3289ba97c0685fe767815012411859f52e88
Author: wiz <wiz@NetBSD.org>
Date:   Fri Oct 17 15:33:23 2003 +0000

    Bump date for previous. Replace > with \*[Gt].

commit 5d79eff8f55010445ce4b532c0c0b535aefc28f4
Author: christos <christos@NetBSD.org>
Date:   Thu Oct 16 22:26:32 2003 +0000

    More libedit readline emulation functions from: Gerry Swislow
    <gerry at certif dot com>

commit 99e15c71d03203f0bf0c685acab0620914c81284
Author: christos <christos@NetBSD.org>
Date:   Thu Oct 16 21:41:46 2003 +0000

    I got tired of typing a cc line.

commit a246b45de2d4bc2d4c6f86e6a4ccc5654f330d46
Author: christos <christos@NetBSD.org>
Date:   Thu Oct 16 21:41:26 2003 +0000

    Fix incremental search which was badly busted.

commit 378865a426f384849a437961fcb8b4059ddf4110
Author: christos <christos@NetBSD.org>
Date:   Wed Oct 15 18:08:40 2003 +0000

    don't limit ^c to alpha c, and add VIS_NOSLASH so that vis(3) does not
    produce \^c

commit 5eda4a7d4718b00aba6b71eb0931fdec2b839ce5
Author: christos <christos@NetBSD.org>
Date:   Thu Oct 9 00:42:28 2003 +0000

    PR/23107: Nathan Williams: ^D as the first char on the command line does
    not DTRT in readline compatibility mode

commit 6a6ecd324682b2b340ff416f9ba8ad241dd52878
Author: wiz <wiz@NetBSD.org>
Date:   Fri Sep 26 21:09:13 2003 +0000

    New sentence, new line; bump date for previous.

commit 552716dcff9f0a5d3f41b3bc99b3c731c8779f81
Author: christos <christos@NetBSD.org>
Date:   Fri Sep 26 17:44:51 2003 +0000

    Implement enough of readline's 4.0 async mode to make gdb happy. This is
    not complete yet, but it seems to work...
    This required to introduce an unbuffered mode to el_gets(), but that was
    a minor change.

commit e9c2e92b365e9d792357bb599bc185c89a3c9b73
Author: tron <tron@NetBSD.org>
Date:   Mon Sep 15 11:33:33 2003 +0000

    Include "sys/ttydefaults.h" to get standard definition of "CTRL" macro
    which avoids clash with custom one.

commit 2e7dfdfa24bcc78968feb0b00f2ec9de57d6b1d4
Author: christos <christos@NetBSD.org>
Date:   Mon Sep 15 01:29:36 2003 +0000

    kludge around CTRL redef.

commit 7fb5c922f1e034bad895859da840950fc529ce1a
Author: christos <christos@NetBSD.org>
Date:   Sun Sep 14 22:15:23 2003 +0000

    Match the stupid function pointer declarations with actual readline's 4.0.
    This is gross.

commit 7bb332f70b801689aac4d2d0fba426df7da508c7
Author: christos <christos@NetBSD.org>
Date:   Sun Sep 14 21:55:39 2003 +0000

    make this compile.

commit 705c04f0bcecf40026945c824cbeddae5a057f64
Author: christos <christos@NetBSD.org>
Date:   Sun Sep 14 21:55:19 2003 +0000

    Avoid pre-ansi warning.

commit 166e18a7fd0e18fbcb47dfe86b187c2ea32bba8a
Author: christos <christos@NetBSD.org>
Date:   Sun Sep 14 21:48:54 2003 +0000

    - provide enough hooks to compile gdb-5.3
    - fix el_get(e, EL_TERMINAL, (char **))

commit ec5dc2be24d83ab5bc9674cbaee3510e132aa2f7
Author: mycroft <mycroft@NetBSD.org>
Date:   Sat Sep 13 04:18:00 2003 +0000

    Fix something that's been annoying me for a while...
    Pull in <fcntl.h>, so that the fcntl #defines are present, and we build in the
    automatic reset of non-blocking mode, rather than beeping like mad.

commit eb7c1594f145c931049e1fd9eb056a5987e87e59
Author: agc <agc@NetBSD.org>
Date:   Thu Aug 7 16:42:00 2003 +0000

    Move UCB-licensed code from 4-clause to 3-clause licence.
    
    Patches provided by Joel Baker in PR 22280, verified by myself.

commit 64b5a0fe7bfd18a826d6d1e7727ffd36583f8a26
Author: lukem <lukem@NetBSD.org>
Date:   Sun Aug 3 09:23:14 2003 +0000

    Add INCSYMLINKS to <bsd.inc.mk> and <bsd.kinc.mk>, and use that instead of
    SYMLINKS to install symlinked header files.  INCSYMLINKS are installed with
    'make includes'.  This avoids using SYMLINKS and hacks with the 'linkinstall'
    target in <bsd.links.mk>, as linksinstall occurs in 'make install' and hacks
    to get it to occur in 'make includes' weren't robust, as seen in lib/libdes.
    
    Yet more improvements to bsd.README.

commit a93ea220fcb3e34cdfdcd4d7a5d391e0b2b4f2ba
Author: lukem <lukem@NetBSD.org>
Date:   Fri Aug 1 17:03:41 2003 +0000

    Rework how dependency generation is performed:
    
    * DPSRCS contains extra dependencies, but is _NOT_ added to CLEANFILES.
      This is a change of behaviour.  If a Makefile wants the clean semantics
      it must specifically append to CLEANFILES.
      Resolves PR toolchain/5204.
    
    * To recap: .d (depend) files are generated for all files in SRCS and DPSRCS
      that have a suffix of: .c .m .s .S .C .cc .cpp .cxx
    
    * If YHEADER is set, automatically add the .y->.h to DPSRCS & CLEANFILES
    
    * Ensure that ${OBJS} ${POBJS} ${LOBJS} ${SOBJS} *.d  depend upon ${DPSRCS}
    
    * Deprecate the (short lived) DEPENDSRCS
    
    
    Update the various Makefiles to these new semantics; generally either
    adding to CLEANFILES (because DPSRCS doesn't do that anymore), or replacing
    specific .o dependencies with DPSRCS entries.
    
    Tested with "make -j 8 distribution" and "make distribution".

commit 7b3a8b8486f938f571bfd34c3319952025bfb559
Author: lukem <lukem@NetBSD.org>
Date:   Thu Jul 31 12:46:00 2003 +0000

    tweak this unconventional (some might say "baroque") Makefile to work
    with the new <bsd.dep.mk> *.d semantics.
    fixes problems highlighted by Martin Husemann <martin@>

commit 19aedbe8695bc439dd40e4356f78432ca33f47e9
Author: wiz <wiz@NetBSD.org>
Date:   Wed Jul 16 11:54:44 2003 +0000

    Bump date for last.

commit be8ce1d30b92ebf71d06b4b9e516fda0467e2841
Author: jeremy <jeremy@NetBSD.org>
Date:   Mon Jul 14 22:36:22 2003 +0000

    Documented the return values from el_get().

commit a8f1dff65a0410cc5fe7d149972f7bc01cf0e447
Author: wiz <wiz@NetBSD.org>
Date:   Fri Jun 27 18:57:09 2003 +0000

    Add Ns.

commit 96759472a4d35267b15f1f3f46449421fbe70497
Author: christos <christos@NetBSD.org>
Date:   Thu Jun 19 16:19:42 2003 +0000

    provide a definition for __attribute__

commit 9b8791db6c3caa02b979e370f28c84068e230a19
Author: christos <christos@NetBSD.org>
Date:   Thu Jun 19 16:04:57 2003 +0000

    From michael@moria.de:
    Fix realloc case where we could be running out of space if too many matches.

commit 839ca00b3c8c17e506f69961970daeebed93f9df
Author: christos <christos@NetBSD.org>
Date:   Thu Jun 19 15:55:05 2003 +0000

    From michael@moria.de:
    - use __attribute__((__unused__)) in arguments where appropriate.
    - some int -> size_t and char * to const char * conversions.

commit 4ed8aa82edbd4030df6e931d3365eea368c510d4
Author: wiz <wiz@NetBSD.org>
Date:   Fri Jun 6 13:33:17 2003 +0000

    Use Aq Pa instead of Fd \*[Lt]...\*[Gt]. From jmc@openbsd.

commit 362ac6119e6847af43b49a02557f41401788ebc6
Author: matt <matt@NetBSD.org>
Date:   Wed Jun 4 20:14:05 2003 +0000

    Only return CC_EOF if ^D (VEOF) was the only thing on the line.  Otherwise
    beep and don't do anything else.  This mimics the behavor of ^D outside in
    normal terminal mode.  (^D in vi scrolls forwards and as such isn't
    appropriate to emulation)

commit f30ce359ce90369690802380fa054a8ff8fa5628
Author: wiz <wiz@NetBSD.org>
Date:   Wed May 14 07:24:21 2003 +0000

    setup -> set up, from jmc@openbsd.

commit 23e52df103f11bb103e76f13c603565316c1550d
Author: christos <christos@NetBSD.org>
Date:   Thu May 8 13:22:05 2003 +0000

    add a missing dependency (John Gordon)

commit 3a7857f16d911b98a4ca6cbe504153f91838b414
Author: christos <christos@NetBSD.org>
Date:   Thu May 8 13:20:44 2003 +0000

    Use ${HOST_SH}

commit 472351e13db0de574eb46dc6a738ebfef119f0e3
Author: wiz <wiz@NetBSD.org>
Date:   Wed Apr 16 13:34:34 2003 +0000

    Use
    .In header.h
    instead of
    .Fd #include \*[Lt]header.h\*[Gt]
    Much easier to read and write, and supported by groff for ages.
    Okayed by ross.

commit 702861031ba408e3108c1bb83001dee967dd1874
Author: perry <perry@NetBSD.org>
Date:   Mon Mar 31 16:52:42 2003 +0000

    em-gosmacs-traspose->em-gosmacs-transpose (Igor Sobrado, PR misc/19909)

commit 0acfa3bb9ea23305381dc8f26f4de2a89bf868e8
Author: wiz <wiz@NetBSD.org>
Date:   Sat Mar 29 22:48:37 2003 +0000

    Consistently spell occurrence with two rs.

commit 80a839beda8a7928704164cc2042a242a0921cd6
Author: christos <christos@NetBSD.org>
Date:   Mon Mar 10 21:21:10 2003 +0000

    don't use the path for awk

commit 687b5d51e386c123cec6afd90d45d7d14da55fe9
Author: christos <christos@NetBSD.org>
Date:   Mon Mar 10 21:18:49 2003 +0000

    s/u_int32_t/unsigned int/

commit 25456aecdbf2cd21cb477916a42a28bd04b03cd3
Author: dsl <dsl@NetBSD.org>
Date:   Mon Mar 10 11:09:25 2003 +0000

    Put the __weak_extern() back inside vi_alias, but after the extern for
    get_alias_text().

commit d5428a29063f3a1c8300356763e0df39b4e3827e
Author: he <he@NetBSD.org>
Date:   Mon Mar 10 09:55:10 2003 +0000

    Move the __weak_extern() (ifdef'ed) outside of the vi_alias()
    function, so that this compiles again.

commit 1d6595e599493b7e84f6cdf5ad2d9dca6bafa269
Author: christos <christos@NetBSD.org>
Date:   Mon Mar 10 01:14:54 2003 +0000

    null is not 0

commit 2ffae6453d6c7d5a65e7761274c2b25936a6634a
Author: christos <christos@NetBSD.org>
Date:   Mon Mar 10 01:14:07 2003 +0000

    if no __weak_extern, don't even try to do vi_alias.

commit 61c24e2c2a1a37c355ecb3235f9dcf029fe32d58
Author: christos <christos@NetBSD.org>
Date:   Mon Mar 10 01:05:12 2003 +0000

    fix uninitialized variable.
    grr, I want gcc-3.3

commit 5f1f221c2413b3dbd83afd3f6ee9c0b5db8a7bd3
Author: christos <christos@NetBSD.org>
Date:   Mon Mar 10 00:58:05 2003 +0000

    sig_t is non portable

commit 23dbd749a2eb759c95082b3bd11ce3c880aa18be
Author: christos <christos@NetBSD.org>
Date:   Mon Mar 10 00:57:38 2003 +0000

    - include cdefs.h early in the game
    - ifdef notdef the sunos stuff
    - no need for sig_t

commit bdc91aaf9a3dec93f1cf20cdb033609b8dea723f
Author: christos <christos@NetBSD.org>
Date:   Mon Mar 10 00:56:38 2003 +0000

    include alloca.h for systems that need it.

commit 990562bfef3015a6e18a209dde598d5588ea144c
Author: wiz <wiz@NetBSD.org>
Date:   Tue Feb 25 10:34:36 2003 +0000

    .Nm does not need a dummy argument ("") before punctuation or
    for correct formatting of the SYNOPSIS any longer.

commit 831ba492c335147d28479e532aebf3f3df5112ca
Author: wiz <wiz@NetBSD.org>
Date:   Tue Jan 21 23:00:56 2003 +0000

    Replace -1 with \-1 for PostScript output; drop a trailing space and fix two typos.

commit f24857bf367fe51c9e0b59c707d6f2ac6a81717a
Author: christos <christos@NetBSD.org>
Date:   Tue Jan 21 18:40:23 2003 +0000

    Add a uniquefier for the history function.

commit 98e93eb66e008b5089e99860762e3c3fcb7dd17a
Author: christos <christos@NetBSD.org>
Date:   Tue Jan 21 17:41:38 2003 +0000

    fix directory descriptor leak [from michael at moria dot de]

commit 4a97685c19a56825ec04dfe5b1117be87c15bcd5
Author: christos <christos@NetBSD.org>
Date:   Wed Nov 20 16:50:08 2002 +0000

    Fix problem with previous patches that broke vi history.
    - c_gets() was usually returning a length, but sometimes
      one of the CC_xxx values (which are small +ve integers)!
    - fixed c_gets() by putting a ' ' under the cursor.
    From David Laight.

commit d10066b9271b63eff339092f17a9c53f74743ed1
Author: christos <christos@NetBSD.org>
Date:   Fri Nov 15 14:33:53 2002 +0000

    de-lint

commit 39f224af4803c956adb73b8e8387aa3eb2445ef2
Author: christos <christos@NetBSD.org>
Date:   Fri Nov 15 14:32:32 2002 +0000

    PR/18995: David Laight: libedit fixes for posix conformant sh
    
    The posix 'sh' specification defines vi-mode editing quite tightly.
    The netbsd libedit code (used by sh to do this) was missing several
    features, there were also minor errors in others.
    
    Compare netbsd sh to the definition available from:
    http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html
    In particular the following were not supported:
            U - undo all changes to line
            | - goto column
            Y - yank to end of line
            y - yank
            # - comment out current line
            @ - take input from shell alias [1]
            G - goto numbered line in history buffer
            v - edit history line with vi
            _ - append word from last input line
            . - redo last command
    Other minor changes have also been made.
    
    [1] This needs the shell to define an appropriate routine to
    return the text of the alias.  There is no requirement that
    such a function exist.

commit f53bc0b607e3e172044674def11e092530b64df1
Author: thorpej <thorpej@NetBSD.org>
Date:   Tue Nov 12 00:01:21 2002 +0000

    Fix signed/unsigned comparison warnings.

commit aa27d116a637f727c274e6cc3edcf3ce3b0dec57
Author: thorpej <thorpej@NetBSD.org>
Date:   Tue Nov 12 00:00:23 2002 +0000

    Avoid strict alias warning.

commit 905b699ab74c6b029cf5fd158a35030546fcd0ed
Author: christos <christos@NetBSD.org>
Date:   Thu Oct 31 02:01:46 2002 +0000

    support for % command [matching parens/brackets/braces] on vi modes.
    From David Laight, thanks!

commit 05e3eaeb3437b890685531c46985e483b861cdb1
Author: christos <christos@NetBSD.org>
Date:   Sun Oct 27 21:43:35 2002 +0000

    remove unused  variables.

commit a17c7fe4a6a467c855f7064abcd6af66592380cf
Author: christos <christos@NetBSD.org>
Date:   Sun Oct 27 21:41:50 2002 +0000

    vi mode and memory fixes from david laight.

commit e6ee03013b951dc8ef8b11748fb9f323666a8e6a
Author: christos <christos@NetBSD.org>
Date:   Sun Oct 27 20:24:28 2002 +0000

    don't crash in memory shortage conditions.

commit 8572d89c2c231229e1e729b4acc1161ca9f37eb4
Author: christos <christos@NetBSD.org>
Date:   Sun Oct 27 20:04:36 2002 +0000

    PR/17954: SAITOH Masanobu: since we have opost and onlcr set, we don't need
    to output \r to go to the end of line; \n is enough. From David Laight.

commit 4a964eaf8705998ded0ebee4237db8307d1c91ff
Author: christos <christos@NetBSD.org>
Date:   Sun Oct 13 17:15:53 2002 +0000

    write the vis(3) converted string into the file, not the original one.
    Noted by Tim Robbins. Hi luke!

commit 489a979d237037b7d04028102704cd2b1c4c5076
Author: wiz <wiz@NetBSD.org>
Date:   Wed Oct 2 11:06:11 2002 +0000

    empty, not emptry. By Adrian Mrva.

commit 28128e05923a98d5c57c8d260ce746d2619f35e8
Author: wiz <wiz@NetBSD.org>
Date:   Tue Oct 1 19:03:15 2002 +0000

    New sentence, new line. From Robert Elz.

commit ec5dbc56b81da654240ffe4a61bce307e4930e88
Author: lukem <lukem@NetBSD.org>
Date:   Mon Aug 19 14:55:14 2002 +0000

    Explicitly move setting of NOxxx and USE_SHLIBDIR to the top of the
    Makefile (before including <bsd.own.mk>)

commit 91d06a031bd2794fc398b50a83c27b70cb8fbcf5
Author: lukem <lukem@NetBSD.org>
Date:   Mon Aug 19 13:35:05 2002 +0000

    More use of ${NETBSDSRCDIR}/some/path instead of ${.CURDIR}/../../some/path

commit de6b8089600de81488545c6edd4f19b7c7f098bd
Author: yamt <yamt@NetBSD.org>
Date:   Sun Aug 18 07:23:21 2002 +0000

    reflect reality.
    (3rd arg of el_parse is const.)

commit 642c31b4a33c3d04308590482f8b30af50096f50
Author: soren <soren@NetBSD.org>
Date:   Fri Aug 9 10:01:53 2002 +0000

    Remove extraneous \n's in {err,warn}{,x}.

commit 4f7523a4cc4c710ce5496b1fb607599ce9815dd6
Author: thorpej <thorpej@NetBSD.org>
Date:   Tue Apr 9 01:57:34 2002 +0000

    _rl_qsort_string_compare(): Fix casts.  This makes gcc 3.2 happy,
    and also allows both LINTED comments to be removed.

commit 8a47c9318b92dabc236d3fcd7c6a3560ef73d5be
Author: christos <christos@NetBSD.org>
Date:   Sat Mar 23 23:39:18 2002 +0000

    make sure this compiles cleanly and works.

commit b2b9c150accc96dbc4ce6ca5705538274a45bbbd
Author: christos <christos@NetBSD.org>
Date:   Mon Mar 18 16:20:36 2002 +0000

    Add a couple linted comment and enable WARNS=3

commit aef033dfd3f88d93afc9d8ffda4ab11fdd78eb50
Author: christos <christos@NetBSD.org>
Date:   Mon Mar 18 16:19:03 2002 +0000

    oops, we need config.h now.

commit 0e0ac6b723c2e4e089e5ebcb438b4119aa52feab
Author: christos <christos@NetBSD.org>
Date:   Mon Mar 18 16:00:50 2002 +0000

    - constify; passes all gcc and lint strict checks.
    - add config.h [Jason Evans], to create a portable version of libedit that
      can be easily compiled on other OS's.

commit fba3aac82749d6aa90e72053526613a89fd52275
Author: wiz <wiz@NetBSD.org>
Date:   Wed Feb 20 11:54:16 2002 +0000

    Close quoting.

commit 814f296b77c605e63fa8be84c9484b39d6077f8f
Author: ross <ross@NetBSD.org>
Date:   Thu Feb 7 07:00:09 2002 +0000

    Generate <>& symbolically.

commit daf8abfc473f05d0d8d40f8db0484b88efe5b3d3
Author: christos <christos@NetBSD.org>
Date:   Sun Feb 3 23:37:53 2002 +0000

    Fixed an __P remnant

commit e09118a532c2bcdd6db0efee3a0dd822f0eda2b1
Author: christos <christos@NetBSD.org>
Date:   Sun Feb 3 23:37:19 2002 +0000

    Don't use HAVE_ yet.

commit 06968e10a6dc3c11ec4b1d170ee78310395c5c74
Author: christos <christos@NetBSD.org>
Date:   Sun Feb 3 23:30:03 2002 +0000

    Fix a warning.

commit 910773a8f9c55b1059e6b7f334c1911c2f3fa93b
Author: christos <christos@NetBSD.org>
Date:   Thu Jan 31 02:27:31 2002 +0000

    don't forget to re-adjust the limit.

commit a4b0370f1ddb3a045847aed4b55024b673c4ba5a
Author: christos <christos@NetBSD.org>
Date:   Thu Jan 31 00:25:33 2002 +0000

    make pointer arithmetic more palatable.

commit 2fc1ec38f20e29f93e8a6433c5d4c9b2ce643e8b
Author: wiz <wiz@NetBSD.org>
Date:   Tue Jan 15 02:46:44 2002 +0000

    Punctuation nits.

commit a0d025c5d3d7119b6951141b5e38712c2eb6a7cf
Author: wiz <wiz@NetBSD.org>
Date:   Tue Jan 15 02:46:22 2002 +0000

    Punctuation and whitespace nits, fix a typo.

commit efcc9a4c9dba0a5fac3f68d5306510cd786dc48d
Author: lukem <lukem@NetBSD.org>
Date:   Fri Dec 28 01:32:37 2001 +0000

    * Add user-controlled mk.conf variables
            - SHLIBDIR      Location to install shared libraries if ${USE_SHLIBDIR}
                            is "yes".  Defaults to "/usr/lib".
    
            - USE_SHLIBDIR  If "yes", install shared libraries in ${SHLIBDIR}
                            instead of ${LIBDIR}.  Defaults to "no".
                            Sets ${_LIBSODIR} to the appropriate value.
                            This may be set by individual Makefiles as well.
    
            - SHLINKDIR     Location of shared linker.  Defaults to "/usr/libexec".
                            If != "/usr/libexec", change the dynamic-linker
                            encoded in shared programs
    
    * Set USE_SHLIBDIR for libraries used by /bin and /sbin:
            libc libcrypt libcrypto libedit libipsec libkvm libm libmi387
            libtermcap libutil libz
    
    * If ${_LIBSODIR} != ${LIBDIR}, add symlinks from ${LIBDIR}/${LIB}.so*
      to ${_LIBSODIR}/${LIB}.so* for compatibility.
    
    * Always install /sbin/init statically (for now)
    
    
    The net effect of these changes depends on how the variables are set:
    
      1.)   If nothing is set or changed, there is no change from the
            current behaviour:
                    - Static /bin, /sbin, and bits of /usr/*
                    - Dynamic rest
                    - Shared linker is /usr/libexec/ld*so
    
      2.)   If the following make variables are set:
                    LDSTATIC=
                    SHLINKDIR=/lib
                    SHLIBDIR=/lib
            Then the behaviour becomes:
                    - Dynamic tools
                    - .so libraries used by /bin and /sbin are installed to /lib,
                      with symlinks from /usr/lib/lib*so to -> /lib/lib*so
                      where appropriate
                    - Shared linker is /lib/ld*so
    
      3.)   As per 2.), but add the following variable:
                    USE_SHLIBDIR=yes
            This forces all .so's to be instaleld in /lib (with compat
            symlinks), not just those tagged by their Makefiles to be.
            Again, compat symlinks are installed

commit 001067bbd1d3794241ea2698341fccc62b44a289
Author: tv <tv@NetBSD.org>
Date:   Wed Dec 12 00:51:00 2001 +0000

    Readability cleanups; MKfoo=no -> NOfoo.

commit 676fa7ff6166b98a83902edd5f419d49805da4bf
Author: mycroft <mycroft@NetBSD.org>
Date:   Thu Nov 8 19:39:10 2001 +0000

    In the `not what I asked for' department:
    Do NOT return an error from term_init() if term_set() fails.  Otherwise
    el_init() barfs and libedit fails to work.

commit 09aca455ce9edac2e31a10de4e62ec2880ab442c
Author: mycroft <mycroft@NetBSD.org>
Date:   Thu Nov 8 19:34:41 2001 +0000

    Remove an unused variable.

commit 18c98749bfb19fd56da349efad98604f9de4ad49
Author: christos <christos@NetBSD.org>
Date:   Fri Nov 2 04:47:47 2001 +0000

    If term_init() fails, cleanup and return NULL. This avoids other lossage.
    Pointed by charles.

commit 41df15832a4e870138ae173c8fb8b60ef641798f
Author: christos <christos@NetBSD.org>
Date:   Fri Nov 2 04:42:09 2001 +0000

    Finish initializing all the term data structures even if the terminal init
    fails. This makes editline work on dumb terminals again. Noted by mycroft.
    Oops, too agressive error checking.

commit 545f12e0c59ac3a29ca0d0a5d0edbfbfe33a2a3d
Author: christos <christos@NetBSD.org>
Date:   Tue Oct 9 13:50:29 2001 +0000

    PR/14188: Anthony Mallet: Provide an opaque data pointer to client programs.

commit ab71bef52afede1656ee7f5a998f9f70510bb422
Author: lukem <lukem@NetBSD.org>
Date:   Thu Oct 4 00:45:19 2001 +0000

    a couple of minor fixes.  originally by Ruslan Ermilov <ru@FreeBSD.org>,
    highlighted to me by way of Mike Barcroft <mike@FreeBSD.org> (thanks!)

commit e7e71e37c620fab8a44a96390933a5ad09c660a6
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Sat Sep 29 17:52:10 2001 +0000

    history_def_enter: fix off-by-one mistake in delete condition (the behaviour
    to keep at least one entry on the history list is retained)
    This fixes lib/9704 by Phil Nelson.

commit eabba8b5072a7eb67a64dee7c83bb5d0ebe086de
Author: christos <christos@NetBSD.org>
Date:   Thu Sep 27 19:29:50 2001 +0000

    PR/14067: Anthony Mallet: Provide a programmatic way to set the read_char
    function via a new el_set() operation.
    Thanks, nicely done :-)

commit 4c99916337a79df19e0cc224e32a596112feb779
Author: wiz <wiz@NetBSD.org>
Date:   Mon Sep 24 13:22:25 2001 +0000

    va_{start,end} audit:
    Make sure that each va_start has one and only one matching va_end,
    especially in error cases.
    If the va_list is used multiple times, do multiple va_starts/va_ends.
    If a function gets va_list as argument, don't let it use va_end (since
    it's the callers responsibility).
    
    Improved by comments from enami and christos -- thanks!
    
    Heimdal/krb4/KAME changes already fed back, rest to follow.
    
    Inspired by, but not not based on, OpenBSD.

commit 3f9984fc90e813844e16f5bfbd6d419b847da028
Author: wiz <wiz@NetBSD.org>
Date:   Tue Jun 19 13:42:07 2001 +0000

    `existent', not `existant'

commit 93819542b38cf419c57a34aed4f026ba8d748bca
Author: christos <christos@NetBSD.org>
Date:   Thu May 17 01:02:17 2001 +0000

    PR/12963:Jason Waterman: Fix signed cast problems.

commit e58d00a4067dab17ba93c38658fe10ee45de0bff
Author: enami <enami@NetBSD.org>
Date:   Wed May 16 07:09:26 2001 +0000

    Use relative path for symlink target so that it won't point outside of tree.

commit 049f74e997b1d684c15992147e9cec18d2bc194f
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Mon May 14 18:39:14 2001 +0000

    Back off previous and do differently:
    Ensure that the <readline/history.h> link to <readline/readline.h> is
    installed too for 'make includes'. Also, avoid creating obj dir.
    This is finally real fix for lib/12929.
    XXX Is this right?

commit 6fc3f969bf65c40a8a9ebb1ccc5659f456878b35
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Mon May 14 07:41:30 2001 +0000

    Use <bsd.inc.mk>, instead of <bsd.prog.mk>, so that the readline.h header
    is installed during the 'make includes'.
    Fixes lib/12929 by Martin Husemann.

commit 5e45b51a6b67262e78ce2b5c1e805c6f1bdcb1c4
Author: lukem <lukem@NetBSD.org>
Date:   Fri Apr 13 01:04:19 2001 +0000

    knf ch_enlargebufs(), to be *consistent* with the rest of this file...

commit 4241f48b357451da97bc684d5f25ff436666b603
Author: lukem <lukem@NetBSD.org>
Date:   Fri Apr 13 00:53:11 2001 +0000

    rename 3 arg ELRE_DEBUG to ELRE_ASSERT, add 2 arg ELRE_DEBUG, and change all
    occurences of ELRE_DEBUG(foo,bar,) -> ELRE_DEBUG(foo,bar).  some compilers
    (e.g, gcc on darwin) bitch about the former (`not enough args').

commit caeeeac59d22437fa2c9d3ec034ce1036f22222a
Author: wiz <wiz@NetBSD.org>
Date:   Mon Apr 2 18:29:49 2001 +0000

    End sentence with a dot.

commit e125f8f19465cd026318671c00ec47570efd0157
Author: christos <christos@NetBSD.org>
Date:   Tue Mar 20 00:08:31 2001 +0000

    chmod the history file to 600 so that only the owner can read it.
    [inspired by the openbsd fix to readline]

commit 86ebf640b02d07afdd49304f98881dc1674b24e6
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Tue Jan 23 15:55:30 2001 +0000

    sprinkle couple const

commit d64e200968df2a3b8cd111063ff5cfa848d9593a
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Wed Jan 10 22:42:56 2001 +0000

    term_rebuffer_display(): set el->el_term.t_size.v to terminals
    height, not a magic value, so that e.g. el_display[] and el_vdisplay[]
    are not bigger than needed.
    Discussed with Christos Zoulas.

commit 3b81461031fb5ade179345d802e6b9970eb57641
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Wed Jan 10 08:10:45 2001 +0000

    fix partial completion - we failed to refresh screen in that case

commit 00ff7cacf5ae9dafa1a7c72055410c96306d1cf7
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Wed Jan 10 07:45:41 2001 +0000

    Enlarge editline buffers as needed to support arbitrary length lines.
    This also addresses lib/9712 by Phil Nelson.

commit c8093bd33623eff6c44242e067cc13daaba13b3b
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Tue Jan 9 19:43:15 2001 +0000

    term_beep(): use ordinary bell, don't attempt to use visual bell - if user wants
    visual instead of ordinary bell, they should set their environment
    appropriately

commit 7be4ef2ff0b9b58b2ff0597a7e3e8a369e0f07e8
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Tue Jan 9 19:22:31 2001 +0000

    make array of functions and help array const

commit 417c21531767c8bda0aaf3f5889aa32226e109a4
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Tue Jan 9 17:31:04 2001 +0000

    make constant arrays a const

commit a76c617ce5ad661c9bc0aea47baa7fa9ca5d3878
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Tue Jan 9 17:22:09 2001 +0000

    make constant arrays a const

commit fa6e217baf252a1673dec66970648b7d517e37cf
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Sat Jan 6 14:44:50 2001 +0000

    el_line_t: make 'limit' const

commit 304ebe4875957077fdfeac4b006c4cc638508b09
Author: christos <christos@NetBSD.org>
Date:   Fri Jan 5 22:45:30 2001 +0000

    depoison the pure editline code from readline compatibility hacks.

commit 74c6c9c204c5ecb0e067b5d43015515aecef70b7
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Fri Jan 5 21:15:49 2001 +0000

    Standard location of readline headers is /usr/include/readline/, so install
    them there.
    readline.h of libedit had to move to subdirectory 'readline', due to the way
    BSD makefiles work; this is better than potentially fragile Makefile hacks

commit 2f3389ce5e3b5a9efa2b5a826fdfda47cba885b2
Author: christos <christos@NetBSD.org>
Date:   Thu Jan 4 15:56:31 2001 +0000

    consistently check for allocation failures and return -1, if we could not
    get more memory.

commit ab7e5eaeb3267e41ca10ec8794f53609dae55da5
Author: christos <christos@NetBSD.org>
Date:   Thu Jan 4 15:55:53 2001 +0000

    fix lint problems.

commit ed19c5fdb037a40ccfc395e2fed54830215bbf1b
Author: christos <christos@NetBSD.org>
Date:   Thu Jan 4 15:55:03 2001 +0000

    fix dumb typo in signal setup [from OpenBSD]
    return -1 if alloc fails.

commit a8b4a741c567571b1f1575018de249151ae797c1
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Mon Jan 1 15:54:07 2001 +0000

    bump libedit minor - addition of rl_special_prefixes and rl_completion_append_character

commit a85f9ca211c8ccee5c4cea5a23c90aa30dcd989c
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Mon Jan 1 15:52:25 2001 +0000

    Add support for rl_completion_append_character and rl_special_prefixes.
    This addresses lib/10513 by Giles Lean. Tested with PostgreSQL 7.0.2 psql.

commit 939ac125780bae79a7ad0be2a15b4021b7650dce
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Mon Jan 1 11:03:16 2001 +0000

    history_tokenize(): fix one off-by-one bug
    rl_complete_internal(): only replace the completed string with common part
            of possible matches if there is a possible completion

commit 26ffe99b32ee2fe71ff608a674cb386c2d9a8f66
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Sun Dec 31 09:50:32 2000 +0000

    rl_display_match_list():
            * pad entries shorter than 'max' by spaces correctly
            * fix off-by-one error which caused extra newline to be printed
              if the list fit exactly to a screen
            * fix typo in _rl_qsort_string_compare, which caused the list to not
              be sorted after all

commit c860130fa0103dfea55a7f2b4a192a1f0b268e39
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Sat Dec 30 22:46:05 2000 +0000

    term_beep(): if terminal supports both visual and ordinary bell, 'ring' both

commit 2c10cd6472d2febbfce215b11690a8a77b70760c
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Sat Dec 23 22:07:16 2000 +0000

    bump libedit minor - added some public stuff for readline emulation

commit 4acffb6417ef8bb25458da199a42238d48f86213
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Sat Dec 23 22:02:20 2000 +0000

    completion_matches(): fix a off-by-one bug, fix variable name typo
    implement displaying of possible completions, add hook to display the list
            on second rl_complete() invocation in row (typically, double <TAB>)
    
    This addresses the completion part of lib/11581 by Richard Earnshaw.

commit 50b6095c16cdc52930e6d924bc8edf0c589ad229
Author: jmc <jmc@NetBSD.org>
Date:   Tue Nov 28 22:37:51 2000 +0000

    Alloc the keys structure with A_K_NKEYS as the multiplier rather than a
    hardcoded value of 4.
    
    A_K_NKEYS is currently 6 and this mismatch was stomping memory when
    initializing the keys. (specifically gdb lost the exec file name if it was
    a long path name).

commit ff59a2faddea84bf67d6d5bfefd122463e352005
Author: christos <christos@NetBSD.org>
Date:   Sat Nov 11 22:18:57 2000 +0000

    - add support for home and end keys.
    - improve debugging support

commit cff6006e56d7646e3e03564b1981d796c5ef7226
Author: lukem <lukem@NetBSD.org>
Date:   Wed Nov 8 00:09:38 2000 +0000

    improve description of line syntax

commit acf589519a33014edb02e8795579f2cf214cf34e
Author: sommerfeld <sommerfeld@NetBSD.org>
Date:   Wed Oct 4 16:21:39 2000 +0000

    format string audit (silence warnings, save space)

commit 6592086aeeba7e02ab664846ba1a2e51d4908e7c
Author: lukem <lukem@NetBSD.org>
Date:   Mon Sep 4 23:45:18 2000 +0000

    - generate ansi prototypes instead of using __P().  noted by christos
    - fix a couple of comments

commit e4b166ade0a430ee2a3ed306723a49a10e936601
Author: lukem <lukem@NetBSD.org>
Date:   Mon Sep 4 23:36:41 2000 +0000

    convert to new style guide

commit d30d584a9145d43c1e61e7e8a36854dbcee630e4
Author: lukem <lukem@NetBSD.org>
Date:   Mon Sep 4 22:06:28 2000 +0000

    convert to new style guide, which includes:
    - ansi prototypes & features (such as stdargs)
    - 8 space indents

commit f5e2e0bfea36daee83a00d7e07aafe2c12a4422c
Author: lukem <lukem@NetBSD.org>
Date:   Tue Aug 29 07:04:32 2000 +0000

    history_def_set has a `const int' as a third arg, not an `int'.
    picked up by the ultrix compiler, reported by simonb@ ...

commit 7f59d8e891e9dda3cc3605a109ec64ee5ebcd841
Author: mrg <mrg@NetBSD.org>
Date:   Tue Aug 15 12:01:40 2000 +0000

    use .tmp temporaries for generated files, to avoid having failed generated
    output being used.

commit c23199d5e1dcd5019429c128f7a2aafb335ea90d
Author: chuck <chuck@NetBSD.org>
Date:   Wed Aug 2 03:36:39 2000 +0000

    make xxgdb and a gdb linked with libedit's readline emulation work
    properly together.   xxgdb communicates with a gdb running on a pty
    that it sets to -echo,-onlcr prior to forking the gdb process.
    GNU readline preserves the -echo setting while libedit was undoing it
    (setting the tty to a sane state and totally confusing xxgdb's parser).
    
    this diff simply disables libedit if both readline emulation and
    "stty -echo" are used/set.   that is enough to make xxgdb work once
    again, but (XXX) this is not how GNU readline handles stty -echo (it
    does not echo anything, but editing commands like ^A,^K, etc.
    still work), so the readline emulation isn't perfect.
    
    change reviewed by christos.

commit 01d7e8693fb9388142f8d777c539a3bb374261df
Author: sommerfeld <sommerfeld@NetBSD.org>
Date:   Wed Jun 28 20:37:44 2000 +0000

    Only look in home directory for .editrc.  (Discussed with Christos.)

commit 78dc0c22fa28ef01500ea85f0b2acc971a1b86c2
Author: lukem <lukem@NetBSD.org>
Date:   Wed Jun 21 03:21:28 2000 +0000

    * add -m option to makelist, which generates an mdoc table with the key
      bindings and their descriptions
    * manually add the output of 'sh ./makelist -m vi.c ed.c common.c' to
      a new section in editrc(5) called `EDITOR COMMANDS'

commit fd194fea278b265cff86a6ed0a00b12ed0e29cca
Author: lukem <lukem@NetBSD.org>
Date:   Fri Jun 2 13:37:12 2000 +0000

    use strtol() (instead of atoi()) for sane error detection

commit cd8eacbb27723b117419faa595ee4b2524e509f6
Author: christos <christos@NetBSD.org>
Date:   Mon May 15 12:15:38 2000 +0000

    don't dump core on empty files.

commit 89c5a767f8fc7a4633b2d409966e2becbb98ff92
Author: soren <soren@NetBSD.org>
Date:   Mon Mar 13 22:55:05 2000 +0000

    Fix doubled 'the's.

commit 371967cec8135b846009696a7b66ff13b8fa7b30
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Fri Mar 10 13:06:43 2000 +0000

    Fix _rl_compat_sub() to really honour 'globally' flag instead
            of making the substitution always globally - affects
            _history_expand_command() and in turn history_expand()
    
    All praise lint :)

commit 833166a2887982aa51a125a9d2cef6d5fc7e651d
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Fri Mar 10 12:55:15 2000 +0000

    readline(): don't dereference NULL pointer if prompt is NULL
    history_tokenize(): avoid stepping too far if backslash is last character
            on the passed string
    update some comments
    
    This makes gdb \ escaping work reliably and fixes lib/9511 by Assar Westerlund.

commit 1f0ecc5ce4719d38abebdc5a434a1cc8db8fc100
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Fri Mar 10 12:25:47 2000 +0000

    include <stdlib.h> to get definition of malloc() and free(), so it's
    possible to compile this file separately when debugging

commit fe7be4eb7b2fc86e84eabe338a1fc9beabc39709
Author: chopps <chopps@NetBSD.org>
Date:   Mon Feb 28 17:41:04 2000 +0000

    el_insertstr takes a "const char *" not "char *" now as it doesn't modify
    the argument.

commit 05fc321ebf04f3734e42e86b96897df8aa4469ce
Author: mycroft <mycroft@NetBSD.org>
Date:   Sat Feb 19 09:08:16 2000 +0000

    Fix refresh glitches when using auto-margin.

commit 0dded5f65c8300f246d22200bb2a8eefc5cab05f
Author: christos <christos@NetBSD.org>
Date:   Thu Jan 20 22:56:21 2000 +0000

    Add support for automatic and magic margins (from tcsh)
    This makes the rightmost column usable on all programs
    that use editline.

commit 6c14e6198e3ab5f96e98df771e7c4a5895452d72
Author: christos <christos@NetBSD.org>
Date:   Wed Jan 19 18:31:10 2000 +0000

    PR/9244: Kevin Schoedel: libedit dumps bindings inconsistently

commit b2309a74ae3e46ba1ecb7f9575d7e9579c273f67
Author: christos <christos@NetBSD.org>
Date:   Wed Jan 19 18:30:19 2000 +0000

    PR/9243: Kevin Schoedel: libedit ignores repeat count

commit 850279f2b9a453554025bff377fa8570ec82d8ef
Author: lukem <lukem@NetBSD.org>
Date:   Fri Nov 26 18:38:27 1999 +0000

    missing ,

commit 1f11bc4cc8c7a0356806e535a077dc542fa8e253
Author: lukem <lukem@NetBSD.org>
Date:   Sat Nov 13 11:32:12 1999 +0000

    instead of using a private coord_t global variable to store the size of the
    rprompt, use the previously unused coord_t el->el_rprompt.p_pos

commit 509864fa8f7140274611b053d0855b9d3988f09a
Author: lukem <lukem@NetBSD.org>
Date:   Fri Nov 12 01:05:07 1999 +0000

    - implement printing a right-side prompt. code derived from similar work
      I wrote for tcsh(1) three years ago.
    - implement EL_RPROMPT, which allows a setting/getting of a function which
      returns a string to be used as the right-side prompt.
    - improve HISTORY and AUTHORS sections in editline(3).
    - bump shlib minor version for EL_RPROMPT.
    
    XXX: due to an implementation issue, the rprompt has a 1 space gap before the
         edge of the logical screen. editline's logical screen is 1 space less
         than the full screen width, so there's a 2 space gap between the rprompt
         and the right end of the physical screen. i'm not concerned about this.

commit e7d4e16bdf1ebf33a7462303d907b450b31636bb
Author: lukem <lukem@NetBSD.org>
Date:   Sun Oct 24 04:04:13 1999 +0000

    Fix pointer arithmatic (caused problems on LP64, including ftp dumping
    core when `edit' was turned off then on).
    Problem solved by David Huggins-Daines <dhd@eradicator.org>

commit 7c714abab4a2dc0a81484788d943afe3a24ac37f
Author: jdolecek <jdolecek@NetBSD.org>
Date:   Fri Oct 15 17:01:19 1999 +0000

    don't assume locales are not working - it may not be the case
    re_refresh(): cast the character passed to re_addc() to unsigned char,
            so we don't end up calling isprint() with negative value
            when chars are signed and character value is >= 128

commit 332ab876a23ead59b7f8b42af97eddd26566b851
Author: lukem <lukem@NetBSD.org>
Date:   Mon Oct 4 23:24:04 1999 +0000

    update post change to return value of tputs() third argument

commit 65c98beb1ab09f4bddeedcaf5cc1e5ca672250ee
Author: lukem <lukem@NetBSD.org>
Date:   Mon Oct 4 23:23:21 1999 +0000

    remove some lint

commit 9962715a2e0fb89f9fb621f763b310e9193b6050
Author: lukem <lukem@NetBSD.org>
Date:   Sun Sep 26 14:37:47 1999 +0000

    apparantly need <unistd.h> for portable way of getting _POSIX_VDISABLE

commit 8494e0e800e842287f5530520ff51fd8c0f684c1
Author: lukem <lukem@NetBSD.org>
Date:   Tue Sep 21 00:55:55 1999 +0000

    * in el_source():
            - don't reopen fp if it was successfully opened in a previous check
            - use strlcpy()/strlcat() instead of snprintf() to build a pathname,
              since the former are more portable to other systems than the latter
    * whitespace fascism

commit 250f2917a05cffe59acbbf3b83115d52fb86ee29
Author: lukem <lukem@NetBSD.org>
Date:   Tue Sep 21 00:07:03 1999 +0000

    fix id header...

commit 1dbb61e63e921587eec0a52c02d71547d184c057
Author: lukem <lukem@NetBSD.org>
Date:   Mon Sep 20 23:43:42 1999 +0000

    more whitespace fascism

commit 15b8b5a50b019fd7bf6f1fe1b22d021486e2e6dd
Author: sommerfeld <sommerfeld@NetBSD.org>
Date:   Sun Aug 8 01:25:05 1999 +0000

    minor tweak to previous fix: don't spuriously truncate final newline
    under emacs.

commit 3e32553f0b52d65487d4924557e59e261797e1ef
Author: sommerfeld <sommerfeld@NetBSD.org>
Date:   Mon Aug 2 01:01:55 1999 +0000

    Fix PR7685 (gdb under emacs prints spurious ^M and messes up terminal)
    plus a few bogons noted along the way:
            1) Set EDIT_DISABLED if terminal type is emacs.
            2) fix bug in NO_TTY mode which caused it to not notice CR or LF
            3) implement EDIT_DISABLED within libedit to be somewhat like NO_TTY,
                    except that a prompt is printed first.

commit 9453db6b2d829628c925d7565da996223985fca6
Author: christos <christos@NetBSD.org>
Date:   Tue Jul 6 14:10:21 1999 +0000

    Use LIBEDITDIR instead of CURDIR so we can use that Makefile to compile
    libedit from another directory.

commit 87c1844d34d88c7163eefe840fa685fa92631b5d
Author: lukem <lukem@NetBSD.org>
Date:   Sat Jul 3 11:55:51 1999 +0000

    don't try to free() something allocated with alloca() in rl_complete_internal().
    (noticed while using completion in gdb and getting inundated with warnings from
    the new free())

commit 1528b775397d464430e1b9e6a8a73b760dbc99ab
Author: simonb <simonb@NetBSD.org>
Date:   Fri Jul 2 15:14:07 1999 +0000

    More trailing white space.

commit c3f0ff041dc8decee3aeb7bcb8f56ec87a3eb194
Author: christos <christos@NetBSD.org>
Date:   Sat Jun 12 18:58:05 1999 +0000

    Make this compile under linux

commit 38c96853cf2e356c4df10c78151c5c1e20c989cd
Author: garbled <garbled@NetBSD.org>
Date:   Mon Mar 22 19:44:33 1999 +0000

    Last of the .Os cleanups.  .Os is defined in the tmac.doc-common file,
    so we shouldn't override it with versions in the manpages.  Wheee!

commit b59b03995495a982372a2eefaa73415b901a5e74
Author: mycroft <mycroft@NetBSD.org>
Date:   Sat Mar 6 00:17:25 1999 +0000

    Add missing , in he_errlist[] initializer.  Yay lint.

commit 0abd9472556e4a32e3d408c68e0db3527931baf2
Author: itohy <itohy@NetBSD.org>
Date:   Thu Mar 4 11:45:22 1999 +0000

    Add minimal dependency to make "make depend" optional
    after cleandir.

commit edc1a24a56574cd87c6be8377bf090126ecae99f
Author: abs <abs@NetBSD.org>
Date:   Thu Feb 25 08:02:19 1999 +0000

    Add a note to update src/distrib/sets/lists/base/shl.*, and add a missing
    RCS Id.

commit 468bdc50fc9a352bc9e1b92d855151f370564aae
Author: christos <christos@NetBSD.org>
Date:   Sun Feb 7 14:34:05 1999 +0000

    PR/6957: Wolfgang Helbig:  libedit swaps CR and LF control chars.

commit 571b8997701d3a1f765a7c818f1b9ef1a06aa818
Author: christos <christos@NetBSD.org>
Date:   Fri Feb 5 20:53:49 1999 +0000

    delint.

commit 84ee55f13e902adc52cfbbf77c12c35f3208d081
Author: christos <christos@NetBSD.org>
Date:   Fri Feb 5 20:52:23 1999 +0000

    Encode the history lines using strvis() before saving it. Fixes gdb history
    problem with missing newlines.

commit 0d4dea92335de49f2e2962e983f154cf9ff88b6a
Author: christos <christos@NetBSD.org>
Date:   Fri Feb 5 20:38:01 1999 +0000

    M-X:<enter> core-dumped.

commit 3ed4fcf61e1aef0cdae01dd587cf8def01630949
Author: kleink <kleink@NetBSD.org>
Date:   Mon Jan 11 22:39:59 1999 +0000

    In userland, pull in <errno.h> instead of <sys/errno.h> for the declaration
    of errno.

commit ddfeeeebfd62962c4946797c5df9af85cbbd4881
Author: lukem <lukem@NetBSD.org>
Date:   Tue Jan 5 22:46:22 1999 +0000

    fix history() prototype. (d@openbsd.org)

commit 37709da7587fac0bbfed9741d52b44d067ac7ecf
Author: kleink <kleink@NetBSD.org>
Date:   Sun Dec 20 17:52:01 1998 +0000

    Change multiple inclusion protection symbol name to NetBSD convention which
    doesn't violate namespace rules.

commit a6d4afba22f6e38a7f400807af3d02c6c457f091
Author: christos <christos@NetBSD.org>
Date:   Sat Dec 12 20:08:21 1998 +0000

    delint

commit a0be074d8b39cd7f709e869d5fe4768abf72a419
Author: christos <christos@NetBSD.org>
Date:   Sat Dec 12 19:54:16 1998 +0000

    many problems; variables hidden by others, size_t <-> confusion

commit 61df62e6a8fe3623ab32eefb05ac9d67ca289b01
Author: christos <christos@NetBSD.org>
Date:   Sat Dec 12 19:52:51 1998 +0000

    - missing error message from array could cause core dump
    - delint

commit 244d803bb318b3c96fe28c86c1e875565f957897
Author: cgd <cgd@NetBSD.org>
Date:   Thu Dec 3 17:51:16 1998 +0000

    per e-mail with christos: history_next_event() should return -1, not NULL,
    in case of error, just like history_prev_event() does.

commit 5e435627f6b41be21bdd2365b7a50a56343b9b5a
Author: christos <christos@NetBSD.org>
Date:   Mon Sep 28 11:00:05 1998 +0000

    fix core-dump caused by maps not being initialized before tty is called.

commit 622528ad625a0906275a0e8b0e451a1f91a7a868
Author: christos <christos@NetBSD.org>
Date:   Sun Sep 27 18:04:12 1998 +0000

    Obey incoming tty char settings.

commit 016aaad0bababcc89612075b5bb7d3dcc629b2b5
Author: christos <christos@NetBSD.org>
Date:   Wed Sep 2 21:33:50 1998 +0000

    PR/6081: Wolfgang Helbig: search broken in vi mode. When patbuf was changed
    to be dynamically allocated, sizeof was not changed appropriately.

commit f87d2504049ca18528a5eaa005c5a12eb11c9142
Author: lukem <lukem@NetBSD.org>
Date:   Wed Jul 29 02:26:00 1998 +0000

    * add more checks for NULL pointers in passed arguments
    * implement el_get(EditLine *, int op, void *result), which does the
      inverse of el_set()
    * add EL_EDITMODE operation to el_set and el_get; if non zero editing
      is enabled (the default).
    * add "edit  on | off" editrc command, which modifies EL_EDITMODE.
      users can now add '*:edit off' in ~/.editrc as an advisory to
      disable editing.
    
    NOTE: at this time EL_EDITMODE is just an indication of the
    state of the 'edit' command. It's up to the application to check
    this after el_source() or el_parse() to determine if editing is still
    required.

commit a7d411eb83281ffe4498cf3c4ffec1576ec7ef7a
Author: lukem <lukem@NetBSD.org>
Date:   Mon Jun 8 10:56:43 1998 +0000

    documentation is always probably incomplete; don't make an issue of it

commit fe1a16ac056ef7bb57db44305cce9ce2a94013a3
Author: lukem <lukem@NetBSD.org>
Date:   Mon Jun 1 14:31:26 1998 +0000

    * implement CC_REFRESH_BEEP; as per CC_REFRESH but beep as well. this
      is useful in completion when a partial completion is found
    * remove entry in BUGS about el_parse(); that was fixed a while ago

commit 9f2cd5c8ffd905e53b2b798fc5f89e157dcd3cb5
Author: christos <christos@NetBSD.org>
Date:   Wed May 20 01:38:53 1998 +0000

    Show the simpler way.

commit eac8b13603f26446c3cf080d953457819b3a5075
Author: christos <christos@NetBSD.org>
Date:   Wed May 20 01:37:54 1998 +0000

    Add H_APPEND to simplify the interface.

commit 116d3cb1aa1a057c983c04ac46d490da1ff7ece6
Author: christos <christos@NetBSD.org>
Date:   Wed May 20 01:12:25 1998 +0000

    Fix for api changes.

commit e44dec2e4bab26091e0ff6283917aae0ee83af27
Author: christos <christos@NetBSD.org>
Date:   Wed May 20 01:05:27 1998 +0000

    Adjust for changes.

commit 34f34f3dd5b682f3beb98e55418d6b0d58883d6b
Author: christos <christos@NetBSD.org>
Date:   Wed May 20 01:04:56 1998 +0000

    change M_* constants to MD_* to avoid clashes with <stream.h>

commit aa6425fdd40e74d87bae3dd1424415b026be02ff
Author: christos <christos@NetBSD.org>
Date:   Wed May 20 01:04:17 1998 +0000

    remove term_beep hack.

commit a6c530826348d9487053f86444f34462ee75cda1
Author: christos <christos@NetBSD.org>
Date:   Wed May 20 01:03:51 1998 +0000

    Bump!

commit 32cdebd7ac23c4df98344cf234f097fea21ae7a5
Author: christos <christos@NetBSD.org>
Date:   Wed May 20 01:03:30 1998 +0000

    cast is*() arg to unsigned char

commit 96c915840cbad3e29f56ff93832eb6ae60363e43
Author: christos <christos@NetBSD.org>
Date:   Wed May 20 01:03:06 1998 +0000

    Adjust to the libedit api changes.

commit ccac6ba81c9159eeb3dbe999ebfb9b50a55bcf3e
Author: christos <christos@NetBSD.org>
Date:   Wed May 20 01:02:38 1998 +0000

    Add a function to be able to set the cursor to a given event number.

commit 4b8b8611ee0089ac40daaeb55fa26ac524668f95
Author: christos <christos@NetBSD.org>
Date:   Wed May 20 01:02:09 1998 +0000

    - add extra argument to el_init
    - fix history functions
    - add el_beep()

commit 46573afdb6372af04797e757230a69d1d233d7ab
Author: christos <christos@NetBSD.org>
Date:   Wed May 20 01:01:28 1998 +0000

    cast is*() arg to unsigned char

commit ff2402b5240089279af2fb086dc123d963286829
Author: christos <christos@NetBSD.org>
Date:   Wed May 20 01:01:00 1998 +0000

    el_init takes a third stream argument and add el_beep.

commit 84c5ecc419a1087a2f3dfaa5619dfb3868365e3f
Author: christos <christos@NetBSD.org>
Date:   Wed May 20 01:00:33 1998 +0000

    Don't print to stderr, but to the editline error stream.

commit 53b970783b88e970c3dd04447f7affbf480473ed
Author: mrg <mrg@NetBSD.org>
Date:   Mon Mar 30 01:30:14 1998 +0000

    use int rather than char as an array index.

commit 312aca536fc7f9c37d79535a99e8e78dcd8187ec
Author: perry <perry@NetBSD.org>
Date:   Thu Feb 5 18:45:17 1998 +0000

    add LIBRARY section to man page

commit 0b7831a37b834b484dcd99d40c951c0cbdb1a28e
Author: perry <perry@NetBSD.org>
Date:   Tue Feb 3 19:12:13 1998 +0000

    remove obsolete register declarations

commit 58a555d4a2826927fa5927677012283e24f491f7
Author: perry <perry@NetBSD.org>
Date:   Fri Jan 30 02:27:34 1998 +0000

    update to lite-2 (just an sccsid change)

commit 63177b84aec0bbae6862dabf20aa0d61d23fdbab
Author: lukem <lukem@NetBSD.org>
Date:   Wed Jan 21 11:12:34 1998 +0000

    in el_parse(), use a temporary buffer to store the program name when
    comparing, preventing trashing of argv[0]. remove note in man page
    warning of former behaviour.

commit 78b73237b4a7fa7d057e06321effb27716de5ee6
Author: lukem <lukem@NetBSD.org>
Date:   Wed Jan 21 10:12:22 1998 +0000

    fix compile errors if FIONREAD is defined.  noted by
    David Holland <dholland@bordeaux.eecs.harvard.edu> in [bin/4012].

commit 93db5caa95f3f1b6ad2f52a093f9edad449fe246
Author: perry <perry@NetBSD.org>
Date:   Mon Jan 5 07:41:06 1998 +0000

    RCSID Police.

commit c49189ae410d0f19f53c59c4d4ede4b27520af06
Author: christos <christos@NetBSD.org>
Date:   Sat Dec 20 19:15:50 1997 +0000

    Small optimization. Don't call isatty() on every invocation of el_gets, but
    remember if the tty setup failed... Also trim the input line of trailing \r's.

commit c8160e6ecd89842b24bc709abc899538b377099b
Author: thorpej <thorpej@NetBSD.org>
Date:   Thu Nov 13 04:48:48 1997 +0000

    Un-"protect" term_beep() and rename it to __term_beep() to keep it out
    of the user's namespace.  We need to do this because the readline
    emulation functions call term_beep(), but readline isn't built using
    the same (funky) namespace-protection method as the rest of libedit (it's
    included like a normal library object).
    
    Without this (fairly disgusting) hack, any program linked against
    libedit will fail to link with an unresolved reference to term_beep()
    if using an Elf toolchain (e.g. on the Alpha).
    
    XXX Why this doesn't happen with NetBSD's a.out toolchain is a mystery
    XXX to me, and I'm not sure I really want to know (given that a.out
    XXX _should_ break the same way as Elf does in this case).

commit 285ed317373e8b3c72b6fcc2b3a4cc2bfb0defd1
Author: thorpej <thorpej@NetBSD.org>
Date:   Thu Nov 13 04:43:07 1997 +0000

    Build readline.o into debugging versions of libedit, too.

commit 142a4c50c4f8fb4ddfaa0a5ce617a40cacffb89d
Author: thorpej <thorpej@NetBSD.org>
Date:   Wed Nov 12 21:56:05 1997 +0000

    el_gets() takes an int *, not a size_t *.

commit 94c2aad7df1a25c5878d08479c521bec69ae044e
Author: lukem <lukem@NetBSD.org>
Date:   Sun Nov 9 00:13:52 1997 +0000

    move description of history() return value

commit cc6167153e87b26a9cc6ce89fcea06cf18dd9e92
Author: christos <christos@NetBSD.org>
Date:   Sun Oct 26 20:19:48 1997 +0000

    Make el_gets() work when the input is not a tty.

commit 40ea82f3d586f9ac6e25f1e8c714e28dc1b9c5a9
Author: christos <christos@NetBSD.org>
Date:   Sun Oct 26 20:17:48 1997 +0000

    Make a link for history.h -> readline.h

commit bc7956dee12e2d3c69816a916612ed7fbc1df0fb
Author: christos <christos@NetBSD.org>
Date:   Thu Oct 23 22:51:59 1997 +0000

    Const de-poisoning :-( Unfortunately the default gnu readline does not
    have full prototypes... With those changes, and a single line change in
    gdb/top.c, gdb links with -ledit

commit f7de801d6c1a0eafcd61b667c094945c3f23a98b
Author: christos <christos@NetBSD.org>
Date:   Thu Oct 23 22:24:09 1997 +0000

    PR/4301: Jaromir Dolecek. Add gnu-readline wrapper for editline.

commit 3431200c6f796a378d4bcbb2289beecfa712e0c1
Author: lukem <lukem@NetBSD.org>
Date:   Thu Oct 23 06:35:42 1997 +0000

    make this compile with the new libedit history()

commit f72bbf3895da15b04dc3cfe9ab30c64e171057bc
Author: lukem <lukem@NetBSD.org>
Date:   Thu Oct 23 03:26:27 1997 +0000

    use CPPFLAGS instead of CFLAGS, fix building of test

commit 94cf43326671be278a503418bb30cf2fdf04a2d9
Author: scottr <scottr@NetBSD.org>
Date:   Mon Oct 20 08:07:47 1997 +0000

    Add support for DTR/CTS flow control, from Bill Studenmund.

commit a7db9a7942bbac15ef2ae5fc2e922db429b576bb
Author: christos <christos@NetBSD.org>
Date:   Tue Oct 14 15:05:49 1997 +0000

    PR/4257: Jaromir Dolecek: history() has no generic error handling and isn't
    reentrant. This changes the interface of the history function, so we need
    a major number bump.

commit 55c1036e4f04bde01ce399e782164409db5d94ed
Author: lukem <lukem@NetBSD.org>
Date:   Mon Oct 13 16:09:01 1997 +0000

    use <termcap.h> instead of "termcap.h" (which was repository copied to libterm)

commit 9d66e20f615b399ef10f55c5cf1db4dce97cce92
Author: mrg <mrg@NetBSD.org>
Date:   Mon Oct 13 15:46:30 1997 +0000

    termcap.h moves to libterm.

commit e603ef8879e62903408a2cec21dd21a7f5533b2e
Author: christos <christos@NetBSD.org>
Date:   Thu Oct 9 19:16:04 1997 +0000

    PR/4211: Dave Huang: don't lose VSTATUS and VEOL and any other characters that
    are VDISABLED by default.

commit 5542a7ca430714c94e0372d3c89bc65a79f97e32
Author: lukem <lukem@NetBSD.org>
Date:   Thu Oct 9 14:36:17 1997 +0000

    - define WARNS?=1 in the top-level Makefile.inc, and don't define
      anywhere else.
    - for now, override WARNS=0 in librpcsvc and libwrap, until they're
      cleaned up
    - rcsid police
    
    lib is now clean (except for librpcsvc and libwrap) on the i386, and
    this should motivate the other ports to fix any other minor problems
    that their compilers pick up that the i386 version doesn't.

commit 990a11b9c6a587bebd29cea0f4796bd10d31b7bb
Author: jtc <jtc@NetBSD.org>
Date:   Wed Jul 30 23:53:32 1997 +0000

    Fix files using old TNF copyright notice

commit 54fac6850e1537ec23fc499cc3f7080f25f553fe
Author: christos <christos@NetBSD.org>
Date:   Sun Jul 6 18:25:21 1997 +0000

    Fix compiler warnings.

commit cc4a1553a1438ec3a623d9cb88f1eccffe0eb50b
Author: mycroft <mycroft@NetBSD.org>
Date:   Fri May 9 07:50:03 1997 +0000

    Eliminate bogus redefinitions of standard targets.

commit 6e4fef04ced9a2ba55f11ef41f89f6a706b43638
Author: christos <christos@NetBSD.org>
Date:   Thu Apr 24 20:20:31 1997 +0000

    editrc -> editline

commit 753977f439dc6bc23bfe3b969e9177514cccb7e6
Author: christos <christos@NetBSD.org>
Date:   Thu Apr 24 18:54:16 1997 +0000

    Handle properly the case where the last line in the sourced file does
    not have a trailing '\n'. From Jeffrey C Honig.

commit 9593d7acb377c59cf7b4201039eab87be0234ad7
Author: christos <christos@NetBSD.org>
Date:   Fri Apr 11 22:40:06 1997 +0000

    Return -1 if the terminal set operation resulted in dumb terminal settings.

commit 5b7cd46de3cd4af9417e36f7cdad9e9182ea5260
Author: christos <christos@NetBSD.org>
Date:   Fri Apr 11 21:38:02 1997 +0000

    Don't allow CSWTCH to interfere with CSUSP on __SVR4 systems.

commit eb54427340ca79785e28541a3e79df6b80b1cfba
Author: christos <christos@NetBSD.org>
Date:   Fri Apr 11 17:52:44 1997 +0000

    Portability fixes:
    __const         -> const
    BADSIG          -> SIG_ERR
    int flags       -> u_int flags
    #if __STDC__    -> #ifdef __STDC__

commit 8259dd08d6fe0163c244a286f6fdd87527d1effd
Author: christos <christos@NetBSD.org>
Date:   Mon Mar 24 22:11:48 1997 +0000

    Makefile cleanups:
    use INCS variable to install includes and FILES to install objects.

commit 3ff63340c3c476fca135842928a5c8a893ecca26
Author: christos <christos@NetBSD.org>
Date:   Thu Mar 20 16:42:32 1997 +0000

    Fix potential stack overflow; from Keith Bostic.

commit 9cd5492c0260bc081b84b3657f5d7fd950e2aa9b
Author: mrg <mrg@NetBSD.org>
Date:   Thu Jan 23 14:01:45 1997 +0000

    - convert unsafe strcpy(), strcat() and sprintf() to the `n' versions.
    - some KNF.

commit e69e9fbfa5ac2abd7e6dd09cc0ff818ac1b8e14c
Author: lukem <lukem@NetBSD.org>
Date:   Fri Jan 17 01:03:33 1997 +0000

    fix el_source() - a block needed braces around it (the indenting fooled me)

commit 730be84dfc4908fc5214959a9bc934a97964ed0f
Author: lukem <lukem@NetBSD.org>
Date:   Tue Jan 14 04:17:22 1997 +0000

    Implement CC_REDISPLAY, which (unlink CC_REFRESH) redraws the entire input
    line (a la ^R). This is useful if the binding outputs information and
    mucks up the input line. To be used in ``list-choices'' bindings (refer
    to the ^D binding in csh when filec is set)

commit 5785f63611e81cedcf2108d5146d5df832f7e615
Author: lukem <lukem@NetBSD.org>
Date:   Sat Jan 11 09:57:06 1997 +0000

    * document ^char and \ escape sequences
    * when parsing ^char control chars, check the correct char when determining
      validity (previously, ^char was a NOP interpreted as the literal string
      because of this bug)

commit 2543e3e6515329ad3a155c18f465c9cabca58bd7
Author: lukem <lukem@NetBSD.org>
Date:   Sat Jan 11 06:47:47 1997 +0000

    RCSid police
    editline first appeared in 4.4BSD not NetBSD1.0

commit 258ebfd2683e2335de032bd5d7060e888b5a6ff8
Author: lukem <lukem@NetBSD.org>
Date:   Sat Jan 11 06:26:30 1997 +0000

    * in el_parse(), don't reference argv[0] if argc < 1 (return -1 instead)
    * clarify return value of el_parse()

commit b59d3eaf10f9af5485ea46d6eeb2cebde8a21117
Author: lukem <lukem@NetBSD.org>
Date:   Thu Jan 9 13:12:14 1997 +0000

    * add a man page for the editline routines
    * add a man page describing editrc
    * fix bugs in el_parse():
            * didn't execute command when program name matched (test reversed)
            * was checking against empty string instead of program name
            * after checks, command to run also pointed to empty string
    
    [christos - the author of libedit - ok-ed the man pages in general (which I
     wrote from scratch by RTFS) as well as the bugfix]

commit 7f9ea0f2edf68e515fb857dde3206f667e267f29
Author: thorpej <thorpej@NetBSD.org>
Date:   Fri Oct 18 05:45:01 1996 +0000

    Use ${INSTALL}.

commit ab5dfe6dc8a202c009c3618b3e920832375e1c3e
Author: jtk <jtk@NetBSD.org>
Date:   Sat Jun 1 19:59:30 1996 +0000

    merge bugfix from 1.2 branch: use includes target for include files

commit 95b0e87b48a4e99f9ebc69c93c11e76ec6d1455b
Author: christos <christos@NetBSD.org>
Date:   Sun Oct 15 19:42:05 1995 +0000

    Added history load and save to file functions.

commit ac2f3dfca68a02ac2aa1b016d67226905e95e8ae
Author: cgd <cgd@NetBSD.org>
Date:   Wed Jun 7 05:52:12 1995 +0000

    be a bit more careful when splitting pathnames

commit 42c2892cc97d6482dd8b84efc92838f4a4396555
Author: christos <christos@NetBSD.org>
Date:   Sat Apr 29 20:44:00 1995 +0000

    Fixed the key mapping code and reverted Charles' changes.

commit c1a3077d0338bfa89cb4d90ea9f266053da99192
Author: mycroft <mycroft@NetBSD.org>
Date:   Thu Apr 27 04:49:26 1995 +0000

    Remove dead code that can't possibly work.

commit 4d13217262d7ef45c19439d69dbb6ea52b6a9a42
Author: mycroft <mycroft@NetBSD.org>
Date:   Thu Apr 27 03:59:38 1995 +0000

    Trivial code ordering change.

commit e94c4d1ac4136128ef0e9b59607fbf16b0c21130
Author: mycroft <mycroft@NetBSD.org>
Date:   Fri Oct 7 11:40:53 1994 +0000

    Fix typo.

commit 5251d09ee13c608a972887e62c88c70e07aa74c9
Author: mycroft <mycroft@NetBSD.org>
Date:   Sun Oct 2 04:27:28 1994 +0000

    Don't even *try* to print out the name of the termcap file; it's hidden
    in libtermcap, and it normally uses the DB file anyway.

commit 5e53b2b629f1870353f5d8948ff7fde5120b2d52
Author: mycroft <mycroft@NetBSD.org>
Date:   Sun Oct 2 04:23:08 1994 +0000

    Nuke bogus baud rate conversion code.

commit 68523b5d88610d116a2824d6e7d9e7c9f22888d2
Author: jtc <jtc@NetBSD.org>
Date:   Sun Oct 2 02:10:48 1994 +0000

    Added code so that POSIX.2 regular expresion functions  are used if REGEX
    is defined, V8 regular expresion functions are used if REGEXP is defined,
    and BSD regular expression functions are used if neither are defined.
    And defined REGEX in sys.h so that programs using libedit don't have
    to link with libcompat.

commit b7cc0db10391cb6c19eba689631c37f6b74975be
Author: cgd <cgd@NetBSD.org>
Date:   Tue Aug 30 15:16:44 1994 +0000

    fix for pr 420, from Christos.

commit 139cb3d7c580fd44fd93c7b72a16622784f79e12
Author: cgd <cgd@NetBSD.org>
Date:   Fri May 6 06:17:44 1994 +0000

    local

commit 6dc2f1db52b49c75bccc82d628849b87198380ef
Author: cgd <cgd@NetBSD.org>
Date:   Fri May 6 06:01:42 1994 +0000

    libedit!
